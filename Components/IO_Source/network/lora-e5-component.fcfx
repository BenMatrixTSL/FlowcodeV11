<root>
<document scada='0' schema='103' license='1,J Kersing  The-Box Development,HT46AW' title='Lora-E5 Component' description='' fcversion='655616' target='PIC.16F.BL0080' >
	<config data='!0,3f8c!10,37fd!20,3f92!30,1fff!40,3fff%0,4%4,0%8,1' clkspd='32000000' simspd='0' usewdt='0' constif='0' Use3V3='0' />
	<plugins >
		<dll_models enabled='1' />
	</plugins>
	<supplement use='0' head='' body='' />
	<debug >
		<watch expr='.ch' />
		<watch expr='token' />
		<watch expr='parserstate' />
		<watch expr='.result' />
		<watch expr='token' />
		<watch expr='.ch' />
		<watch expr='.i' />
		<watch expr='port' />
	</debug>
	<traces />
	<ghost >
		<FK2 >
			<data name='FK2D0' port='4294967295' pin='4294967295' />
			<data name='FK2D1' port='4294967295' pin='4294967295' />
			<data name='FK2D2' port='4294967295' pin='4294967295' />
			<data name='FK2D3' port='4294967295' pin='4294967295' />
			<data name='FK2D4' port='4294967295' pin='4294967295' />
			<data name='FK2D5' port='4294967295' pin='4294967295' />
			<data name='FK2D6' port='4294967295' pin='4294967295' />
			<data name='FK2D7' port='4294967295' pin='4294967295' />
			<data name='FK2D8' port='4294967295' pin='4294967295' />
			<data name='FK2D9' port='4294967295' pin='4294967295' />
			<data name='FK2D10' port='4294967295' pin='4294967295' />
			<data name='FK2D11' port='4294967295' pin='4294967295' />
			<data name='FK2D12' port='4294967295' pin='4294967295' />
			<data name='FK2D13' port='4294967295' pin='4294967295' />
			<data name='FK2D14' port='4294967295' pin='4294967295' />
			<data name='FK2D15' port='4294967295' pin='4294967295' />
			<data name='FK2A0' port='4294967295' pin='4294967295' />
			<data name='FK2A1' port='4294967295' pin='4294967295' />
			<data name='FK2A2' port='4294967295' pin='4294967295' />
			<data name='FK2A3' port='4294967295' pin='4294967295' />
			<data name='FK2A4' port='4294967295' pin='4294967295' />
			<data name='FK2A5' port='4294967295' pin='4294967295' />
		</FK2>
		<ICD >
			<data name='AnalogPrescaleValue' value='19' />
			<data name='DigitalSampleRate' value='100000' />
			<data name='BreakpointCount' value='8' />
			<data name='CallStackDepthCount' value='8' />
			<data name='ClockPort' value='1' />
			<data name='ClockPin' value='6' />
			<data name='DataPort' value='1' />
			<data name='DataPin' value='7' />
			<data name='UseDefaultPins' value='1' />
			<data name='WrapEnabled' value='1' />
			<data name='CommsDelayOverridden' value='0' />
			<data name='CommsDelay' value='6' />
			<data name='CalculatedCommsDelay' value='6' />
			<data name='AnalogEB2PrescaleValue' value='2' />
			<data name='DigitalEB2SampleRate' value='100000' />
		</ICD>
		<pins >
			<digital A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
			<analog A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
		</pins>
	</ghost>
	<components >
		<settings autoimg='0' center='1' unitscale='0' fixedscale='0' fixedx='25' fixedy='25' fixedz='25' headcode='0' />
		<definition guid='e50536ca-0cc0-4cdc-b0af-8cf3b393fa27' vstate='40' vmin='0' vmaj='1' srcleaf='lora-e5-component.fcfx' visiblename='LoRaWAN (Seeed WIO-E5)' description='LoRaWAN Component for the Seeed WIO-E5 module.' category='Comms: IoT/Cloud' category2='' category3='' bIs2dOnly='1' bIs3dOnly='0' catenable='1' author='Jac Kersing' manuname='IoT-Noord' manucode='LORAWAN-E5' sysinfo='1061647' keywords='' dynamic='1' scadaCompatible='0' embeddedCompatible='1' showmacros='1' iconpath='C:\Users\kersing\Documents\lw.png' />
		<component class_type='root' codename='LoRaWAN' panelId='-1' x='0' y='0' z='0' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='0' poslock='0' comp2dType='0' >
			<resources />
			<properties >
				<property name='LoRaWAN settings' hidden='0' >
					<property name='Max Downlink Size' target='dlData::BufferSize' typeid='21' hidden='0' locked='0' info='Sets the number of byte elements inside the circular buffer.' />
				</property>
				<property name='Connections' folder='cal_uart1::property_3' hidden='0' >
					<property name='Channel' target='cal_uart::CHANNEL' typeid='16' hidden='0' locked='0' info='UART Channel selector
Software channels are bit banged using generic I/O pins but are not as reliable as hardware channels.
Hardware channels use the selected peripheral on-board the target microcontroller.' filter='001Channel 1
' />
					<property name='Baud Options' target='cal_uart::BAUD_LIST' typeid='16' hidden='0' locked='0' info='Baud rate option selector' filter='000Custom
0011200
0022400
0034800
0049600
00519200
00631250
00738400
00857600
009115200' />
					<property name='TX' target='cal_uart::TX' typeid='5' hidden='0' locked='1' info='Pin to be used for Transmit data' />
					<property name='TX Remap Pin' target='cal_uart::OutputPins' typeid='16' hidden='0' locked='0' info='Allows the hardware transmit pin to be configured from a list of available pins based on your target device,' filter='000$PORTC.0
001$PORTC.1
002$PORTC.2
003$PORTC.3
004$PORTC.4
005$PORTC.5
006$PORTC.6
007$PORTC.7
008$PORTB.0
009$PORTB.1
010$PORTB.2
011$PORTB.3
012$PORTB.4
013$PORTB.5
014$PORTB.6
015$PORTB.7' />
					<property name='RX' target='cal_uart::RX' typeid='5' hidden='0' locked='1' info='Pin to be used for Receive data' />
					<property name='RX Remap Pin' target='cal_uart::InputPins' typeid='16' hidden='0' locked='0' info='Allows the hardware receive pin to be configured from a list of available pins based on your target device,' filter='016$PORTC.0
017$PORTC.1
018$PORTC.2
019$PORTC.3
020$PORTC.4
021$PORTC.5
022$PORTC.6
023$PORTC.7
008$PORTB.0
009$PORTB.1
010$PORTB.2
011$PORTB.3
012$PORTB.4
013$PORTB.5
014$PORTB.6
015$PORTB.7' />
					<property name='UART Index' target='UARTidx' typeid='21' hidden='1' locked='0' info='' />
				</property>
				<property name='Simulation' folder='cal_uart1::property_1' hidden='0' >
					<property name='Console Data' target='cal_uart1::ConsoleData' typeid='7' hidden='0' locked='0' info='Selects if the console data is automatically generated or not' />
					<property name='Console Format' target='cal_uart1::ConsoleFormat' typeid='16' hidden='0' locked='0' info='Controls if the data is shown as a log with time and date stamps or just as raw data' filter='000Log
001Data' />
					<property name='Console Columns' target='cal_uart1::ConsoleColumns' typeid='21' hidden='0' locked='0' info='Number of characters that can be displayed on a single line of the console.' />
					<property name='Data Source' target='cal_uart::DataSource' typeid='16' hidden='0' locked='0' info='Simulation data source used to allow the component to connect to various remote devices
    Nothing - Simulation data is ignored
    COM port - Routes the communication data to and from a physical or virtual COM port 
    API - Routes the communication data via a data injector component on the Panel.' filter='000Nothing
001COM Port
002API Slave' />
					<property name='API' target='cal_uart::Injector' typeid='16' hidden='0' locked='0' info='Selects which API component to route the communication data via.
Add API components to the panel before they will be available in this list.
API components are available from the Comms component category.' filter='000' />
					<property name='COM Port' target='cal_uart::com_port' typeid='16' hidden='1' locked='0' info='Lists all the current available COM port hardware on your PC.' filter='004COM4 Standard Serial over Bluetooth link
007COM7 Silicon Labs CP210x USB to UART Bridge
015COM15 Standard Serial over Bluetooth link
016COM16 Standard Serial over Bluetooth link
017COM17 Standard Serial over Bluetooth link' />
				</property>
			</properties>
			<values >
				<value target='dlData::BufferSize' data='40' />
				<value target='cal_uart::CHANNEL' data='001' />
				<value target='cal_uart::BAUD_LIST' data='004' />
				<value target='cal_uart::TX' data='$PORTC.1' />
				<value target='cal_uart::OutputPins' data='001' />
				<value target='cal_uart::RX' data='$PORTC.0' />
				<value target='cal_uart::InputPins' data='016' />
				<value target='UARTidx' data='001' />
				<value target='cal_uart1::ConsoleData' data='1' />
				<value target='cal_uart1::ConsoleFormat' data='000' />
				<value target='cal_uart1::ConsoleColumns' data='64' />
				<value target='cal_uart::DataSource' data='002' />
				<value target='cal_uart::Injector' data='000' />
				<value target='cal_uart::com_port' data='004' />
			</values>
			<events >
				<event class='Compile' event='AddInterrupts' target='Ev_AddInterrupts' />
				<event class='Simulation' event='Stop' target='Ev_Stop' />
				<event class='Compile' event='Preprocess' target='Ev_Preprocess' />
				<event class='Simulation' event='Start' target='Ev_Start' />
				<event class='System' event='Timer' target='Ev_Timer' />
			</events>
			<apis >
				<api name='SendMsgConfirmed' alt='SendMsgConfirmed' type='1' proto='1' />
				<api name='Ev_Timer' alt='' type='2' proto='1' />
				<api name='Ev_Stop' alt='' type='2' proto='1' />
				<api name='GetId' alt='GetId' type='1' proto='1' />
				<api name='SetPort' alt='SetPort' type='1' proto='1' />
				<api name='GetDownlinkByte' alt='GetDownlinkByte' type='1' proto='1' />
				<api name='GetPort' alt='GetPort' type='1' proto='1' />
				<api name='GotDownlink' alt='GotDownlink' type='1' proto='1' />
				<api name='ChkConnected' alt='ChkConnected' type='1' proto='1' />
				<api name='Join' alt='Join' type='1' proto='1' />
				<api name='ReInitUart' alt='ReInitUart' type='1' proto='1' />
				<api name='SetDr' alt='SetDr' type='1' proto='1' />
				<api name='SetId' alt='SetId' type='1' proto='1' />
				<api name='FreeUart' alt='FreeUart' type='1' proto='1' />
				<api name='SetKey' alt='SetKey' type='1' proto='1' />
				<api name='SetJoinMode' alt='SetJoinMode' type='1' proto='1' />
				<api name='SendMsg' alt='SendMsg' type='1' proto='1' />
				<api name='SetLowPower' alt='SetLowPower' type='1' proto='1' />
				<api name='SetRegion' alt='SetRegion' type='1' proto='1' />
				<api name='Ev_Start' alt='' type='2' proto='1' />
				<api name='Initialize' alt='Initialize' type='1' proto='1' />
				<api name='LowPowerSleep' alt='LowPowerSleep' type='1' proto='1' />
			</apis>
			<variables >
				<variable public='1' >
					<def class_type='variable' name='DevEUI' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;DevEUI&quot;' setinit='&quot;DevEUI&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PARSER_NEXT' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='1' >
					<def class_type='variable' name='REGION_EU868' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;EU868&quot;' setinit='&quot;EU868&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='1' >
					<def class_type='variable' name='DevAddr' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;DevAddr&quot;' setinit='&quot;DevAddr&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='1' >
					<def class_type='variable' name='MODE_ABP' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;LWABP&quot;' setinit='&quot;LWABP&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='downlink' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RESP_OK' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PARSER_EOL' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='offset' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='1' >
					<def class_type='variable' name='false' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RESP_TIMEOUT' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='3' setinit='3' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PARSER_TOKEN' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='3' setinit='3' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='uartopen' type='b1' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='false' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PARSER_TOKENEND' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='4' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='index' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='1' >
					<def class_type='variable' name='MODE_OTAA' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;LWOTAA&quot;' setinit='&quot;LWOTAA&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PARSER_SYNC' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='1' >
					<def class_type='variable' name='AppEUI' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;AppEUI&quot;' setinit='&quot;AppEUI&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='parserstate' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='PARSER_START' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='token' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='25' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='port' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='BUFLEN' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='25' setinit='25' />
				</variable>
				<variable public='1' >
					<def class_type='variable' name='REGION_US915' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;US915&quot;' setinit='&quot;US915&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='joined' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RESP_PARSING' type='u8' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='1' >
					<def class_type='variable' name='AppKey' type='T8' description='' isconst='1' isHidden='0' isinit='1' usrinit='&quot;APP&quot;' setinit='&quot;APP&quot;' >
						<array size='20' />
					</def>
				</variable>
				<variable public='1' >
					<def class_type='variable' name='true' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
			</variables>
			<macros >
				<macro >
					<flowline name='SendMsgConfirmed' description='Send a confirmed LoRaWAN message, the message should 
be an array of byte values.
To conserve airtime no ASCII strings should be used.

Use confirmed messages sparingly as transmitting gateways can normally
receive 8 parallel messages but not 1 message while transmitting. So it
kills scalebility of a LoRaWAN network!' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='msg' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<param name='len' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='i' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='done' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ch' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='acked' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;CMSGHEX=\&quot;&quot;' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.i = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.i &lt; .len' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = NumberToHex$(.msg[.i])' />
									<exp exp='.i = .i + 1' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='.str' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.i &lt; .len' swap='0' >
									<flowline >
										<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
											<argument exp='&quot; &quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\&quot;\n\r&quot;' />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
							<exp exp='.result = 0' />
							<exp exp='.acked = false' />
							<exp exp='downlink = false' />
							<exp exp='' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;CMSGHEX&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;Start&quot;' />
									<argument exp='false' />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.done = false' />
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='!.done' >
											<flowline >
												<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
													<return exp='.result' />
													<argument exp='&quot;CMSGHEX&quot;' />
													<argument exp='true' />
												</command>
												<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
													<flowline >
														<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
															<flowline >
																<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
																	<return exp='.result' />
																	<argument exp='true' />
																	<argument exp='false' />
																</command>
															</flowline>
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;ACK&quot;' />
														</command>
														<command class_type='decision' title='Succes response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.acked = true' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;Done&quot;' />
														</command>
														<command class_type='decision' title='Succes response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.done = true' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;PORT:&quot;' />
														</command>
														<command class_type='decision' title='Downlink received?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
															<flowline >
																<command class_type='calculation' title='Downlink received' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='downlink = true' />
																	<exp exp='port = 0' />
																</command>
																<command class_type='comment' title='' comment='Get port' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																	<return exp='.ch' />
																</command>
																<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='(.ch != &apos;;&apos;) &amp;&amp; (.ch &gt;= &apos;0&apos;) &amp;&amp; (.ch &lt;= &apos;9&apos;)' >
																	<flowline >
																		<command class_type='decision' title='Nummeric?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.ch &gt;= &apos;0&apos;) &amp;&amp; (.ch &lt;= &apos;9&apos;)' swap='0' >
																			<flowline >
																				<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																					<exp exp='.ch = .ch - &apos;0&apos;' />
																					<exp exp='port = port * 10' />
																					<exp exp='port = port + .ch' />
																				</command>
																			</flowline>
																			<flowline />
																		</command>
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																			<return exp='.ch' />
																		</command>
																	</flowline>
																</command>
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='peek1char' >
																	<return exp='.ch' />
																</command>
																<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.ch == &apos; &apos;' >
																	<flowline >
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																			<return exp='.ch' />
																		</command>
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='peek1char' >
																			<return exp='.ch' />
																		</command>
																	</flowline>
																</command>
																<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
																	<flowline >
																		<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
																			<return exp='.result' />
																			<argument exp='true' />
																			<argument exp='false' />
																		</command>
																	</flowline>
																</command>
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
																	<return exp='.result' />
																	<argument exp='&quot;RX:&quot;' />
																</command>
																<command class_type='decision' title='Data?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
																	<flowline >
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																			<return exp='.ch' />
																		</command>
																		<command class_type='decision' title='Quote' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch == &apos;\&quot;&apos;' swap='0' >
																			<flowline >
																				<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																					<return exp='.ch' />
																				</command>
																				<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.ch != &apos;\&quot;&apos;' >
																					<flowline >
																						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &gt;= &apos;A&apos;' swap='0' >
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = (.ch - &apos;A&apos;) + 10' />
																								</command>
																							</flowline>
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = .ch - &apos;0&apos;' />
																								</command>
																							</flowline>
																						</command>
																						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																							<exp exp='.i = .i * 16' />
																						</command>
																						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																							<return exp='.ch' />
																						</command>
																						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &gt;= &apos;A&apos;' swap='0' >
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = .i + ((.ch - &apos;A&apos;) + 10)' />
																								</command>
																							</flowline>
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = .i + (.ch - &apos;0&apos;)' />
																								</command>
																							</flowline>
																						</command>
																						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='dlData' macro='PutByte' >
																							<argument exp='.i' />
																						</command>
																						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																							<return exp='.ch' />
																						</command>
																					</flowline>
																				</command>
																			</flowline>
																			<flowline />
																		</command>
																	</flowline>
																	<flowline />
																</command>
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .acked' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Timer' description='Called back on the panel command System.TimerStart' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='TimerID' type='u32' description='The identifier passed to the System.TimerStart panel command' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ch' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Check for any simulated input, if any put into circular buffer.
Required as interrupts do not simulate and RS232 input is interrupt
driven.' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Read UART input' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Receive' >
							<return exp='.ch' />
							<argument exp='10' />
						</command>
						<command class_type='decision' title='Realy got something?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &lt; 255' swap='0' >
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='PutByte' >
									<argument exp='.ch' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='sim' title='Repeat timer call in 10ms' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.TimerStart' >
							<argument exp='1' />
							<argument exp='10' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Stop' description='Broadcast to all components that simulation has stopped' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.TimerStop' >
							<argument exp='1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_AddInterrupts' description='Sent to a component to allow dynamic amendment of the interrupts for a component' statediag='0' >
						<return name='Return' type='u32' description='Non-zero to block code insertion' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='HandlerCode' type='T8*' description='Text to amend for all component interrupts' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<local name='ISR_Macro' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<local name='UART_Str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Expand.MacroBody' >
							<return exp='.ISR_Macro' />
							<argument exp='&quot;rxChar&quot;' />
							<argument exp='this' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.UART_Str = &quot;MX_UART_INT_CH&quot; + STRING UARTidx + &quot;_FUNC\n\n&quot;' />
							<exp exp='.UART_Str = .UART_Str + &quot;MX_UINT16 FCL_CH;\n\n&quot;' />
							<exp exp='.UART_Str = .UART_Str + &quot;if (MX_UART_INT_CH&quot; + STRING UARTidx + &quot;_DET)\n{\n\n&quot;' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ISR_Macro = .UART_Str + .ISR_Macro' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ISR_Macro = .ISR_Macro + &quot;MX_UART_INT_CH&quot; + STRING UARTidx + &quot;_CLR;&quot;' />
							<exp exp='.ISR_Macro = .ISR_Macro + &quot;\n\n}\n\nMX_UART_INT_FUNC_END\n&quot;' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.HandlerCode = .HandlerCode + &quot;\n\n&quot; + .ISR_Macro' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='peek1char' description='' statediag='0' >
						<return name='Return' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='1' exp='.count &gt; 0' start='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='GetNumberBytes' >
									<return exp='.count' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Get one character' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='PeekByte' >
							<return exp='.Return' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetId' description='Get the specified ID from the LoRaWAN module.
Valid types are DevEUI, AppEUI and DevAddr ' statediag='0' >
						<return name='Return' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='2000' />
						</return>
						<param name='type' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='5' />
						</param>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='eui' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='17' />
						</local>
						<local name='dummy' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;ID=&quot;' />
						</command>
						<command class_type='calculation' title='Create EUI string' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.eui = .type' />
							<exp exp='.Return = &quot;&quot;' />
							<exp exp='.result = 0' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.eui' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\n\r&quot;' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;ID&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='.eui' />
									<argument exp='false' />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='calculation' title='Set loop variable' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.result = RESP_PARSING' />
										</command>
										<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
											<flowline >
												<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
													<return exp='.result' />
													<argument exp='false' />
													<argument exp='false' />
												</command>
											</flowline>
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Compare$(.type,&quot;DevAddr&quot;,1) != 0' swap='0' >
											<flowline >
												<command class_type='calculation' title='Get EUI from response' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.eui[0] = token[0]' />
													<exp exp='.eui[1] = token[1]' />
													<exp exp='.eui[2] = token[3]' />
													<exp exp='.eui[3] = token[4]' />
													<exp exp='.eui[4] = token[6]' />
													<exp exp='.eui[5] = token[7]' />
													<exp exp='.eui[6] = token[9]' />
													<exp exp='.eui[7] = token[10]' />
													<exp exp='.eui[8] = token[12]' />
													<exp exp='.eui[9] = token[13]' />
													<exp exp='.eui[10] = token[15]' />
													<exp exp='.eui[11] = token[16]' />
													<exp exp='.eui[12] = token[18]' />
													<exp exp='.eui[13] = token[19]' />
													<exp exp='.eui[14] = token[21]' />
													<exp exp='.eui[15] = token[22]' />
													<exp exp='.eui[16] = 0' />
													<exp exp='' />
												</command>
											</flowline>
											<flowline >
												<command class_type='calculation' title='Get Addr from response' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.eui[0] = token[0]' />
													<exp exp='.eui[1] = token[1]' />
													<exp exp='.eui[2] = token[3]' />
													<exp exp='.eui[3] = token[4]' />
													<exp exp='.eui[4] = token[6]' />
													<exp exp='.eui[5] = token[7]' />
													<exp exp='.eui[6] = token[9]' />
													<exp exp='.eui[7] = token[10]' />
													<exp exp='.eui[8] = 0' />
													<exp exp='' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .eui' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetPort' description='Set the port used for transmissions' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='port' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Valid rate?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.port &gt; 0 &amp;&amp; .port &lt; 253' swap='0' >
							<flowline >
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
									<argument exp='&quot;PORT=&quot;' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = STRING (.port)' />
									<exp exp='.result = 0' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='.str' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='&quot;\n\r&quot;' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='&quot;PORT&quot;' />
											<argument exp='true' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='.str' />
											<argument exp='false' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Fail' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.result = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetDownlinkByte' description='Get one byte from the received downlink message, returns -1 if no more bytes
are available.' statediag='0' >
						<return name='Return' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='bytes' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ch' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = -1' />
						</command>
						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='dlData' macro='GetNumberBytes' >
							<return exp='.bytes' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.bytes &gt; 0' swap='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='dlData' macro='GetByte' >
									<return exp='.Return' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetPort' description='Get the portnumber of the downlink message.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='downlink == true' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = port' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 255' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadToken' description='Read (partial) response from the LoRaWAN module. Returns RESP_PARSING if still incomplete' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='breakOnSpace' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='reset' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ch' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Signal incomplete' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = RESP_PARSING' />
							<exp exp='.count = 65535' />
						</command>
						<command class_type='decision' title='Reset parser?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.reset == true' swap='0' >
							<flowline >
								<command class_type='calculation' title='Start parsing new line' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='parserstate = PARSER_SYNC' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='loop' title='Loop while parsing data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Return == RESP_PARSING' >
							<flowline >
								<command class_type='call' title='Check data is available' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='GetNumberBytes' >
									<return exp='.ch' />
								</command>
								<command class_type='decision' title='Any data?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &gt; 0' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.count = 65535' />
										</command>
										<command class_type='call' title='Get one character' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='GetByte' >
											<return exp='.ch' />
										</command>
										<command class_type='switch' title='Handle state machine' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='parserstate' >
											<case >
												<flowline />
											</case>
											<case exp='PARSER_SYNC' >
												<flowline >
													<command class_type='decision' title='End of previous line or syncing?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch == 0xff || .ch == 0x0a || .ch == 0x0d' swap='0' >
														<flowline >
															<command class_type='calculation' title='Still syncing' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																<exp exp='// parserstate = PARSER_SYNC' />
															</command>
														</flowline>
														<flowline >
															<command class_type='decision' title='Start of the reponse?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch = &apos;+&apos;' swap='0' >
																<flowline >
																	<command class_type='calculation' title='Start of token' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																		<exp exp='parserstate = PARSER_TOKEN' />
																		<exp exp='offset = 0' />
																	</command>
																</flowline>
																<flowline />
															</command>
														</flowline>
													</command>
												</flowline>
											</case>
											<case exp='PARSER_TOKEN' >
												<flowline >
													<command class_type='decision' title='Find end of command' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch == &apos;:&apos;' swap='0' >
														<flowline >
															<command class_type='calculation' title='Command token complete ' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																<exp exp='parserstate = PARSER_TOKENEND' />
																<exp exp='offset = 0' />
																<exp exp='.Return = RESP_OK' />
															</command>
														</flowline>
														<flowline >
															<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='puttoken' >
																<argument exp='.ch' />
															</command>
														</flowline>
													</command>
												</flowline>
											</case>
											<case exp='PARSER_TOKENEND' >
												<flowline >
													<command class_type='decision' title='Skip space(s)' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch != &apos; &apos;' swap='0' >
														<flowline >
															<command class_type='calculation' title='Command token complete ' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																<exp exp='parserstate = PARSER_NEXT' />
																<exp exp='' />
															</command>
															<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='puttoken' >
																<argument exp='.ch' />
															</command>
														</flowline>
														<flowline />
													</command>
												</flowline>
											</case>
											<case exp='PARSER_NEXT' >
												<flowline >
													<command class_type='decision' title='Find end of token' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch == &apos;,&apos; || (.ch == &apos; &apos; &amp;&amp; .breakOnSpace) || .ch == 0x0a || .ch == 0x0d' swap='0' >
														<flowline >
															<command class_type='calculation' title='Next token complete' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																<exp exp='parserstate = PARSER_TOKENEND' />
																<exp exp='offset = 0' />
																<exp exp='.Return = RESP_OK' />
															</command>
														</flowline>
														<flowline >
															<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='puttoken' >
																<argument exp='.ch' />
															</command>
														</flowline>
													</command>
												</flowline>
											</case>
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.count = .count - 1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.count = 0' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Return = RESP_TIMEOUT' />
												</command>
											</flowline>
											<flowline >
												<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='5' type='1' />
											</flowline>
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CompareResponse' description='Check result from module with expected value' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='expect' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = (Compare$(.expect,token,1) == 0)' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GotDownlink' description='Was a downlink received?' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = downlink' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ChkConnected' description='Sends AT command and checks response to check the LoRa E5 module 
is connected to the controller.' statediag='0' >
						<return name='Return' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\xff\xff\xff\xff\xff\xff&quot;' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='5' type='1' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\xff\xff\xff\xff\xff\xff&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;AT\n\r&quot;' />
						</command>
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
							<return exp='.result' />
							<argument exp='&quot;AT&quot;' />
							<argument exp='true' />
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;OK&quot;' />
									<argument exp='false' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .result' />
						</command>
					</flowline>
				</macro>
				<macro keep='1' >
					<flowline name='rxChar' description='Receive character interrupt routine' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='ch' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Get character' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Receive' >
							<return exp='.ch' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Valid character received?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &lt; 256' swap='0' >
							<flowline >
								<command class_type='call' title='Save received character to buffer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='PutByte' >
									<argument exp='.ch' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Join' description='Execute a join command to have the module join the LoRaWAN network.
Returns 1 on a successfull join, 0 if the join failed.
Keep in mind there is no interaction with the LoRaWAN network if
Join mode is ABP so it will always succeed if all parameters have
been initialized correctly.
In Join mode OTAA a join will fail if the module does not get a valid
response from teh network which may occur if the DevEUI, AppEUI
or AppKey are not correct or if there is no coverage at the location.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='done' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;JOIN\n\r&quot;' />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
							<exp exp='.result = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;JOIN&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;Start&quot;' />
									<argument exp='false' />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.done = false' />
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='!.done' >
											<flowline >
												<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
													<return exp='.result' />
													<argument exp='&quot;JOIN&quot;' />
													<argument exp='true' />
												</command>
												<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
													<flowline >
														<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
															<flowline >
																<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
																	<return exp='.result' />
																	<argument exp='false' />
																	<argument exp='false' />
																</command>
															</flowline>
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;Network joined&quot;' />
														</command>
														<command class_type='decision' title='Succes response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
															<flowline >
																<command class_type='calculation' title='Success, exit loop' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.done = true' />
																	<exp exp='.Return = 1' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;Join failed&quot;' />
														</command>
														<command class_type='decision' title='Failed response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
															<flowline >
																<command class_type='calculation' title='Failed, exit loop' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.done = true' />
																</command>
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.done = false' />
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='!.done' >
											<flowline >
												<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
													<return exp='.result' />
													<argument exp='&quot;JOIN&quot;' />
													<argument exp='true' />
												</command>
												<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
													<flowline >
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
															<return exp='.result' />
															<argument exp='&quot;Done&quot;' />
															<argument exp='false' />
														</command>
														<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.done = true' />
																</command>
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReInitUart' description='Reclaim the UART after low power sleep of the CONTROLLER (not the
LoRaWAN module).' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Init' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='uartopen = true' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetDr' description='Explicitly set DataRate of transmissions. Valid values depend on the region used
please consult the LoRaWAN regional parameter document to find them.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='dr' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</local>
						<command class_type='decision' title='Valid rate?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.dr &gt;= 0 &amp;&amp; .dr &lt; 7' swap='0' >
							<flowline >
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
									<argument exp='&quot;DR=&quot;' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = &quot;DR&quot; + STRING (.dr)' />
									<exp exp='.result = 0' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='.str' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='&quot;\n\r&quot;' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='&quot;DR&quot;' />
											<argument exp='true' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='.str' />
											<argument exp='false' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Fail' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.result = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetId' description='Set an ID. Valid options are &quot;AppEUI&quot;, &quot;DevEUI&quot; and &quot;DevAddr&quot;. The value
to use is an 16 HEX character long string for EUIs or a 8 HEX characters long
string for DevAddr.

Examples:
AppEUI: &quot;001122334455AABB&quot;
DevAddr: &quot;001122AA&quot;' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='type' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<param name='value' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='id' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='10' />
						</local>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;ID=&quot;' />
						</command>
						<command class_type='calculation' title='Create EUI string' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.id = .type' />
							<exp exp='.Return = 0' />
							<exp exp='.result = 0' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.id' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;,\&quot;&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.value' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\&quot;\n\r&quot;' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;ID&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='.id' />
									<argument exp='false' />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
											<flowline >
												<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
													<return exp='.result' />
													<argument exp='false' />
													<argument exp='false' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .result' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='FreeUart' description='Release UART resources (to allow for sleeping on some microcontrollers)' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Uninit' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='uartopen = false' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetKey' description='Set encryption key. 

Valid key types are: &quot;APPKEY&quot;, &quot;APPSKEY&quot; and &quot;NWKSKEY&quot;.

For OTAA only APPKEY is required. For ABP both APPSKEY and NWKSKEY
are required.

The value shoud be a 32 HEX character string.
Example value: &quot;00112233445566778899AABBCCDDEEFF&quot;' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='type' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<param name='value' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='key' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='10' />
						</local>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;KEY=&quot;' />
						</command>
						<command class_type='calculation' title='Create EUI string' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.key = .type + &quot;KEY&quot;' />
							<exp exp='.Return = 0' />
							<exp exp='.result = 0' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.key' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;,\&quot;&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.value' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\&quot;\n\r&quot;' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;KEY&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='.key' />
									<argument exp='false' />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
											<flowline >
												<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
													<return exp='.result' />
													<argument exp='false' />
													<argument exp='false' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .result' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetJoinMode' description='Set the join mode, valid options are MODE_OTAA or MODE_ABP.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='mode' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;MODE=&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.mode' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\n\r&quot;' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.result = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;MODE&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='.mode' />
									<argument exp='false' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .result' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SendAT' description='Send start of AT command including wake-up sequence to module' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='str' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='UART not initialized?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='uartopen == false' swap='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Init' />
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='uartopen = true' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='50' type='1' />
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\xff\xff\xff\xff&quot;' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='5' type='1' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\xff\xff\xff\xff&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;AT+&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.str' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='get1char' description='' statediag='0' >
						<return name='Return' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='1' exp='.count &gt; 0' start='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='GetNumberBytes' >
									<return exp='.count' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Get one character' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='GetByte' >
							<return exp='.Return' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadAndCompareToken' description='Check result from module with expected value' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='expect' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<param name='reset' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Set loop variable' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.result = RESP_PARSING' />
						</command>
						<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
							<flowline >
								<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
									<return exp='.result' />
									<argument exp='true' />
									<argument exp='.reset' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = (Compare$(.expect,token,1) == 0)' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='puttoken' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='ch' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='offset &lt; BUFLEN - 2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='token[offset] = .ch' />
									<exp exp='offset = offset + 1' />
									<exp exp='token[offset] = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Preprocess' description='Broadcast to all components immediately before compilation is started' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Temp_Str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<command class_type='comment' title='' comment='Apply some CAL defaults' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SetValue' >
							<argument exp='&quot;FLOWEN&quot;' />
							<argument exp='&quot;0&quot;' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SetValue' >
							<argument exp='&quot;ECHO&quot;' />
							<argument exp='&quot;0&quot;' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SetValue' >
							<argument exp='&quot;DBITS&quot;' />
							<argument exp='&quot;8&quot;' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SetValue' >
							<argument exp='&quot;RETURN&quot;' />
							<argument exp='&quot;1&quot;' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SetValue' >
							<argument exp='&quot;INT&quot;' />
							<argument exp='&quot;1&quot;' />
						</command>
						<command class_type='comment' title='' comment='Record current UART channel' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.GetValue' >
							<return exp='.Temp_Str' />
							<argument exp='cal_uart' />
							<argument exp='&quot;CHANNEL&quot;' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
							<argument exp='this' />
							<argument exp='&quot;UARTidx&quot;' />
							<argument exp='.Temp_Str' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SendMsg' description='Send LoRaWAN message, the message should be an array of byte values.
To conserve airtime no ASCII strings should be used.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='msg' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<param name='len' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='i' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='done' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ch' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;MSGHEX=\&quot;&quot;' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.i = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.i &lt; .len' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = NumberToHex$(.msg[.i])' />
									<exp exp='.i = .i + 1' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='.str' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.i &lt; .len' swap='0' >
									<flowline >
										<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
											<argument exp='&quot; &quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\&quot;\n\r&quot;' />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
							<exp exp='.result = 0' />
							<exp exp='downlink = false' />
							<exp exp='' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;MSGHEX&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;Start&quot;' />
									<argument exp='false' />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.done = false' />
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='!.done' >
											<flowline >
												<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
													<return exp='.result' />
													<argument exp='&quot;MSGHEX&quot;' />
													<argument exp='true' />
												</command>
												<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
													<flowline >
														<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
															<flowline >
																<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
																	<return exp='.result' />
																	<argument exp='true' />
																	<argument exp='false' />
																</command>
															</flowline>
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;Done&quot;' />
														</command>
														<command class_type='decision' title='Succes response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.done = true' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
															<return exp='.result' />
															<argument exp='&quot;PORT:&quot;' />
														</command>
														<command class_type='decision' title='Downlink received?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
															<flowline >
																<command class_type='calculation' title='Downlink received' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='downlink = true' />
																	<exp exp='port = 0' />
																</command>
																<command class_type='comment' title='' comment='Get port' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																	<return exp='.ch' />
																</command>
																<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='(.ch != &apos;;&apos;) &amp;&amp; (.ch &gt;= &apos;0&apos;) &amp;&amp; (.ch &lt;= &apos;9&apos;)' >
																	<flowline >
																		<command class_type='decision' title='Nummeric?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.ch &gt;= &apos;0&apos;) &amp;&amp; (.ch &lt;= &apos;9&apos;)' swap='0' >
																			<flowline >
																				<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																					<exp exp='.ch = .ch - &apos;0&apos;' />
																					<exp exp='port = port * 10' />
																					<exp exp='port = port + .ch' />
																				</command>
																			</flowline>
																			<flowline />
																		</command>
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																			<return exp='.ch' />
																		</command>
																	</flowline>
																</command>
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='peek1char' >
																	<return exp='.ch' />
																</command>
																<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.ch == &apos; &apos;' >
																	<flowline >
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																			<return exp='.ch' />
																		</command>
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='peek1char' >
																			<return exp='.ch' />
																		</command>
																	</flowline>
																</command>
																<command class_type='loop' title='Loop while parsing' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == RESP_PARSING' >
																	<flowline >
																		<command class_type='call' title='Read response' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
																			<return exp='.result' />
																			<argument exp='true' />
																			<argument exp='false' />
																		</command>
																	</flowline>
																</command>
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CompareResponse' >
																	<return exp='.result' />
																	<argument exp='&quot;RX:&quot;' />
																</command>
																<command class_type='decision' title='Data?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
																	<flowline >
																		<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																			<return exp='.ch' />
																		</command>
																		<command class_type='decision' title='Quote' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch == &apos;\&quot;&apos;' swap='0' >
																			<flowline >
																				<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																					<return exp='.ch' />
																				</command>
																				<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.ch != &apos;\&quot;&apos;' >
																					<flowline >
																						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &gt;= &apos;A&apos;' swap='0' >
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = (.ch - &apos;A&apos;) + 10' />
																								</command>
																							</flowline>
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = .ch - &apos;0&apos;' />
																								</command>
																							</flowline>
																						</command>
																						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																							<exp exp='.i = .i * 16' />
																						</command>
																						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																							<return exp='.ch' />
																						</command>
																						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ch &gt;= &apos;A&apos;' swap='0' >
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = .i + ((.ch - &apos;A&apos;) + 10)' />
																								</command>
																							</flowline>
																							<flowline >
																								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																									<exp exp='.i = .i + (.ch - &apos;0&apos;)' />
																								</command>
																							</flowline>
																						</command>
																						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='dlData' macro='PutByte' >
																							<argument exp='.i' />
																						</command>
																						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='get1char' >
																							<return exp='.ch' />
																						</command>
																					</flowline>
																				</command>
																			</flowline>
																			<flowline />
																		</command>
																	</flowline>
																	<flowline />
																</command>
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetLowPower' description='Set the Low Power mode of the module. Low power can be off (false) or on (true)' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='on' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;LOWPOWER=&quot;' />
						</command>
						<command class_type='decision' title='Low Power on?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.on' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = &quot;AUTOON&quot;' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = &quot;AUTOOFF&quot;' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.result = 0' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.str' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\n\r&quot;' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;LOWPOWER&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='.str' />
									<argument exp='false' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetRegion' description='Set the LoRaWAN region to be used. For US915 the band (of 8 channels) 
to be used needs to be specified as well, the band is ignored for EU868

TTN uses band 1 in US915.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='region' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1' />
						</param>
						<param name='band' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='channels' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='10' />
						</local>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
							<argument exp='&quot;DR=&quot;' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='.region' />
						</command>
						<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
							<argument exp='&quot;\n\r&quot;' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.result = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='&quot;DR&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
									<return exp='.result' />
									<argument exp='.region' />
									<argument exp='false' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result != 0' swap='0' >
							<flowline >
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
									<argument exp='&quot;CH=NUM,&quot;' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Compare$(.region,&quot;EU868&quot;,1) == 0' swap='0' >
									<flowline >
										<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
											<argument exp='&quot;0-2&quot;' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Set channels based on band' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.channels = ToString$(.band * 8) + &quot;-&quot; + ToString$((.band * 8) + 7)' />
										</command>
										<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
											<argument exp='.channels' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='&quot;\n\r&quot;' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.result = 0' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='&quot;CH&quot;' />
											<argument exp='true' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadToken' >
									<argument exp='false' />
									<argument exp='false' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Return result' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .result' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Start' description='Broadcast to all components that simulation is starting' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.TimerStart' >
							<argument exp='1' />
							<argument exp='10' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Initialize' description='Initialize the component. Should be called before any other function is used
but after the component received a hardware reset. (Toggle of the reset pin)' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Initialize UART' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Init' />
						<command class_type='sim' title='Debug info' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
							<argument exp='&quot;\r\n&gt;&gt; Init LoRaWAN component&quot;' />
						</command>
						<command class_type='call' title='Clear buffer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='rxText' macro='FlushBuffer' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='offset = 0' />
							<exp exp='uartopen = true' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Main' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='s' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='40' />
						</local>
						<local name='bytes' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='10' />
						</local>
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='i' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Initialize component' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Initialize' />
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ChkConnected' />
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetLowPower' >
							<argument exp='1' />
						</command>
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetId' >
							<return exp='.s' />
							<argument exp='&quot;DevEUI&quot;' />
						</command>
						<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.Print' >
							<argument exp='&quot;DevEUI: &quot;' />
						</command>
						<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
							<argument exp='.s' />
						</command>
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetId' >
							<return exp='.s' />
							<argument exp='&quot;AppEUI&quot;' />
						</command>
						<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.Print' >
							<argument exp='&quot;AppEUI: &quot;' />
						</command>
						<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
							<argument exp='.s' />
						</command>
						<command class_type='call' title='User Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetId' >
							<argument exp='&quot;AppEUI&quot;' />
							<argument exp='&quot;8000000000000006&quot;' />
						</command>
						<command class_type='call' title='User Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetId' >
							<return exp='.s' />
							<argument exp='&quot;AppEUI&quot;' />
						</command>
						<command class_type='sim' title='Built-in Function' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.Print' >
							<argument exp='&quot;AppEUI: &quot;' />
						</command>
						<command class_type='sim' title='Built-in Function' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
							<argument exp='.s' />
						</command>
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetKey' >
							<argument exp='&quot;APP&quot;' />
							<argument exp='&quot;347087240EC9CFF3E863FFF91A08244B&quot;' />
						</command>
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetRegion' >
							<argument exp='REGION_EU868' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetJoinMode' >
							<argument exp='MODE_OTAA' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='1' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='joined == false' swap='0' >
									<flowline >
										<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
											<argument exp='&quot;Joining&quot;' />
										</command>
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Join' >
											<return exp='joined' />
											<argument exp='' />
										</command>
										<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
											<argument exp='&quot;Join: &quot;' />
										</command>
										<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
											<argument exp='joined' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='joined == true' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.bytes[0] = 0xde' />
											<exp exp='.bytes[1] = 0xad' />
										</command>
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendMsg' >
											<argument exp='.bytes' />
											<argument exp='2' />
										</command>
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GotDownlink' >
											<return exp='.result' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == true' swap='0' >
											<flowline >
												<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
													<argument exp='&quot;Downlink&quot;' />
												</command>
												<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.Print' >
													<argument exp='&quot;Port: &quot;' />
												</command>
												<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetPort' >
													<return exp='.result' />
												</command>
												<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
													<argument exp='String(.result)' />
												</command>
												<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetDownlinkByte' >
													<return exp='.i' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.i &gt;= 0' swap='0' >
													<flowline >
														<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
															<argument exp='&quot;Data:&quot;' />
														</command>
														<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.i &gt;= 0' >
															<flowline >
																<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
																	<argument exp='String(.i)' />
																</command>
																<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetDownlinkByte' >
																	<return exp='.i' />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline >
												<command class_type='sim' title='Built-in Function' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Debug.PrintLn' >
													<argument exp='&quot;No Downlink&quot;' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='300' type='2' />
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='LowPowerSleep' description='Set low power sleep mode. Specify the number of seconds to sleep in the range 6-12959.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='seconds' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<command class_type='calculation' title='' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='Low Power range valid?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.seconds &gt; 5 &amp;&amp; .seconds &lt; 12960' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.str = ToString$(.seconds)' />
									<exp exp='' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.result = 0' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SendAT' >
									<argument exp='&quot;LOWPOWER=&quot;' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='.str' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='&quot;0000&quot;' />
								</command>
								<command class_type='call' title='Send command' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='SendString' >
									<argument exp='&quot;\n\r&quot;' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.result == 0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='&quot;LOWPOWER&quot;' />
											<argument exp='true' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadAndCompareToken' >
											<return exp='.result' />
											<argument exp='&quot;SLEEP&quot;' />
											<argument exp='false' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Correct response?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result == 1' swap='0' >
									<flowline >
										<command class_type='call' title='Close UART to avoid waking module' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_uart' macro='Uninit' />
										<command class_type='calculation' title='Signal UART is closed' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='uartopen = false' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='calculation' title='' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = .result' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
			</macros>
			<component class_type='ref' guid='c34f9b8a-a915-4f75-ad0c-87f2ad670a8a' vmin='5' vmaj='1' codename='rxText' panelId='0' x='76' y='-76' z='0' xsz='0.5' ysz='0.5' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='BufferSize' data='200' />
					<value target='StorageType' data='000' />
					<value target='MemType' data='000' />
					<value target='RETURN' data='001' />
					<value target='Console' data='1' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='c34f9b8a-a915-4f75-ad0c-87f2ad670a8a' vmin='5' vmaj='1' codename='dlData' panelId='0' x='76' y='-76' z='1' xsz='0.5' ysz='0.5' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='BufferSize' data='40' />
					<value target='StorageType' data='000' />
					<value target='MemType' data='000' />
					<value target='RETURN' data='000' />
					<value target='Console' data='1' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='91b64b1d-b8b2-40f1-b073-e953a91fa234' vmin='2' vmaj='2' codename='cal_uart' panelId='0' x='77' y='-76' z='2' xsz='5' ysz='5' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='UseUART' data='1' />
					<value target='CHANNEL' data='001' />
					<value target='UseTX' data='1' />
					<value target='TX' data='$PORTC.1' />
					<value target='OutputPins' data='001' />
					<value target='TXAlt' data='0' />
					<value target='UseRX' data='1' />
					<value target='RX' data='$PORTC.0' />
					<value target='InputPins' data='016' />
					<value target='RXAlt' data='0' />
					<value target='FLOWEN' data='0' />
					<value target='RTS' data='$PORTC.4' />
					<value target='CTS' data='$PORTC.5' />
					<value target='BAUD_LIST' data='004' />
					<value target='BAUD' data='9600' />
					<value target='DBITS' data='8' />
					<value target='RETURN' data='1' />
					<value target='ECHO' data='0' />
					<value target='INT' data='1' />
					<value target='ScopeTraces' data='1' />
					<value target='ConsoleData' data='1' />
					<value target='ConsoleFormat' data='000' />
					<value target='ConsoleColumns' data='64' />
					<value target='DataSource' data='002' />
					<value target='com_port' data='004' />
					<value target='Injector' data='000' />
					<value target='InjectorHandle' data='0' />
					<value target='InjectorChannel' data='0' />
					<value target='APIUseDDR' data='0' />
					<value target='APIDDRPin' data='0' />
					<value target='APIUseFC' data='' />
					<value target='APICTSPin' data='0' />
					<value target='APIRTSPin' data='' />
					<value target='APIDDRRXState' data='000' />
					<value target='NoIO' data='' />
					<value target='Loading' data='1' />
					<value target='Sim' data='1' />
					<value target='REF' data='0' />
					<value target='TX_PORT' data='$PORTC.0' />
					<value target='TX_TRIS' data='$PORTC.0' />
					<value target='TX_PIN' data='0' />
					<value target='RX_PORT' data='$PORTC.1' />
					<value target='RX_TRIS' data='$PORTC.1' />
					<value target='RX_PIN' data='1' />
					<value target='CTS_PORT' data='$PORTC.5' />
					<value target='CTS_PIN' data='5' />
					<value target='CTS_TRIS' data='$PORTC.5' />
					<value target='RTS_PORT' data='$PORTC.4' />
					<value target='RTS_PIN' data='4' />
					<value target='RTS_TRIS' data='$PORTC.4' />
					<value target='REMAPPABLE' data='1' />
					<value target='OutputReg' data='001' />
					<value target='InputReg' data='' />
					<value target='TXRPNUM' data='16' />
					<value target='TXBank' data='b' />
					<value target='RXRPREG' data='RXPPS' />
					<value target='RXBank' data='b' />
					<value target='UARTName' data='' />
					<value target='UARTClock' data='' />
					<value target='UartNumber' data='' />
					<value target='TXBank2' data='c' />
					<value target='RXBank2' data='c' />
					<value target='TX_ALT' data='' />
					<value target='RX_ALT' data='' />
					<value target='BitDelay' data='104' />
					<value target='ParentName' data='LoRaWAN' />
					<value target='CompName' data='' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='58be670e-18fb-477e-ab09-61fde14b23ec' vmin='0' vmaj='1' codename='LibraryComponent1' panelId='0' x='77' y='-76.5' z='3' xsz='100.707' ysz='100.893' zsz='100' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='0' layer='2' poslock='1' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='Text::sText' data='LoRa
WAN' />
					<value target='Name' data='' />
					<value target='Peripheral::sText' data='(UART CH1)' />
					<value target='Text::nVerticalAlignment' data='002' />
					<value target='ShowComms' data='0' />
					<value target='InputIcon::CommsType' data='255' />
					<value target='InputIcon::LinkTo' data='0' />
					<value target='IconsOnRight' data='0' />
					<value target='OutputIcon::CommsType' data='255' />
					<value target='OutputIcon::LinkTo' data='0' />
					<value target='InputIcon1::CommsType' data='255' />
					<value target='ConsoleHandle' data='0' />
					<value target='Upgraded' data='0' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
		</component>
	</components>
	<scadaresourcelookup />
	<keymap />
	<panel2d shadows='0' lighting='2' brightness='0' >
		<background rgb='7292207' img='' style='0' />
		<camera xe='0' ye='0' ze='3242.3' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<viewport dx='580' dy='522' zoom='21.6451' fix_topleft='0' />
		<page x='1000' y='1000' show='0' rgb='7360576' />
		<winpos ID='7005' RectRecentFloat='1270,21,1920,597' RectRecentDocked='0,0,580,545' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel2d>
	<panel3d shadows='0' lighting='2' brightness='0' perspective='1' >
		<background rgb='8409120' img='' style='0' />
		<table rgb='7360576' img='' style='0' size='0' />
		<camera xe='0' ye='0' ze='781.66' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey0 xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey1 xe='-3.67394e-14' ye='0' ze='-300' xt='0' yt='0' zt='0' xquat='0' yquat='1' zquat='0' wquat='6.12323e-17' />
		<camerakey2 xe='0' ye='-300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.707107' yquat='0' zquat='0' wquat='0.707107' />
		<camerakey3 xe='-3.67394e-14' ye='300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-4.32978e-17' yquat='0.707107' zquat='0.707107' wquat='4.32978e-17' />
		<camerakey4 xe='-300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='0.5' zquat='0.5' wquat='0.5' />
		<camerakey5 xe='300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='-0.5' zquat='-0.5' wquat='0.5' />
		<camerakey6 xe='-173.205' ye='-173.205' ze='173.205' xt='0' yt='0' zt='0' xquat='-0.424708' yquat='0.17592' zquat='0.339851' wquat='0.820473' />
		<winpos ID='7004' RectRecentFloat='1095,490,1745,940' RectRecentDocked='0,0,580,450' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel3d>
	<panels2d count='1' >
		<panel2d_0 id='0' name='2D Panel' >
			<winpos ID='1171' RectRecentFloat='1270,0,1920,450' RectRecentDocked='1664,141,2306,1492' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
			<background fill='288230376151053813' showgrid='1' gridstyle='1' gridsize='10' gridbrush='71776119075691740' snaptogrid='1' />
		</panel2d_0>
	</panels2d>
	<layout >
		<view type='0' name='Main' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Initialize' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='rxChar' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Timer' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ReadToken' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='85' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ChkConnected' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='CompareResponse' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='135' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetId' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetKey' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetRegion' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetJoinMode' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Join' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ReadAndCompareToken' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetDr' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SendMsg' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='110' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='puttoken' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetPort' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GotDownlink' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetDownlinkByte' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='get1char' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='peek1char' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetId' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SendAT' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetLowPower' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_AddInterrupts' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Preprocess' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetPort' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SendMsgConfirmed' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='FreeUart' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ReInitUart' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='LowPowerSleep' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Start' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAlwcAAEIFAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
	</layout>
</document>
</root>
