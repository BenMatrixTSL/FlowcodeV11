<root>
<document scada='0' projtype='1' schema='103' license='1,MartinW,XAKUMA' title='' description='' fcversion='720896' target='ARD.ATMEGA.BL0055' >
	<config data='' clkspd='16000000' simspd='1' usewdt='0' constif='0' commport='116' Use3V3='0' />
	<plugins >
		<dll_models enabled='1' />
	</plugins>
	<supplement use='0' head='' body='' />
	<debug />
	<traces />
	<ghost >
		<FK2 >
			<data name='FK2D0' port='4294967295' pin='4294967295' />
			<data name='FK2D1' port='4294967295' pin='4294967295' />
			<data name='FK2D2' port='4294967295' pin='4294967295' />
			<data name='FK2D3' port='4294967295' pin='4294967295' />
			<data name='FK2D4' port='4294967295' pin='4294967295' />
			<data name='FK2D5' port='4294967295' pin='4294967295' />
			<data name='FK2D6' port='4294967295' pin='4294967295' />
			<data name='FK2D7' port='4294967295' pin='4294967295' />
			<data name='FK2D8' port='4294967295' pin='4294967295' />
			<data name='FK2D9' port='4294967295' pin='4294967295' />
			<data name='FK2D10' port='4294967295' pin='4294967295' />
			<data name='FK2D11' port='4294967295' pin='4294967295' />
			<data name='FK2D12' port='4294967295' pin='4294967295' />
			<data name='FK2D13' port='4294967295' pin='4294967295' />
			<data name='FK2D14' port='4294967295' pin='4294967295' />
			<data name='FK2D15' port='4294967295' pin='4294967295' />
			<data name='FK2A0' port='4294967295' pin='4294967295' />
			<data name='FK2A1' port='4294967295' pin='4294967295' />
			<data name='FK2A2' port='4294967295' pin='4294967295' />
			<data name='FK2A3' port='4294967295' pin='4294967295' />
			<data name='FK2A4' port='4294967295' pin='4294967295' />
			<data name='FK2A5' port='4294967295' pin='4294967295' />
		</FK2>
		<ICD >
			<data name='AnalogPrescaleValue' value='19' />
			<data name='DigitalSampleRate' value='100000' />
			<data name='BreakpointCount' value='8' />
			<data name='CallStackDepthCount' value='8' />
			<data name='ClockPort' value='3' />
			<data name='ClockPin' value='1' />
			<data name='DataPort' value='3' />
			<data name='DataPin' value='0' />
			<data name='UseDefaultPins' value='1' />
			<data name='WrapEnabled' value='1' />
			<data name='CommsDelayOverridden' value='0' />
			<data name='CommsDelay' value='11' />
			<data name='CalculatedCommsDelay' value='11' />
			<data name='AnalogEB2PrescaleValue' value='2' />
			<data name='DigitalEB2SampleRate' value='100000' />
		</ICD>
		<pins >
			<digital A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
			<analog A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
		</pins>
	</ghost>
	<components >
		<settings autoimg='0' center='1' unitscale='1' fixedscale='0' fixedx='1' fixedy='1' fixedz='1' headcode='0' />
		<definition guid='e18e39d3-2e05-4a15-b8aa-e8ada16cd3ef' vstate='40' vmin='0' vmaj='10' srcleaf='TCPIP_W5500.fcfx' visiblename='TCP/IP (W5500)' description='TCP/IP component designed to work with the W5500 device used on the ETH WIZ Click' category='Comms: Networking' category2='' category3='' bIs2dOnly='1' bIs3dOnly='0' bIsWysiwyg='0' catenable='1' author='Matrix TSL' manuname='Matrix TSL' manucode='W5500' sysinfo='1061643' keywords='' dynamic='1' scadaCompatible='0' embeddedCompatible='1' showmacros='1' iconpath='..\..\Icons\Components\TCP_IP.png' />
		<component class_type='root' codename='TCP_IP_W5500' panelId='-1' x='0' y='0' z='0' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='0' poslock='0' ancTop='0' ancBottom='0' ancLeft='0' ancRight='0' ancMinX='0' ancMinY='0' comp2dType='0' >
			<resources />
			<properties >
				<property name='Connections' folder='property_4' hidden='1' >
					<property name='MIAC Industrial Addon' target='ORDINAL' typeid='16' hidden='0' locked='0' info='' filter='000Ordinal 0
001Ordinal 1
002Ordinal 2
003Ordinal 3' />
				</property>
				<property name='Connections' folder='property_5' hidden='0' layout='' >
					<property name='Channel' target='cal_spi::CHANNEL' typeid='16' hidden='0' locked='0' info='SPI Channel selector' filter='000Software
001Channel 1
' />
					<property name='Prescale' target='cal_spi::PR_SCALE' typeid='16' hidden='0' locked='0' info='Prescale option selector' filter='002Fosc/2
004Fosc/4
008Fosc/8
016Fosc/16
032Fosc/32
064Fosc/64
128Fosc/128' />
					<property name='MOSI' target='cal_spi::MOSI' typeid='5' hidden='0' locked='1' info='SPI Data Out Pin SDO - Also Known as Master Out Slave In (MOSI) when used in Master mode.' />
					<property name='MOSI Remap Pin' target='cal_spi::MOSIPins' typeid='16' hidden='1' locked='0' info='Select which the target pin to assign the MOSI hardware pin functionality.' filter='000$PORTC.0
001$PORTC.1
002$PORTC.2
003$PORTC.3
004$PORTC.4
005$PORTC.5
006$PORTC.6
007$PORTC.7
008$PORTB.0
009$PORTB.1
010$PORTB.2
011$PORTB.3
012$PORTB.4
013$PORTB.5
014$PORTB.6
015$PORTB.7' />
					<property name='MISO' target='cal_spi::MISO' typeid='5' hidden='0' locked='1' info='SPI Data In Pin SDI - Also Known as Master In Slave Out (MISO) when used in Master mode.' />
					<property name='MISO Remap Pin' target='cal_spi::MISOPins' typeid='16' hidden='1' locked='0' info='Select which the target pin to assign the MISO hardware pin functionality.' filter='016$PORTC.0
017$PORTC.1
018$PORTC.2
019$PORTC.3
020$PORTC.4
021$PORTC.5
022$PORTC.6
023$PORTC.7
008$PORTB.0
009$PORTB.1
010$PORTB.2
011$PORTB.3
012$PORTB.4
013$PORTB.5
014$PORTB.6
015$PORTB.7' />
					<property name='CLK' target='cal_spi::CLK' typeid='5' hidden='0' locked='1' info='SPI Clock Pin CLK - The Clock signal is driven by the SPI master.' />
					<property name='CLK Remap Pin' target='cal_spi::CLKPins' typeid='16' hidden='1' locked='0' info='Select which the target pin to assign the CLK hardware pin functionality.' filter='000$PORTC.0
001$PORTC.1
002$PORTC.2
003$PORTC.3
004$PORTC.4
005$PORTC.5
006$PORTC.6
007$PORTC.7
008$PORTB.0
009$PORTB.1
010$PORTB.2
011$PORTB.3
012$PORTB.4
013$PORTB.5
014$PORTB.6
015$PORTB.7' />
					<property name='CS / SS' target='cal_spi::SS' typeid='5' hidden='0' locked='0' info='Chip Select / Slave Select Pin 
Master Mode: General purpose output pin used to select the remote SPI device.
Slave Mode: Hardware chip select pin input used to select the SPI device.
' />
				</property>
				<property name='Gateway IP' hidden='0' >
					<property name='Gateway0' target='gateway0' typeid='14' hidden='0' locked='0' info='' />
					<property name='Gateway1' target='gateway1' typeid='14' hidden='0' locked='0' info='' />
					<property name='Gateway2' target='gateway2' typeid='14' hidden='0' locked='0' info='' />
					<property name='Gateway3' target='gateway3' typeid='14' hidden='0' locked='0' info='' />
				</property>
				<property name='Subnet Mask' hidden='0' >
					<property name='Subnet0' target='subnet0' typeid='14' hidden='0' locked='0' info='' />
					<property name='Subnet1' target='subnet1' typeid='14' hidden='0' locked='0' info='' />
					<property name='Subnet2' target='subnet2' typeid='14' hidden='0' locked='0' info='' />
					<property name='Subnet3' target='subnet3' typeid='14' hidden='0' locked='0' info='' />
				</property>
				<property name='IP Address' hidden='0' >
					<property name='IP0' target='ip0' typeid='14' hidden='0' locked='0' info='' />
					<property name='IP1' target='ip1' typeid='14' hidden='0' locked='0' info='' />
					<property name='IP2' target='ip2' typeid='14' hidden='0' locked='0' info='' />
					<property name='IP3' target='ip3' typeid='14' hidden='0' locked='0' info='' />
				</property>
				<property name='MAC Address' hidden='0' >
					<property name='MAC0' target='mac0' typeid='14' hidden='0' locked='0' info='' />
					<property name='MAC1' target='mac1' typeid='14' hidden='0' locked='0' info='' />
					<property name='MAC2' target='mac2' typeid='14' hidden='0' locked='0' info='' />
					<property name='MAC3' target='mac3' typeid='14' hidden='0' locked='0' info='' />
					<property name='MAC4' target='mac4' typeid='14' hidden='0' locked='0' info='' />
					<property name='MAC5' target='mac5' typeid='14' hidden='0' locked='0' info='' />
				</property>
				<property name='MIAC System' target='MIAC_SYSTEM' typeid='7' hidden='1' locked='0' info='' />
				<property name='Simulation' folder='property_1' hidden='0' >
					<property name='Label' target='label' typeid='10' hidden='0' locked='0' info='' />
					<property name='Sim Type' target='SimType' typeid='16' hidden='0' locked='0' info='Decides how to perform the simulation of the component.
TCP IP - Communicates using the Windows TCP IP communications DLL
SPI / Injector - Communicates using the CAL SPI to allow the communications to be analysed and debugged.' filter='000TCP IP
001SPI / Injector' />
					<property name='SPI Simulation' folder='property_2' hidden='1' >
						<property name='Scope Traces' target='cal_spi::ScopeTraces' typeid='7' hidden='0' locked='0' info='Selects if the scope traces are automatically generated or not' />
						<property name='Console Data' target='cal_spi::ConsoleData' typeid='7' hidden='0' locked='0' info='Selects if the console data is automatically generated or not' />
						<property name='API' target='cal_spi::Injector' typeid='16' hidden='0' locked='0' info='' filter='000' />
						<property name='API CS Pin' target='cal_spi1::InjectorCS' typeid='21' hidden='1' locked='0' info='' />
					</property>
					<property name='TCP Simulation' folder='property_3' hidden='0' >
						<property name='Network Interface' target='TCP_Base::interface' typeid='16' hidden='0' locked='0' info='List of network interfaces connected to the PC. 
Sets which interface we are communicating via.' filter='0000
0011
0022
0033
0044
255AutoDetect' />
					</property>
					<property name='DHCP' target='DHCP' typeid='7' hidden='0' locked='0' info='' />
				</property>
				<property name='RemapIndex' target='RemapIndex' typeid='21' hidden='1' locked='0' info='' />
			</properties>
			<values >
				<value target='ORDINAL' data='000' />
				<value target='cal_spi::CHANNEL' data='001' />
				<value target='cal_spi::PR_SCALE' data='004' />
				<value target='cal_spi::MOSI' data='$PORTB.3' />
				<value target='cal_spi::MOSIPins' data='008' />
				<value target='cal_spi::MISO' data='$PORTB.4' />
				<value target='cal_spi::MISOPins' data='013' />
				<value target='cal_spi::CLK' data='$PORTB.5' />
				<value target='cal_spi::CLKPins' data='004' />
				<value target='cal_spi::SS' data='$PORTB.2' />
				<value target='gateway0' data='192' />
				<value target='gateway1' data='168' />
				<value target='gateway2' data='1' />
				<value target='gateway3' data='1' />
				<value target='subnet0' data='255' />
				<value target='subnet1' data='255' />
				<value target='subnet2' data='255' />
				<value target='subnet3' data='0' />
				<value target='ip0' data='192' />
				<value target='ip1' data='168' />
				<value target='ip2' data='1' />
				<value target='ip3' data='222' />
				<value target='mac0' data='0' />
				<value target='mac1' data='8' />
				<value target='mac2' data='220' />
				<value target='mac3' data='0' />
				<value target='mac4' data='0' />
				<value target='mac5' data='0' />
				<value target='MIAC_SYSTEM' data='0' />
				<value target='label' data='TCP/IP W5500' />
				<value target='SimType' data='000' />
				<value target='cal_spi::ScopeTraces' data='1' />
				<value target='cal_spi::ConsoleData' data='1' />
				<value target='cal_spi::Injector' data='000' />
				<value target='cal_spi1::InjectorCS' data='' />
				<value target='TCP_Base::interface' data='2' />
				<value target='DHCP' data='0' />
				<value target='RemapIndex' data='3' />
			</values>
			<events >
				<event class='Components' event='Initialise' target='Ev_Initialise' />
				<event class='Components' event='Renamed' target='Ev_Renamed' />
				<event class='Components' event='Property' target='Ev_Property' />
				<event class='System' event='Timer' target='Ev_Timer' />
				<event class='Connection' event='ChipChange' target='Ev_ChipChange' />
			</events>
			<apis >
				<api name='TxSendMyIP' alt='TxSendMyIP_Sim' type='1' proto='1' />
				<api name='RxMatchMyIP' alt='RxMatchMyIP_Sim' type='1' proto='1' />
				<api name='RxMatch_4_Bytes' alt='RxMatch_4_Bytes_Sim' type='1' proto='1' />
				<api name='SetMyIP' alt='SetMyIP' type='1' proto='1' />
				<api name='TxSendString' alt='TxSendString_Sim' type='1' proto='1' />
				<api name='RxReadHeader' alt='RxReadHeader_Sim' type='1' proto='1' />
				<api name='RxSkipBytes' alt='RxSkipBytes_Sim' type='1' proto='1' />
				<api name='MIAC_Module_SetData' alt='MIAC_Module_SetData' type='4' proto='0' />
				<api name='CreateIPSocket' alt='CreateIPSocket_Sim' type='1' proto='1' />
				<api name='SetDestination' alt='SetDestination_Sim' type='1' proto='1' />
				<api name='MIAC_Module_GetData' alt='MIAC_Module_GetData' type='4' proto='0' />
				<api name='TxStart' alt='TxStart_Sim' type='1' proto='1' />
				<api name='RxReadArray' alt='RxReadArray_Sim' type='1' proto='1' />
				<api name='MIAC_Module_Message' alt='MIAC_Module_Message' type='4' proto='0' />
				<api name='RxReadByte' alt='RxReadByte_Sim' type='1' proto='1' />
				<api name='CreateUDPSocket' alt='CreateUDPSocket_Sim' type='1' proto='1' />
				<api name='RxMatch_6_Bytes' alt='RxMatch_6_Bytes_Sim' type='1' proto='1' />
				<api name='RxMatch_2_Bytes' alt='RxMatch_2_Bytes_Sim' type='1' proto='1' />
				<api name='TxEnd' alt='TxEnd_Sim' type='1' proto='1' />
				<api name='RxReadString' alt='RxReadString_Sim' type='1' proto='1' />
				<api name='CreateTCPSocket' alt='CreateTCPSocket_Sim' type='1' proto='1' />
				<api name='RxDataAvailable' alt='RxDataAvailable_Sim' type='1' proto='1' />
				<api name='MIAC_Module_PushData' alt='MIAC_Module_PushData' type='4' proto='0' />
				<api name='TxSendByte' alt='TxSendByte_Sim' type='1' proto='1' />
				<api name='TCPListen' alt='TCPListen_Sim' type='1' proto='1' />
				<api name='RxFlushData' alt='RxFlushData_Sim' type='1' proto='1' />
				<api name='TCPConnect' alt='TCPConnect_Sim' type='1' proto='1' />
				<api name='RxMatchMyMAC' alt='RxMatchMyMAC_Sim' type='1' proto='1' />
				<api name='RxDataSize' alt='RxDataSize_Sim' type='1' proto='1' />
				<api name='CreateMACSocket' alt='CreateMACSocket_Sim' type='1' proto='1' />
				<api name='TxSendMyMAC' alt='TxSendMyMAC_Sim' type='1' proto='1' />
				<api name='SetMACAddress' alt='SetMACAddress' type='1' proto='1' />
				<api name='SetSubnetMask' alt='SetSubnetMask' type='1' proto='1' />
				<api name='TxSendArray' alt='TxSendArray_Sim' type='1' proto='1' />
				<api name='TCPClose' alt='TCPClose_Sim' type='1' proto='1' />
				<api name='GetSocketStatus' alt='GetSocketStatus_Sim' type='1' proto='1' />
				<api name='Initialise' alt='InitialiseSim' type='1' proto='1' />
				<api name='SetGateway' alt='SetGateway' type='1' proto='1' />
			</apis>
			<variables >
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_CLOSE' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_IR' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_CLOSE' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='16' setinit='0x10' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_MFEN' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='128' setinit='0x80' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='DHCP_MSG' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='548' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_INIT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='19' setinit='0x13' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gHrdSize' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_SEND' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='32' setinit='0x20' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='DHCP_Timeout' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_TCP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Header' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='32' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_DPORT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='16' setinit='0x10' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gTxSize' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_IPRAW' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='3' setinit='0x03' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='false' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gRxSize' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_PORT1' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='5' setinit='5' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_PORT0' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='4' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SIPR3' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='18' setinit='0x12' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_RX_RD' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='40' setinit='0x28' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SIPR2' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='17' setinit='0x11' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='3' setinit='3' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_UDP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='34' setinit='0x22' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SIPR1' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='16' setinit='0x10' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Gateway' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='dns' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SIPR0' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='15' setinit='0x0F' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_ESTABLISHED' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='23' setinit='0x17' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_PORT' type='s16' description='Socket n Source Port' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='0x04' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_CLOSED' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Subnet' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Pvt_Channel' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0x0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_RX_RSR' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='38' setinit='0x26' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_LISTEN' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='0x02' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='My_IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='DHCP_State' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_UDP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='GAR3' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='4' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='GAR2' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='3' setinit='3' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_CONNECT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='0x04' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_PROTO' type='s16' description='Undocumented Protocol register (used with MACRAW)' isconst='1' isHidden='0' isinit='1' usrinit='20' setinit='0x14' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='GAR1' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_BCASTB' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='64' setinit='0x40' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_OPEN' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='GAR0' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_DISCON' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='8' setinit='0x08' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gRxPtr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SR_SOURCE_PORT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='4' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_DIPR3' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='15' setinit='0x0F' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='My_MAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='6' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_CR_RECV' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='64' setinit='0x40' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_DIPR2' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='14' setinit='0x0E' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_IPRAW' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='50' setinit='0x32' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_MR_MACRAW' type='s16' description='Only with channel 0' isconst='1' isHidden='0' isinit='1' usrinit='4' setinit='4' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_DIPR1' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='13' setinit='0x0D' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_DIPR0' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='12' setinit='0x0C' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SR_DEST_MAC' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='6' setinit='6' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_LISTEN' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='20' setinit='0x14' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_TX_WR' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='36' setinit='0x24' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MAC_BANK' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='true' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gTxPtr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Sn_SR_MACRAW' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='66' setinit='0x42' />
				</variable>
			</variables>
			<macros >
				<macro >
					<flowline name='InitialiseSim' description='Resets and initialises the Internet E-Block. It sets up the gateway address, subnet mask, device IP address and device MAC address as defined in the properties of the Flowcode component. This macro must be called before any other TCP_IP component macros ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='Initialise' >
									<return exp='.Return' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='Initialise' />
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_SetRegister' description='Set the bank address at the given Socket register area' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Socket' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetBank' >
							<argument exp='(.Socket &lt;&lt; 2)+1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ModeReset' description='If Reset is true all internal registers will be initialized' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Reset' type='u8' description='If true all internal registers will be initialized' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TEMP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Save BANK' >
							<exp exp='.TEMP = MAC_BANK' />
							<exp exp='MAC_BANK = 0' />
						</command>
						<command class_type='call' title='Init W5100 - Send Reset' macro='MAC_WriteByte' >
							<argument exp='0' />
							<argument exp='0x80' />
						</command>
						<command class_type='calculation' title='Restore BANK' >
							<exp exp='MAC_BANK = .TEMP' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendMyIP' description='This macro fills the specified channel&apos;s transmit buffer with 4 bytes of data representing this Internet E-Block&apos;s IP address as specified in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_IP[0]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_IP[1]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_IP[2]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_IP[3]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendString_Sim' description='This macro fills the specified channel&apos;s transmit buffer with data.  It can fill the buffer with a string of information.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='T8' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='Length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_l' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_h' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='offset' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_mem' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TxSendString' >
									<argument exp='.Channel' />
									<argument exp='.Data' />
									<argument exp='.Length' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxSendString' >
									<argument exp='.Channel' />
									<argument exp='.Data' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Timer' description='Called back on the panel command System.TimerStart' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='TimerID' type='u32' description='The identifier passed to the System.TimerStart panel command' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='temp_handle' type='h32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='TCP/IP icon ' macro='Component.Property.SetValue' >
							<argument exp='LibraryComponent1' />
							<argument exp='&quot;InputIcon::CommsType&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='sim' title='Comms Flashers' macro='Component.Property.SetValue' >
							<argument exp='LibraryComponent1' />
							<argument exp='&quot;ShowComms&quot;' />
							<argument exp='SimType' />
						</command>
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' component='cal_spi' macro='GetConsoleHandle' >
									<return exp='.temp_handle' />
								</command>
								<command class_type='sim' title='Simulation' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_2&quot;' />
									<argument exp='1' />
								</command>
								<command class_type='sim' title='Simulation' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_3&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='sim' title='SPI icon ' macro='Component.Property.SetValue' >
									<argument exp='LibraryComponent1' />
									<argument exp='&quot;OutputIcon::CommsType&quot;' />
									<argument exp='5' />
								</command>
								<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='SetConsoleHandle' >
									<argument exp='.temp_handle' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Simulation' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_2&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='sim' title='Simulation' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_3&quot;' />
									<argument exp='1' />
								</command>
								<command class_type='sim' title='No icon ' macro='Component.Property.SetValue' >
									<argument exp='LibraryComponent1' />
									<argument exp='&quot;OutputIcon::CommsType&quot;' />
									<argument exp='255' />
								</command>
								<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='SetConsoleHandle' >
									<argument exp='0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadHeader_Sim' description='A call to this macro will return a byte of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Idx' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxReadHeader' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Idx' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxReadHeader' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Idx' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_6_Bytes_Sim' description='This macro returns a non-zero value when the next 6 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 2 bytes and 4 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte3' type='u8' description='Specifies the value of the third byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte4' type='u8' description='Specifies the value of the fourth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte5' type='u8' description='Specifies the value of the fifth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte6' type='u8' description='Specifies the value of the sixth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxMatch_6_Bytes' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Byte1' />
									<argument exp='.Byte2' />
									<argument exp='.Byte3' />
									<argument exp='.Byte4' />
									<argument exp='.Byte5' />
									<argument exp='.Byte6' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxMatch_6_Bytes' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Byte1' />
									<argument exp='.Byte2' />
									<argument exp='.Byte3' />
									<argument exp='.Byte4' />
									<argument exp='.Byte5' />
									<argument exp='.Byte6' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatchMyIP' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as the Internet E-block&apos;s IP address.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_IP[0]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_IP[1]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_IP[2]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_IP[3]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxStart_Sim' description='This macro indicates the start of data transmission for the specified buffer.  In TCP mode, data transmission can only begin once the socket has become established.  In other modes, data transmission can occur as soon as the socket has been opened.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TxStart' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxStart' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCPClose_Sim' description='When an established TCP connection has finished transmission of data, either the local application (i.e. your code) or the remote application (i.e. the application at the other end of the connection) can initiate closure of the socket.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TCPClose' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TCPClose' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxDataAvailable_Sim' description='This macro is used to check whether or not data has been received by the Internet E-Block. A return value of zero indicated that no data has been received.  A positive return value indicates that data is available.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxDataAvailable' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxDataAvailable' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_4_Bytes' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 2 bytes and 6 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte3' type='u8' description='Specifies the value of the third byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte4' type='u8' description='Specifies the value of the fourth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte1' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte3' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Byte_Bounds' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Property_Name' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<local name='Value' type='s32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Value = 0' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.GetValue' >
							<return exp='.Value' />
							<argument exp='this' />
							<argument exp='.Property_Name' />
						</command>
						<command class_type='decision' title='Decision' exp='.Value &gt; 255' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' macro='Component.Property.SetValue' >
									<argument exp='this' />
									<argument exp='.Property_Name' />
									<argument exp='255' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_ReadWord' description='' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Address' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Data0' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='MIAC_SYSTEM' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='Comment' textarea='12,0,12,0' />
								<command class_type='call' title='Call Macro' disable='1' macro='MAC_ReadByte' >
									<return exp='.Data0' />
									<argument exp='.Address' />
								</command>
								<command class_type='call' title='Call Macro' disable='1' macro='MAC_ReadByte' >
									<return exp='.Return' />
									<argument exp='.Address  + 1' />
								</command>
								<command class_type='calculation' title='Calculation' disable='1' >
									<exp exp='.Return = .Return | (.Data0 &lt;&lt; 8)' />
								</command>
								<command class_type='comment' title='' comment='Comment' textarea='12,0,12,0' />
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Address &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Address' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_Message' >
									<argument exp='(ORDINAL &lt;&lt; 9) + 64' />
									<argument exp='804' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_GetData' >
									<return exp='.Data0' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_GetData' >
									<return exp='.Return' />
									<argument exp='1' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = .Return | (.Data0 &lt;&lt; 8)' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Enable_CS' />
								<command class_type='call' title='Write Address High' component='cal_spi' macro='Master_Byte' >
									<argument exp='(.Address &amp; 0xFF00) &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Write Address Low' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Address &amp; 0xFF' />
								</command>
								<command class_type='call' title='Write Command and Bank' component='cal_spi' macro='Master_Byte' >
									<argument exp='MAC_BANK' />
								</command>
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<return exp='.Data0' />
									<argument exp='0xAA' />
								</command>
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<return exp='.Return' />
									<argument exp='0xAA' />
								</command>
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Disable_CS' />
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = .Return | (.Data0 &lt;&lt; 8)' />
								</command>
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='SetMyIP' description='This macro sets up the Internet E-Block&apos;s own IP address.  In most circumstances, this macro will not be required as the IP address setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='My_IP[0] = .IP0' />
							<exp exp='My_IP[1] = .IP1' />
							<exp exp='My_IP[2] = .IP2' />
							<exp exp='My_IP[3] = .IP3' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_SetCommon' />
						<command class_type='call' title='Set IP Address' macro='MAC_WriteArray' >
							<argument exp='0x0F' />
							<argument exp='My_IP' />
							<argument exp='4' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendString' description='This macro fills the specified channel&apos;s transmit buffer with data.  It can fill the buffer with a string of information.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='T8*' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='Length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='call' title='Call Macro' macro='MAC_SetTxBuffer' >
							<argument exp='.Channel' />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='.idx &lt; .length' >
							<flowline >
								<command class_type='call' title='Add the data to the appropriate place' macro='MAC_WriteByte' >
									<argument exp='gTxPtr[.Channel]' />
									<argument exp='.Data[.idx]' />
								</command>
								<command class_type='calculation' title='Increment the pointer and wrap around' >
									<exp exp='gTxPtr[.Channel] = gTxPtr[.Channel] + 1' />
									<exp exp='gTxSize[.Channel] = gTxSize[.Channel] + 1' />
								</command>
								<command class_type='calculation' title='.idx = .idx + 1' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Initialise' description='Initialisation routine for the component once the component is linked to its parent' statediag='0' >
						<return name='Return' type='u32' description='Non-zero to prevent initialisation' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='temp_str' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<command class_type='sim' title='Trailing Edge' macro='Component.Property.SetValue' >
							<argument exp='cal_spi' />
							<argument exp='&quot;CKE&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='sim' title='Idle High' macro='Component.Property.SetValue' >
							<argument exp='cal_spi' />
							<argument exp='&quot;CKP&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='sim' title='Sample Point End' macro='Component.Property.SetValue' >
							<argument exp='cal_spi' />
							<argument exp='&quot;SMP&quot;' />
							<argument exp='1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetDestination_Sim' description='This is used in IP and UDP modes to set the destination of the intended data transfer.  The destination IP address needs to be set for both IP and UDP modes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP0' type='u8' description='Specifies the first byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP1' type='u8' description='Specifies the second byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP2' type='u8' description='Specifies the third byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP3' type='u8' description='Specifies the fourth byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_Port' type='u16' description='Destination Port' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='SetDestination' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Dst_IP0' />
									<argument exp='.Dst_IP1' />
									<argument exp='.Dst_IP2' />
									<argument exp='.Dst_IP3' />
									<argument exp='.Dst_Port' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='SetDestination' >
									<argument exp='.Channel' />
									<argument exp='.Dst_IP0' />
									<argument exp='.Dst_IP1' />
									<argument exp='.Dst_IP2' />
									<argument exp='.Dst_IP3' />
									<argument exp='.Dst_Port &gt;&gt; 8' />
									<argument exp='.Dst_Port' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendMyMAC_Sim' description='This macro fills the specified channel&apos;s transmit buffer with 6 bytes of data representing this Internet E-Block&apos;s MAC address as specified in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TxSendMyMAC' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxSendMyMAC' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxSkipBytes_Sim' description='Often when receiving data packets, it may be necessary to ignore large sections of the data.  This can be achieved by reading each byte individually (and ignoring the returned data), but a better way is to use this Rx_skipbytes macro.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Count' type='u8' description='Specifies how many bytes to skip' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxSkipBytes' >
									<argument exp='.Channel' />
									<argument exp='.Count' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxSkipBytes' >
									<argument exp='.Channel' />
									<argument exp='.Count' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_WriteArray' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1000' />
						</param>
						<param name='Count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='Write Address High' component='cal_spi' macro='Master_Byte' >
							<argument exp='(.Address &amp; 0xFF00) &gt;&gt; 8' />
						</command>
						<command class_type='call' title='Write Address Low' component='cal_spi' macro='Master_Byte' >
							<argument exp='.Address &amp; 0xFF' />
						</command>
						<command class_type='call' title='Write Command and Bank' component='cal_spi' macro='Master_Byte' >
							<argument exp='MAC_BANK | 0x04' />
						</command>
						<command class_type='loop' title='Loop' type='2' forvar='.idx' exp='.Count' >
							<flowline >
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Data[.idx]' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Disable_CS' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_ChipChange' description='Sent when the target device has changed' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Target' type='T8' description='The name of the new target device' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<command class_type='call' title='Call Macro' macro='Ev_Property' />
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateIPSocket_Sim' description='Note that sockets on up to 4 channels can be simultaneously opened and these channels are numbered 0 to 3.  Note that sockets with different modes can be opened on different channels.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Protocol' type='u8' description='Specifies which IP protocol to use' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Broadcast' type='u8' description='Allows broadcast type packets to be sent and received' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='CreateIPSocket' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Protocol' />
									<argument exp='.Broadcast' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='CreateIPSocket' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Protocol' />
									<argument exp='.Broadcast' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadHeader' description='Once data in a particular channel has been received, the header will be filled with information about the received data.  This macro will return the information in the header.  The idx parameter specifies which byte of information in the header to read ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Idx' type='u8' description='Specifies the byte index to return' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = Header[(.Channel * 8) + .Idx]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendMyIP_Sim' description='This macro fills the specified channel&apos;s transmit buffer with 4 bytes of data representing this Internet E-Block&apos;s IP address as specified in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TxSendMyIP' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxSendMyIP' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxSkipBytes' description='Often when receiving data packets, it may be necessary to ignore large sections of the data.  This can be achieved by reading each byte individually (and ignoring the returned data), but a better way is to use this Rx_skipbytes macro.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Count' type='u8' description='Specifies how many bytes to skip' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='gRxPtr[.Channel] = (gRxPtr[.Channel] + .Count)' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MIAC_Module_SetData' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Count' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='D0' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='D1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='D2' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='D3' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='D4' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='D5' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_ReadArray' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1000' />
						</param>
						<param name='Count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ret' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='Write Address High' component='cal_spi' macro='Master_Byte' >
							<argument exp='(.Address &amp; 0xFF00) &gt;&gt; 8' />
						</command>
						<command class_type='call' title='Write Address Low' component='cal_spi' macro='Master_Byte' >
							<argument exp='.Address &amp; 0xFF' />
						</command>
						<command class_type='call' title='Write Command and Bank' component='cal_spi' macro='Master_Byte' >
							<argument exp='MAC_BANK' />
						</command>
						<command class_type='loop' title='Loop' type='2' forvar='.Idx' exp='.Count' >
							<flowline >
								<command class_type='call' title='Read Data' component='cal_spi' macro='Master_Byte' >
									<return exp='.Data[.Idx]' />
									<argument exp='0xAA' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Disable_CS' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadArray_Sim' description='A call to this macro will return a byte of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1000' />
						</param>
						<param name='Count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='loop' title='Loop' type='2' forvar='.Idx' exp='.Count' >
							<flowline >
								<command class_type='decision' title='Decision' exp='SimType' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='RxReadByte' >
											<return exp='.Data[.Idx]' />
											<argument exp='.Channel' />
										</command>
									</flowline>
									<flowline >
										<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxReadByte' >
											<return exp='.Data[.Idx]' />
											<argument exp='.Channel' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateIPSocket' description='Note that sockets on up to 4 channels can be simultaneously opened and these channels are numbered 0 to 3.  Note that sockets with different modes can be opened on different channels.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Protocol' type='u8' description='Specifies which IP protocol to use' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Broadcast' type='u8' description='Allows broadcast type packets to be sent and received' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Regval' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='ModePingBlock' >
							<argument exp='1' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
							<return exp='.Regval' />
							<argument exp='Sn_SR' />
						</command>
						<command class_type='decision' title='Check if socket is closed' exp='.Regval != Sn_SR_CLOSED' swap='0' >
							<flowline >
								<command class_type='call' title='Close Socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_CLOSE' />
								</command>
								<command class_type='loop' title='Wait for socket to close' type='0' exp='.Regval != Sn_SR_CLOSED' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_SR' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='.Regval = Sn_SR_CLOSED' start='0' >
							<flowline >
								<command class_type='comment' title='' comment='Sn_MR = 3 is not supported on W5500
Some info suggests MACRAW is used ' textarea='12,0,12,0' />
								<command class_type='call' title='Setup socket protocol and option flags' macro='MAC_WriteByte' >
									<argument exp='Sn_MR' />
									<argument exp='Sn_MR_IPRAW | Sn_MR_MFEN | Sn_MR_BCASTB' />
								</command>
								<command class_type='call' title='Setup socket protocol and option flags' macro='MAC_WriteByte' >
									<argument exp='Sn_PROTO' />
									<argument exp='.Protocol' />
								</command>
								<command class_type='call' title='Initialise the socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_OPEN' />
								</command>
								<command class_type='loop' title='Wait until command accepted' type='0' exp='.Regval' start='0' >
									<flowline >
										<command class_type='call' title='Read socket status' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='' macro='MAC_ReadByte' >
									<return exp='.Regval' />
									<argument exp='Sn_SR' />
								</command>
								<command class_type='delay' title='Delay' exp='1' type='1' />
							</flowline>
						</command>
						<command class_type='calculation' title='Reset Globals' >
							<exp exp='Header[0] = 0' />
							<exp exp='Header[1] = 0' />
							<exp exp='Header[2] = 0' />
							<exp exp='Header[3] = 0' />
							<exp exp='Header[4] = 0' />
							<exp exp='Header[5] = 0' />
							<exp exp='Header[6] = 0' />
							<exp exp='Header[7] = 0' />
						</command>
						<command class_type='calculation' title='Opened socket correctly' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetDestination' description='This is used in IP and UDP modes to set the destination of the intended data transfer.  The destination IP address needs to be set for both IP and UDP modes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP0' type='u8' description='Specifies the first byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP1' type='u8' description='Specifies the second byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP2' type='u8' description='Specifies the third byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP3' type='u8' description='Specifies the fourth byte of an IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_Port' type='u16' description='Destination Port' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='.Channel &gt;= 4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
									<argument exp='.Channel' />
								</command>
								<command class_type='call' title='Set IP' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR0' />
									<argument exp='.Dst_IP0' />
								</command>
								<command class_type='call' title='Call Macro' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR1' />
									<argument exp='.Dst_IP1' />
								</command>
								<command class_type='call' title='Call Macro' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR2' />
									<argument exp='.Dst_IP2' />
								</command>
								<command class_type='call' title='Call Macro' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR3' />
									<argument exp='.Dst_IP3' />
								</command>
								<command class_type='call' title='Set Port' macro='MAC_WriteWord' >
									<argument exp='Sn_DPORT' />
									<argument exp='.Dst_Port' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateTCPSocket_Sim' description='This macro creates a socket for sending and receiving TCP data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Src_Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='CreateTCPSocket' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Src_Port' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='CreateTCPSocket' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Src_Port &gt;&gt; 8' />
									<argument exp='.Src_Port' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetSocketStatus_Sim' description='This returns the state of the requested channel&apos;s socket.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='GetSocketStatus' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='GetSocketStatus' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxEnd_Sim' description='Once the transmit buffer has been filled with data, call this macro to actually send the data.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TxEnd' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxEnd' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadString_Sim' description='A call to this macro will return a string of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;\x00&quot;' setinit='' >
							<array size='2000' />
						</return>
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_mem' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxReadString' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Length' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxReadString' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Length' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_SetBank' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Bank' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='MAC_BANK = .Bank &lt;&lt; 3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatchMyIP_Sim' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as the Internet E-block&apos;s IP address.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxMatchMyIP' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxMatchMyIP' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MIAC_Module_GetData' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Index' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
					</flowline>
				</macro>
				<macro >
					<flowline name='TxStart' description='This macro indicates the start of data transmission for the specified buffer.  In TCP mode, data transmission can only begin once the socket has become established.  In other modes, data transmission can occur as soon as the socket has been opened.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_ptr_val' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadWord' >
							<return exp='.tx_ptr_val' />
							<argument exp='Sn_TX_WR' />
						</command>
						<command class_type='calculation' title='Calculation' >
							<exp exp='gTxPtr[.Channel] = (.tx_ptr_val)' />
						</command>
						<command class_type='calculation' title='Calculation' >
							<exp exp='gTxSize[.Channel] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_SetTxBuffer' description='Set the bank address at the given Socket transmit buffer area' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Socket' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetBank' >
							<argument exp='(.Socket &lt;&lt; 2) + 2' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadArray' description='A call to this macro will return a byte of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1000' />
						</param>
						<param name='Count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRxBuffer' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='User Macro' macro='MAC_ReadArray' >
							<argument exp='gRxPtr[.Channel]' />
							<argument exp='.Data' />
							<argument exp='.Count' />
						</command>
						<command class_type='calculation' title='Calculation' >
							<exp exp='gRxPtr[.Channel] = gRxPtr[.Channel] + .Count' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateMACSocket_Sim' description='This macro creates a socket for sending and receiving Ethernet data using raw data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Promiscuous' type='u8' description='Receive everything (1) or just data bound for your MAC (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Broadcast' type='u8' description='Allows broadcast messages to be accepted (1) or rejected (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Error' type='u8' description='Allowsmessages with errors to be accepted (1) or rejected (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='CreateMACSocket' >
									<return exp='.Return' />
									<argument exp='.Promiscuous' />
									<argument exp='.Broadcast' />
									<argument exp='.Error' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='CreateMACSocket' >
									<return exp='.Return' />
									<argument exp='.Promiscuous' />
									<argument exp='.Broadcast' />
									<argument exp='.Error' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCPListen_Sim' description='This macro puts a previously opened TCP channel in &quot;passive open&quot; mode.  This is the required mode when writing a TCP server application (e.g. a web server to display HTML web pages).' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TCPListen' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TCPListen' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MIAC_Module_Message' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='CAN_ID' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='CMD_ID' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadByte' description='A call to this macro will return a byte of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRxBuffer' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
							<return exp='.Return' />
							<argument exp='gRxPtr[.Channel]' />
						</command>
						<command class_type='calculation' title='Calculation' >
							<exp exp='gRxPtr[.Channel] = gRxPtr[.Channel] + 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateUDPSocket' description='This macro creates a socket for sending and receiving UDP data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Src_Port' type='u16' description='Port Number' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Regval' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Timeout' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
							<return exp='.Regval' />
							<argument exp='Sn_SR' />
						</command>
						<command class_type='decision' title='Check if socket is closed' exp='.Regval != Sn_SR_CLOSED' swap='0' >
							<flowline >
								<command class_type='call' title='Close Socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_CLOSE' />
								</command>
								<command class_type='loop' title='Wait for socket to close' type='0' exp='.Regval != Sn_SR_CLOSED' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_SR' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Timeout = 500' />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='(.Regval != Sn_SR_UDP) &amp;&amp; (.Timeout)' start='0' >
							<flowline >
								<command class_type='call' title='Setup socket protocol and option flags' macro='MAC_WriteByte' >
									<argument exp='Sn_MR' />
									<argument exp='Sn_MR_UDP' />
								</command>
								<command class_type='call' title='Setup the Source Port' macro='MAC_WriteWord' >
									<argument exp='Sn_PORT' />
									<argument exp='.Src_Port' />
								</command>
								<command class_type='call' title='Initialise the socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_OPEN' />
								</command>
								<command class_type='loop' title='Wait until clear' type='0' exp='.Regval' start='0' >
									<flowline >
										<command class_type='call' title='Read socket status' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
								<command class_type='comment' title='' comment='Command accepted
Now wait until confirmation of socket opened in UDP mode' textarea='12,0,12,0' />
								<command class_type='delay' title='Delay' exp='1' type='1' />
								<command class_type='call' title='' macro='MAC_ReadByte' >
									<return exp='.Regval' />
									<argument exp='Sn_SR' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Timeout = .Timeout - 1' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' exp='.Timeout' swap='0' >
							<flowline >
								<command class_type='calculation' title='Opened socket correctly' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_Parse' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='len' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='p' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='e' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='opt_len' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.return = 0' />
						</command>
						<command class_type='decision' title='Decision' exp='DHCP' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' macro='RxDataSize' >
									<return exp='.len' />
									<argument exp='0' />
								</command>
								<command class_type='decision' title='Decision' exp='.len &gt; 240' swap='0' >
									<flowline >
										<command class_type='call' title='User Macro' macro='RxReadArray' >
											<argument exp='0' />
											<argument exp='DHCP_MSG' />
											<argument exp='.len' />
										</command>
										<command class_type='calculation' title='Calculation' >
											<exp exp='.p = 240' />
											<exp exp='.e = .p + (.len - 240)' />
										</command>
										<command class_type='loop' title='Loop' type='0' exp='.p &lt; .e' >
											<flowline >
												<command class_type='switch' title='Switch' textarea='36,25,36,25' exp='DHCP_MSG[.p]' >
													<case >
														<flowline >
															<command class_type='calculation' title='Calculation' >
																<exp exp='.p = .p + 1' />
																<exp exp='.opt_len = DHCP_MSG[.p]' />
																<exp exp='.p = .p + .opt_len + 1' />
															</command>
														</flowline>
													</case>
													<case exp='255' >
														<flowline >
															<command class_type='comment' title='' comment='endOption' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='.p = .e' />
															</command>
														</flowline>
													</case>
													<case exp='0' >
														<flowline >
															<command class_type='comment' title='' comment='padOption' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='.p = .p + 1' />
															</command>
														</flowline>
													</case>
													<case exp='53' >
														<flowline >
															<command class_type='comment' title='' comment='dhcpMessageType' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='.Return = DHCP_MSG[.p + 2]' />
																<exp exp='.p = .p + 3' />
															</command>
														</flowline>
													</case>
													<case exp='1' >
														<flowline >
															<command class_type='comment' title='' comment='subnetMask' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='Subnet[0] = DHCP_MSG[.p + 2]' />
																<exp exp='Subnet[1] = DHCP_MSG[.p + 3]' />
																<exp exp='Subnet[2] = DHCP_MSG[.p + 4]' />
																<exp exp='Subnet[3] = DHCP_MSG[.p + 5]' />
																<exp exp='.p = .p + 6' />
															</command>
														</flowline>
													</case>
													<case exp='3' >
														<flowline >
															<command class_type='comment' title='' comment='routersOnSubnet' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='.opt_len = DHCP_MSG[.p + 1]' />
																<exp exp='Gateway[0] = DHCP_MSG[.p + 2]' />
																<exp exp='Gateway[1] = DHCP_MSG[.p + 3]' />
																<exp exp='Gateway[2] = DHCP_MSG[.p + 4]' />
																<exp exp='Gateway[3] = DHCP_MSG[.p + 5]' />
																<exp exp='.p = .p + .opt_len + 1' />
															</command>
														</flowline>
													</case>
													<case exp='6' >
														<flowline >
															<command class_type='comment' title='' comment='dns' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='.opt_len = DHCP_MSG[.p + 1]' />
																<exp exp='dns[0] = DHCP_MSG[.p + 2]' />
																<exp exp='dns[1] = DHCP_MSG[.p + 3]' />
																<exp exp='dns[2] = DHCP_MSG[.p + 4]' />
																<exp exp='dns[3] = DHCP_MSG[.p + 5]' />
																<exp exp='.p = .p + .opt_len + 1' />
															</command>
														</flowline>
													</case>
													<case exp='51' >
														<flowline >
															<command class_type='comment' title='' comment='dhcpIPaddrLeaseTime' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='.opt_len = DHCP_MSG[.p + 1]' />
																<exp exp='.p = .p + .opt_len + 1' />
															</command>
														</flowline>
													</case>
													<case exp='54' >
														<flowline >
															<command class_type='comment' title='' comment='dhcpServerIdentifier' textarea='12,0,12,0' />
															<command class_type='calculation' title='Calculation' >
																<exp exp='My_IP[0] = DHCP_MSG[.p + 2]' />
																<exp exp='My_IP[1] = DHCP_MSG[.p + 3]' />
																<exp exp='My_IP[2] = DHCP_MSG[.p + 4]' />
																<exp exp='My_IP[3] = DHCP_MSG[.p + 5]' />
																<exp exp='.p = .p + 6' />
															</command>
														</flowline>
													</case>
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_6_Bytes' description='This macro returns a non-zero value when the next 6 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 2 bytes and 4 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte3' type='u8' description='Specifies the value of the third byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte4' type='u8' description='Specifies the value of the fourth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte5' type='u8' description='Specifies the value of the fifth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte6' type='u8' description='Specifies the value of the sixth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte1' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte3' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte5' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte6' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Property' description='Sent when a property has been changed by the User' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tempstr' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<local name='temp_handle' type='h32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='Trailing Edge' macro='Component.Property.SetValue' >
							<argument exp='cal_spi' />
							<argument exp='&quot;CKE&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='sim' title='Idle High' macro='Component.Property.SetValue' >
							<argument exp='cal_spi' />
							<argument exp='&quot;CKP&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='sim' title='Sample Point End' macro='Component.Property.SetValue' >
							<argument exp='cal_spi' />
							<argument exp='&quot;SMP&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='comment' title='' comment='Set Bounds' textarea='12,0,12,0' />
						<command class_type='sim' title='Built-in Function' macro='System.TimerStart' >
							<argument exp='0' />
							<argument exp='200' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;gateway0&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;gateway1&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;gateway2&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;gateway3&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;subnet0&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;subnet1&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;subnet2&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;subnet3&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;ip0&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;ip1&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;ip2&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;ip3&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;mac0&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;mac1&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;mac2&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;mac3&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;mac4&quot;' />
						</command>
						<command class_type='call' title='Call Macro' macro='Ev_Byte_Bounds' >
							<argument exp='&quot;mac5&quot;' />
						</command>
						<command class_type='comment' title='' comment='Copy to Sim component
' textarea='76,21,76,21' />
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;gateway0&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;gateway1&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;gateway2&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;gateway3&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;subnet0&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;subnet1&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;subnet2&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;subnet3&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;ip0&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;ip1&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;ip2&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;ip3&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;mac0&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;mac1&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;mac2&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;mac3&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;mac4&quot;' />
						</command>
						<command class_type='sim' title='Simulation' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='TCP_Base' />
							<argument exp='&quot;mac5&quot;' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_WriteByte' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='MIAC_SYSTEM' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Address &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Address' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Data' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_Message' >
									<argument exp='(ORDINAL &lt;&lt; 9) + 64' />
									<argument exp='801' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Enable_CS' />
								<command class_type='call' title='Write Address High' component='cal_spi' macro='Master_Byte' >
									<argument exp='(.Address &amp; 0xFF00) &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Write Address Low' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Address &amp; 0xFF' />
								</command>
								<command class_type='call' title='Write Command and Bank' component='cal_spi' macro='Master_Byte' >
									<argument exp='MAC_BANK + 4' />
								</command>
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Data' />
								</command>
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Disable_CS' />
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='ModeForceARP' description='ForceARP true forces sending ARP Request whenever data is sent' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='ForceARP' type='u8' description='ForceARP true forces sending ARP Request whenever data is sent' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='MR' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TEMP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Save BANK' >
							<exp exp='.TEMP = MAC_BANK' />
							<exp exp='MAC_BANK = 0' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
							<return exp='.MR' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Decision' exp='.ForceARP' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.MR = .MR | 2' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.MR = .MR &amp; 0xFD' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='' macro='MAC_WriteByte' >
							<argument exp='0' />
							<argument exp='.MR' />
						</command>
						<command class_type='calculation' title='Restore BANK' >
							<exp exp='MAC_BANK = .TEMP' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_Discover' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='decision' title='Decision' exp='DHCP' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' macro='DHCP_MakeMessage' />
								<command class_type='calculation' title='dhcpMessageType - DISCOVER' >
									<exp exp='DHCP_MSG[240] = 53' />
									<exp exp='DHCP_MSG[241] = 1' />
									<exp exp='DHCP_MSG[242] = 1' />
								</command>
								<command class_type='calculation' title='Client Identifier' >
									<exp exp='DHCP_MSG[243] = 61' />
									<exp exp='DHCP_MSG[244] = 7' />
									<exp exp='DHCP_MSG[245] = 1' />
									<exp exp='DHCP_MSG[246] = My_MAC[0]' />
									<exp exp='DHCP_MSG[247] = My_MAC[1]' />
									<exp exp='DHCP_MSG[248] = My_MAC[2]' />
									<exp exp='DHCP_MSG[249] = My_MAC[3]' />
									<exp exp='DHCP_MSG[250] = My_MAC[4]' />
									<exp exp='DHCP_MSG[251] = My_MAC[5]' />
								</command>
								<command class_type='calculation' title='HostName' >
									<exp exp='DHCP_MSG[252] = 12' />
									<exp exp='DHCP_MSG[253] = 9' />
									<exp exp='DHCP_MSG[254] = &apos;W&apos;' />
									<exp exp='DHCP_MSG[255] = &apos;I&apos;' />
									<exp exp='DHCP_MSG[256] = &apos;Z&apos;' />
									<exp exp='DHCP_MSG[257] = &apos;n&apos;' />
									<exp exp='DHCP_MSG[258] = &apos;e&apos;' />
									<exp exp='DHCP_MSG[259] = &apos;t&apos;' />
									<exp exp='DHCP_MSG[260] = My_MAC[3]' />
									<exp exp='DHCP_MSG[261] = My_MAC[4]' />
									<exp exp='DHCP_MSG[262] = My_MAC[5]' />
								</command>
								<command class_type='calculation' title='Options' >
									<exp exp='DHCP_MSG[263] = 55' />
									<exp exp='DHCP_MSG[264] = 6' />
									<exp exp='DHCP_MSG[265] = 1' />
									<exp exp='DHCP_MSG[266] = 3' />
									<exp exp='DHCP_MSG[267] = 6' />
									<exp exp='DHCP_MSG[268] = 15' />
									<exp exp='DHCP_MSG[269] = 58' />
									<exp exp='DHCP_MSG[270] = 59' />
									<exp exp='DHCP_MSG[271] = 255' />
								</command>
								<command class_type='call' title='Setup broadcast packet' macro='SetDestination' >
									<argument exp='0' />
									<argument exp='255' />
									<argument exp='255' />
									<argument exp='255' />
									<argument exp='255' />
									<argument exp='67' />
								</command>
								<command class_type='call' title='User Macro' macro='TxStart' >
									<argument exp='0' />
								</command>
								<command class_type='call' title='endOption' macro='TxSendArray' >
									<argument exp='0' />
									<argument exp='DHCP_MSG' />
									<argument exp='272' />
								</command>
								<command class_type='call' title='User Macro' macro='TxEnd' >
									<argument exp='0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCPConnect_Sim' description='This macro puts a previously opened TCP channel in &quot;active open&quot; mode.  This is the required mode when writing a TCP client application (e.g. using SMTP to send an email).' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TCPConnect' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Dst_IP0' />
									<argument exp='.Dst_IP1' />
									<argument exp='.Dst_IP2' />
									<argument exp='.Dst_IP3' />
									<argument exp='.Dst_Port' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TCPConnect' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Dst_IP0' />
									<argument exp='.Dst_IP1' />
									<argument exp='.Dst_IP2' />
									<argument exp='.Dst_IP3' />
									<argument exp='.Dst_Port &gt;&gt; 8' />
									<argument exp='.Dst_Port' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_2_Bytes' description='This macro returns a non-zero value when the next 2 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 4 bytes and 6 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte1' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != .byte2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxEnd' description='Once the transmit buffer has been filled with data, call this macro to actually send the data.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_ptr_cur' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='temp' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Current Pointer' macro='MAC_ReadWord' >
							<return exp='.tx_ptr_cur' />
							<argument exp='Sn_TX_WR' />
						</command>
						<command class_type='calculation' title='Add buffered size' >
							<exp exp='.tx_ptr_cur = (.tx_ptr_cur + gTxSize[.Channel])' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_WriteWord' >
							<argument exp='Sn_TX_WR' />
							<argument exp='.tx_ptr_cur' />
						</command>
						<command class_type='call' title='Now transmit the send command' macro='MAC_WriteByte' >
							<argument exp='Sn_CR' />
							<argument exp='Sn_CR_SEND' />
						</command>
						<command class_type='calculation' title='Calculation' >
							<exp exp='.temp = 1' />
						</command>
						<command class_type='loop' title='Wait for sendng process to complete' type='0' exp='.temp' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
									<return exp='.temp' />
									<argument exp='Sn_CR' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Reset Sent size' >
							<exp exp='gTxSize[.Channel] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadString' description='A call to this macro will return a string of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;\x00&quot;' setinit='' >
							<array size='2000' />
						</return>
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRxBuffer' >
							<argument exp='.Channel' />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='.idx &lt; .length' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
									<return exp='.Return[.idx]' />
									<argument exp='gRxPtr[.Channel]' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='gRxPtr[.Channel] = gRxPtr[.Channel] + 1' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateTCPSocket' description='This macro creates a socket for sending and receiving TCP data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Src_Port' type='u16' description='Port Number' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Regval' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
							<return exp='.Regval' />
							<argument exp='Sn_SR' />
						</command>
						<command class_type='decision' title='Check if socket is closed' exp='.Regval != Sn_SR_CLOSED' swap='0' >
							<flowline >
								<command class_type='call' title='Close Socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_CLOSE' />
								</command>
								<command class_type='loop' title='Wait for socket to close' type='0' exp='.Regval != Sn_SR_CLOSED' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_SR' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='.Regval != Sn_SR_INIT' start='0' >
							<flowline >
								<command class_type='call' title='Setup socket protocol and option flags' macro='MAC_WriteByte' >
									<argument exp='Sn_MR' />
									<argument exp='Sn_MR_TCP' />
								</command>
								<command class_type='call' title='Set the Source Port' macro='MAC_WriteWord' >
									<argument exp='Sn_PORT' />
									<argument exp='.Src_Port' />
								</command>
								<command class_type='call' title='Initialise the socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_OPEN' />
								</command>
								<command class_type='loop' title='Wait until clear' type='0' exp='.Regval' start='0' >
									<flowline >
										<command class_type='call' title='Read socket status' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='' macro='MAC_ReadByte' >
									<return exp='.Regval' />
									<argument exp='Sn_SR' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Opened socket correctly' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxDataAvailable' description='This macro is used to check whether or not data has been received by the Internet E-Block. A return value of zero indicated that no data has been received.  A positive return value indicates that data is available.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ssr' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_rsr_val' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='offset' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_rsr_val2' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Get the size of received data' macro='MAC_ReadWord' >
							<return exp='.rx_rsr_val' />
							<argument exp='Sn_RX_RSR' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_rsr_val' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
									<return exp='.ssr' />
									<argument exp='Sn_SR' />
								</command>
								<command class_type='switch' title='Switch' textarea='36,25,36,25' exp='.ssr' >
									<case >
										<flowline >
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='calculation' title='TCP' >
												<exp exp='gHrdSize[.Channel] = 0' />
											</command>
										</flowline>
									</case>
									<case exp='0x22' >
										<flowline >
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='calculation' title='UDP' >
												<exp exp='gHrdSize[.Channel] = 8' />
											</command>
										</flowline>
									</case>
									<case exp='0x32' >
										<flowline >
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='calculation' title='IP' >
												<exp exp='gHrdSize[.Channel] = 6' />
											</command>
										</flowline>
									</case>
									<case exp='0x42' >
										<flowline >
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='block' title='' hide='1' start='1' />
											<command class_type='block' title='' hide='1' start='0' />
											<command class_type='calculation' title='MAC' >
												<exp exp='gHrdSize[.Channel] = 2' />
											</command>
										</flowline>
									</case>
								</command>
								<command class_type='decision' title='Decision' exp='.rx_rsr_val &gt;= gHrdSize[.Channel]' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' exp='gHrdSize[.Channel] &gt; 0' swap='0' >
											<flowline >
												<command class_type='call' title='Call Macro' macro='MAC_ReadWord' >
													<return exp='.offset' />
													<argument exp='Sn_RX_RD' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='.offset = .offset &amp; 0x07FF' />
												</command>
												<command class_type='comment' title='' comment='might need to add an offset into bank???' textarea='12,0,12,0' />
												<command class_type='calculation' title='Calculation' >
													<exp exp='gRxPtr[.Channel] = .offset' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='.idx = 0' />
												</command>
												<command class_type='call' title='Call Macro' macro='MAC_SetRxBuffer' >
													<argument exp='.Channel' />
												</command>
												<command class_type='loop' title='Loop' type='0' exp='.idx &lt; gHrdSize[.Channel]' >
													<flowline >
														<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
															<return exp='Header[(.Channel * 8) + .idx]' />
															<argument exp='gRxPtr[.Channel]' />
														</command>
														<command class_type='calculation' title='Calculation' >
															<exp exp='.idx = .idx + 1' />
															<exp exp='gRxPtr[.Channel] = gRxPtr[.Channel] + 1' />
														</command>
													</flowline>
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='gRxSize[.Channel] = Header[(.Channel * 8) + gHrdSize[.Channel] - 2]' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='gRxSize[.Channel] = gRxSize[.Channel] &lt;&lt; 8' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='gRxSize[.Channel] = gRxSize[.Channel] | Header[(.Channel * 8) + gHrdSize[.Channel] - 1]' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='.idx = 7' />
												</command>
												<command class_type='loop' title='Loop' type='0' exp='.idx &gt; 1' >
													<flowline >
														<command class_type='calculation' title='Calculation' >
															<exp exp='Header[(.Channel * 8) + .idx] = Header[(.Channel * 8) + .idx - 2]' />
														</command>
														<command class_type='calculation' title='Calculation' >
															<exp exp='.idx = .idx - 1' />
														</command>
													</flowline>
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='Header[(.Channel * 8) + 1] = gRxSize[.Channel] &amp; 0xFF' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='Header[(.Channel * 8)] = (gRxSize[.Channel] &amp; 0xFF00) &gt;&gt; 8' />
												</command>
											</flowline>
											<flowline >
												<command class_type='call' title='Call Macro' macro='MAC_ReadWord' >
													<return exp='.offset' />
													<argument exp='Sn_RX_RD' />
												</command>
												<command class_type='comment' title='' comment='might need to add an offset into bank???' textarea='12,0,12,0' />
												<command class_type='calculation' title='Calculation' >
													<exp exp='gRxPtr[.Channel] = .offset' />
												</command>
												<command class_type='calculation' title='Write the data size to the storage' >
													<exp exp='gRxSize[.Channel] = .rx_rsr_val' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='.idx = 7' />
												</command>
												<command class_type='loop' title='Loop' type='0' exp='.idx &gt; 1' >
													<flowline >
														<command class_type='calculation' title='Calculation' >
															<exp exp='Header[(.Channel * 8) + .idx] = 0' />
														</command>
														<command class_type='calculation' title='Calculation' >
															<exp exp='.idx = .idx - 1' />
														</command>
													</flowline>
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='Header[(.Channel * 8) + 1] = gRxSize[.Channel] &amp; 0xFF' />
												</command>
												<command class_type='calculation' title='Calculation' >
													<exp exp='Header[(.Channel * 8)] = (gRxSize[.Channel] &amp; 0xFF00) &gt;&gt; 8' />
												</command>
											</flowline>
										</command>
										<command class_type='decision' title='Decision' exp='gRxSize[.Channel] &gt;= 255' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' >
													<exp exp='.Return = 255' />
												</command>
											</flowline>
											<flowline >
												<command class_type='calculation' title='Calculation' >
													<exp exp='.Return = gRxSize[.Channel]' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MIAC_Module_PushData' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Renamed' description='' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Name' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<command class_type='sim' title='' macro='Tree.GetName' >
							<return exp='.Name' />
							<argument exp='this' />
						</command>
						<command class_type='sim' title='' macro='Component.Property.SetValue' >
							<argument exp='LibraryComponent1' />
							<argument exp='&quot;Name&quot;' />
							<argument exp='.Name' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendByte' description='This macro fills the specified channel&apos;s transmit buffer with data.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetTxBuffer' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Add the data to the appropriate place' macro='MAC_WriteByte' >
							<argument exp='gTxPtr[.Channel]' />
							<argument exp='.Data' />
						</command>
						<command class_type='calculation' title='Increment the pointer and wrap around' >
							<exp exp='gTxPtr[.Channel] = gTxPtr[.Channel] + 1' />
							<exp exp='gTxSize[.Channel] = gTxSize[.Channel] + 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCPListen' description='This macro puts a previously opened TCP channel in &quot;passive open&quot; mode.  This is the required mode when writing a TCP server application (e.g. a web server to display HTML web pages).' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='.Channel &gt;= 4' swap='0' >
							<flowline />
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
									<argument exp='.Channel' />
								</command>
								<command class_type='call' title='Set Listen Flag' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_LISTEN' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendByte_Sim' description='This macro fills the specified channel&apos;s transmit buffer with data.  It can fill the buffer with a single byte of data, or with a string of information.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='TxSendByte' >
									<argument exp='.Channel' />
									<argument exp='.Data' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxSendByte' >
									<argument exp='.Channel' />
									<argument exp='.Data' />
								</command>
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_ReadByte' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Address' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ret' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='MIAC_SYSTEM' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Address &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_PushData' >
									<argument exp='.Address' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_Message' >
									<return exp='.ret' />
									<argument exp='(ORDINAL &lt;&lt; 9) + 64' />
									<argument exp='802' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_GetData' >
									<return exp='.Return' />
									<argument exp='0' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Enable_CS' />
								<command class_type='call' title='Write Address High' component='cal_spi' macro='Master_Byte' >
									<argument exp='(.Address &amp; 0xFF00) &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Write Address Low' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Address &amp; 0xFF' />
								</command>
								<command class_type='call' title='Write Command and Bank' component='cal_spi' macro='Master_Byte' >
									<argument exp='MAC_BANK' />
								</command>
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<return exp='.Return' />
									<argument exp='0xAA' />
								</command>
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Disable_CS' />
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxFlushData' description='Once data reception has been completed, this macro should be called to discard the data packet and allow other data packets to be read.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_sz' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_ptr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Get the received size' macro='MAC_ReadWord' >
							<return exp='.rx_sz' />
							<argument exp='Sn_RX_RSR' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_sz' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_ReadWord' >
									<return exp='.rx_ptr' />
									<argument exp='Sn_RX_RD' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.rx_ptr = (.rx_ptr + .rx_sz)' />
								</command>
								<command class_type='call' title='Call Macro' macro='MAC_WriteWord' >
									<argument exp='Sn_RX_RD' />
									<argument exp='.rx_ptr' />
								</command>
								<command class_type='call' title='Send the RECV command' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_RECV' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_SetRxBuffer' description='Set the bank address at the given Socket receive buffer area' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Socket' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetBank' >
							<argument exp='(.Socket &lt;&lt; 2) + 3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ModePingBlock' description='If Enable is true blocks the response to a ping request.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='PingBlock' type='u8' description='If true blocks the response to a ping request.' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='MR' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TEMP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Save BANK' >
							<exp exp='.TEMP = MAC_BANK' />
							<exp exp='MAC_BANK = 0' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
							<return exp='.MR' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Decision' exp='.PingBlock' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.MR = .MR | 0x10' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.MR = .MR &amp; 0xEF' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='' macro='MAC_WriteByte' >
							<argument exp='0' />
							<argument exp='.MR' />
						</command>
						<command class_type='calculation' title='Restore BANK' >
							<exp exp='MAC_BANK = .TEMP' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCPConnect' description='This macro puts a previously opened TCP channel in &quot;active open&quot; mode.  This is the required mode when writing a TCP client application (e.g. using SMTP to send an email).' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Dst_Port' type='u16' description='Destination Port' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Timeout' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='.Channel &gt;= 4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
									<argument exp='.Channel' />
								</command>
								<command class_type='call' title='Set up the destination port' macro='MAC_WriteWord' >
									<argument exp='Sn_DPORT' />
									<argument exp='.Dst_Port' />
								</command>
								<command class_type='call' title='Set up the destination IP address' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR0' />
									<argument exp='.Dst_IP0' />
								</command>
								<command class_type='call' title='Set up the destination IP address' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR1' />
									<argument exp='.Dst_IP1' />
								</command>
								<command class_type='call' title='Set up the destination IP address' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR2' />
									<argument exp='.Dst_IP2' />
								</command>
								<command class_type='call' title='Set up the destination IP address' macro='MAC_WriteByte' >
									<argument exp='Sn_DIPR3' />
									<argument exp='.Dst_IP3' />
								</command>
								<command class_type='call' title='Connect' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_CONNECT' />
								</command>
								<command class_type='loop' title='Loop' type='0' exp='.Return' start='0' >
									<flowline >
										<command class_type='call' title='Wait for result to clear' macro='MAC_ReadByte' >
											<return exp='.Return' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Timeout = 500' />
								</command>
								<command class_type='loop' title='Loop' type='0' exp='(.Return != Sn_SR_ESTABLISHED) &amp;&amp; (.Timeout)' start='0' >
									<flowline >
										<command class_type='delay' title='Delay' exp='1' type='1' />
										<command class_type='calculation' title='Calculation' >
											<exp exp='.Timeout = .Timeout - 1' />
										</command>
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.Return' />
											<argument exp='Sn_SR' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Established connection?' exp='.Return = Sn_SR_ESTABLISHED' swap='0' >
									<flowline >
										<command class_type='calculation' title='Socket opened correctly' >
											<exp exp='.Return = 1' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Socket failed to open' >
											<exp exp='.Return = 0' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadByte_Sim' description='A call to this macro will return a byte of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxReadByte' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxReadByte' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_Run' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='type' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='User Macro' macro='DHCP_Parse' >
							<return exp='.type' />
						</command>
						<command class_type='switch' title='Switch' textarea='36,25,36,25' exp='DHCP_State' >
							<case >
								<flowline >
									<command class_type='comment' title='' comment='Init' textarea='12,0,12,0' />
									<command class_type='call' title='User Macro' macro='DHCP_Discover' />
									<command class_type='calculation' title='Discover Stage' >
										<exp exp='DHCP_State = 1' />
									</command>
								</flowline>
							</case>
							<case exp='1' >
								<flowline >
									<command class_type='comment' title='' comment='Discover' textarea='12,0,12,0' />
									<command class_type='decision' title='DHCP Offer?' exp='.type = 2' swap='0' >
										<flowline >
											<command class_type='call' title='User Macro' macro='DHCP_Request' />
											<command class_type='calculation' title='Request Stage' >
												<exp exp='DHCP_State = 2' />
											</command>
										</flowline>
										<flowline >
											<command class_type='delay' title='Delay' exp='1' type='1' />
											<command class_type='calculation' title='Calculation' >
												<exp exp='DHCP_Timeout = DHCP_Timeout + 1' />
											</command>
										</flowline>
									</command>
								</flowline>
							</case>
							<case exp='2' >
								<flowline >
									<command class_type='comment' title='' comment='Request' textarea='12,0,12,0' />
									<command class_type='decision' title='Decision' exp='.type = 5' swap='0' >
										<flowline >
											<command class_type='calculation' title='Request Stage' >
												<exp exp='DHCP_State = 3' />
											</command>
										</flowline>
										<flowline >
											<command class_type='delay' title='Delay' exp='1' type='1' />
											<command class_type='calculation' title='Calculation' >
												<exp exp='DHCP_Timeout = DHCP_Timeout + 1' />
											</command>
										</flowline>
									</command>
								</flowline>
							</case>
							<case exp='3' >
								<flowline >
									<command class_type='calculation' title='Calculation' />
								</flowline>
							</case>
							<case exp='4' >
								<flowline />
							</case>
							<case exp='5' >
								<flowline />
							</case>
							<case exp='6' >
								<flowline />
							</case>
							<case exp='7' >
								<flowline />
							</case>
							<case exp='8' >
								<flowline />
							</case>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatchMyMAC' description='This macro returns a non-zero value when the next 6 bytes of data in the specified channel&apos;s reception buffer are the same as the Internet E-block&apos;s MAC address entered in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_MAC[0]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_MAC[1]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_MAC[2]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_MAC[3]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_MAC[4]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.rx_byte != My_MAC[5]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxFlushData_Sim' description='Once data reception has been completed, this macro should be called to discard the data packet and allow other data packets to be read.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxFlushData' >
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxFlushData' >
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxDataSize' description='This macro is used to detect the size of data collected by the Rx_data_available macro.' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='.Return = gRxSize[.Channel]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateMACSocket' description='This macro creates a socket for sending and receiving Ethernet data using raw data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Promiscuous' type='u8' description='Receive everything (1) or just data bound for your MAC (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Broadcast' type='u8' description='Allows broadcast messages to be accepted (1) or rejected (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Error' type='u8' description='Allowsmessages with errors to be accepted (1) or rejected (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Regval' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='4' setinit='0x04' />
						<local name='Sn_MR_VAL' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='ModePingBlock' >
							<argument exp='1' />
						</command>
						<command class_type='call' title='MAC only supported on Channel 0' macro='MAC_SetRegister' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='Read the Status register' macro='MAC_ReadByte' >
							<return exp='.Regval' />
							<argument exp='Sn_SR' />
						</command>
						<command class_type='decision' title='Check if socket is closed' exp='.Regval != Sn_SR_CLOSED' swap='0' >
							<flowline >
								<command class_type='call' title='Close Socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_CLOSE' />
								</command>
								<command class_type='loop' title='Wait for socket to close' type='0' exp='.Regval != Sn_SR_CLOSED' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_SR' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='.Regval != Sn_SR_MACRAW' start='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Sn_MR_VAL = Sn_MR_MACRAW' />
								</command>
								<command class_type='decision' title='Decision' exp='.Promiscuous' swap='0' >
									<flowline />
									<flowline >
										<command class_type='calculation' title='Limit to packets bound for this MAC' >
											<exp exp='.Sn_MR_VAL = .Sn_MR_VAL | Sn_MR_MFEN' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' exp='.Broadcast' swap='0' >
									<flowline />
									<flowline >
										<command class_type='calculation' title='enable Broadcast Blocking' >
											<exp exp='.Sn_MR_VAL = .Sn_MR_VAL | Sn_MR_BCASTB' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='Setup socket protocol and option flags' macro='MAC_WriteByte' >
									<argument exp='Sn_MR' />
									<argument exp='.Sn_MR_VAL' />
								</command>
								<command class_type='call' title='Initialise the socket' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_OPEN' />
								</command>
								<command class_type='loop' title='Wait until clear' type='0' exp='.Regval' start='0' >
									<flowline >
										<command class_type='call' title='Read socket status' macro='MAC_ReadByte' >
											<return exp='.Regval' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='' macro='MAC_ReadByte' >
									<return exp='.Regval' />
									<argument exp='Sn_SR' />
								</command>
								<command class_type='delay' title='Delay' exp='1' type='1' />
							</flowline>
						</command>
						<command class_type='calculation' title='Reset Globals' >
							<exp exp='Header[0] = 0' />
							<exp exp='Header[1] = 0' />
							<exp exp='Header[2] = 0' />
							<exp exp='Header[3] = 0' />
							<exp exp='Header[4] = 0' />
							<exp exp='Header[5] = 0' />
							<exp exp='Header[6] = 0' />
							<exp exp='Header[7] = 0' />
						</command>
						<command class_type='calculation' title='Opened socket correctly' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateUDPSocket_Sim' description='This macro creates a socket for sending and receiving UDP data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Src_Port' type='u16' description='Port Number' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='CreateUDPSocket' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Src_Port' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='CreateUDPSocket' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Src_Port &gt;&gt; 8' />
									<argument exp='.Src_Port' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendMyMAC' description='This macro fills the specified channel&apos;s transmit buffer with 6 bytes of data representing this Internet E-Block&apos;s MAC address as specified in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_l' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_h' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='offset' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_MAC[0]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_MAC[1]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_MAC[2]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_MAC[3]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_MAC[4]' />
						</command>
						<command class_type='call' title='Call Macro' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='My_MAC[5]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetMACAddress' description='This macro sets up the Internet E-Block&apos;s MAC address.  In most circumstances, this macro will not be required as the MAC address setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='MAC0' type='u8' description='First Byte of address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC1' type='u8' description='Second Byte of address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC2' type='u8' description='Third Byte of address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC3' type='u8' description='Fourth Byte of address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC4' type='u8' description='Fourth Byte of address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC5' type='u8' description='Fifth Byte of address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' >
							<exp exp='My_MAC[0] = .MAC0' />
							<exp exp='My_MAC[1] = .MAC1' />
							<exp exp='My_MAC[2] = .MAC2' />
							<exp exp='My_MAC[3] = .MAC3' />
							<exp exp='My_MAC[4] = .MAC4' />
							<exp exp='My_MAC[5] = .MAC5' />
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_SetCommon' />
						<command class_type='call' title='Set IP Address' macro='MAC_WriteArray' >
							<argument exp='0x09' />
							<argument exp='My_MAC' />
							<argument exp='6' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_4_Bytes_Sim' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 2 bytes and 6 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte3' type='u8' description='Specifies the value of the third byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte4' type='u8' description='Specifies the value of the fourth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxMatch_4_Bytes' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Byte1' />
									<argument exp='.Byte2' />
									<argument exp='.Byte3' />
									<argument exp='.Byte4' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxMatch_4_Bytes' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Byte1' />
									<argument exp='.Byte2' />
									<argument exp='.Byte3' />
									<argument exp='.Byte4' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_Request' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ptr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ip' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='decision' title='Decision' exp='DHCP' swap='0' >
							<flowline >
								<command class_type='call' title='User Macro' macro='DHCP_MakeMessage' />
								<command class_type='decision' title='Leased or ReRequest?' exp='(DHCP_State = 3) || (DHCP_State = 4)' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' >
											<exp exp='.ip[0] = 255' />
											<exp exp='.ip[1] = 255' />
											<exp exp='.ip[2] = 255' />
											<exp exp='.ip[3] = 255' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' >
											<exp exp='.ip[0] = 255' />
											<exp exp='.ip[1] = 255' />
											<exp exp='.ip[2] = 255' />
											<exp exp='.ip[3] = 255' />
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='dhcpMessageType - REQUEST' >
									<exp exp='DHCP_MSG[240] = 53' />
									<exp exp='DHCP_MSG[241] = 1' />
									<exp exp='DHCP_MSG[242] = 2' />
								</command>
								<command class_type='calculation' title='Client Identifier' >
									<exp exp='DHCP_MSG[243] = 61' />
									<exp exp='DHCP_MSG[244] = 7' />
									<exp exp='DHCP_MSG[245] = 1' />
									<exp exp='DHCP_MSG[246] = My_MAC[0]' />
									<exp exp='DHCP_MSG[247] = My_MAC[1]' />
									<exp exp='DHCP_MSG[248] = My_MAC[2]' />
									<exp exp='DHCP_MSG[249] = My_MAC[3]' />
									<exp exp='DHCP_MSG[250] = My_MAC[4]' />
									<exp exp='DHCP_MSG[251] = My_MAC[5]' />
								</command>
								<command class_type='calculation' title='HostName' >
									<exp exp='DHCP_MSG[252] = 12' />
									<exp exp='DHCP_MSG[253] = 9' />
									<exp exp='DHCP_MSG[254] = &apos;W&apos;' />
									<exp exp='DHCP_MSG[255] = &apos;I&apos;' />
									<exp exp='DHCP_MSG[256] = &apos;Z&apos;' />
									<exp exp='DHCP_MSG[257] = &apos;n&apos;' />
									<exp exp='DHCP_MSG[258] = &apos;e&apos;' />
									<exp exp='DHCP_MSG[259] = &apos;t&apos;' />
									<exp exp='DHCP_MSG[260] = My_MAC[3]' />
									<exp exp='DHCP_MSG[261] = My_MAC[4]' />
									<exp exp='DHCP_MSG[262] = My_MAC[5]' />
								</command>
								<command class_type='calculation' title='Options' >
									<exp exp='DHCP_MSG[263] = 55' />
									<exp exp='DHCP_MSG[264] = 8' />
									<exp exp='DHCP_MSG[265] = 1' />
									<exp exp='DHCP_MSG[266] = 3' />
									<exp exp='DHCP_MSG[267] = 6' />
									<exp exp='DHCP_MSG[268] = 15' />
									<exp exp='DHCP_MSG[269] = 58' />
									<exp exp='DHCP_MSG[270] = 59' />
									<exp exp='DHCP_MSG[271] = 31' />
									<exp exp='DHCP_MSG[272] = 33' />
									<exp exp='DHCP_MSG[273] = 255' />
								</command>
								<command class_type='call' title='Setup broadcast packet' macro='SetDestination' >
									<argument exp='0' />
									<argument exp='.ip[0]' />
									<argument exp='.ip[1]' />
									<argument exp='.ip[2]' />
									<argument exp='.ip[3]' />
									<argument exp='67' />
								</command>
								<command class_type='call' title='User Macro' macro='TxStart' >
									<argument exp='0' />
								</command>
								<command class_type='call' title='endOption' macro='TxSendArray' >
									<argument exp='0' />
									<argument exp='DHCP_MSG' />
									<argument exp='274' />
								</command>
								<command class_type='call' title='User Macro' macro='TxEnd' >
									<argument exp='0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxDataSize_Sim' description='This macro is used to detect the size of data collected by the Rx_data_available macro.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxDataSize' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxDataSize' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetSubnetMask' description='This macro sets up the Internet E-Block&apos;s Subnet Mask.  In most circumstances, this macro will not be required as the subnet mask setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetCommon' />
						<command class_type='call' title='Set Subnet Mask' macro='MAC_WriteByte' >
							<argument exp='0x05' />
							<argument exp='.IP0' />
						</command>
						<command class_type='call' title='Set Subnet Mask' macro='MAC_WriteByte' >
							<argument exp='0x06' />
							<argument exp='.IP1' />
						</command>
						<command class_type='call' title='Set Subnet Mask' macro='MAC_WriteByte' >
							<argument exp='0x07' />
							<argument exp='.IP2' />
						</command>
						<command class_type='call' title='Set Subnet Mask' macro='MAC_WriteByte' >
							<argument exp='0x08' />
							<argument exp='.IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendArray_Sim' description='This macro fills the specified channel&apos;s transmit buffer with data.  It can fill the buffer with a single byte of data, or with a string of information.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1000' />
						</param>
						<param name='Count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='loop' title='Loop' type='2' forvar='.Idx' exp='.Count' >
							<flowline >
								<command class_type='decision' title='Decision' exp='SimType' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='TxSendByte' >
											<argument exp='.Channel' />
											<argument exp='.Data[.Idx]' />
										</command>
									</flowline>
									<flowline >
										<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='TxSendByte' >
											<argument exp='.Channel' />
											<argument exp='.Data[.Idx]' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='Main' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='temp' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Component Version Information;
10, 0.0, 23-06-25, MW, Fixed a bug wihtin DHCP_Run that&apos;s causing compiler error with ESP32; ' textarea='12,0,12,0' />
						<command class_type='call' title='Call Macro' macro='Ev_Initialise' />
						<command class_type='call' title='Call Macro' macro='Initialise' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_2_Bytes_Sim' description='This macro returns a non-zero value when the next 2 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 4 bytes and 6 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxMatch_2_Bytes' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Byte1' />
									<argument exp='.Byte2' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxMatch_2_Bytes' >
									<return exp='.Return' />
									<argument exp='.Channel' />
									<argument exp='.Byte1' />
									<argument exp='.Byte2' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_WriteWord' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='MIAC_SYSTEM' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MIAC_Module_SetData' >
									<argument exp='4' />
									<argument exp='.Address &gt;&gt; 8' />
									<argument exp='.Address' />
									<argument exp='.Data &gt;&gt; 8' />
									<argument exp='.Data' />
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_Message' >
									<argument exp='(ORDINAL &lt;&lt; 9) + 64' />
									<argument exp='803' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Enable_CS' />
								<command class_type='call' title='Write Address High' component='cal_spi' macro='Master_Byte' >
									<argument exp='(.Address &amp; 0xFF00) &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Write Address Low' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Address &amp; 0xFF' />
								</command>
								<command class_type='call' title='Write Command and Bank' component='cal_spi' macro='Master_Byte' >
									<argument exp='MAC_BANK + 4' />
								</command>
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<argument exp='(.Data &amp; 0xFF00) &gt;&gt; 8' />
								</command>
								<command class_type='call' title='Write Data' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Data &amp; 0x00FF' />
								</command>
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Disable_CS' />
							</flowline>
						</command>
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='sim' title='Component Macro' component='LibraryComponent1' macro='FlashTx' />
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendArray' description='This macro fills the specified channel&apos;s transmit buffer with data.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='1000' />
						</param>
						<param name='Count' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetTxBuffer' >
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Add the data to the appropriate place' macro='MAC_WriteArray' >
							<argument exp='gTxPtr[.Channel]' />
							<argument exp='.Data' />
							<argument exp='.Count' />
						</command>
						<command class_type='calculation' title='Increment the pointer and wrap around' >
							<exp exp='gTxPtr[.Channel] = gTxPtr[.Channel] + .Count' />
							<exp exp='gTxSize[.Channel] = gTxSize[.Channel] + .Count' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatchMyMAC_Sim' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as the Internet E-block&apos;s IP address.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='SimType' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='RxMatchMyMAC' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Component Macro' component='TCP_Base' macro='RxMatchMyMAC' >
									<return exp='.Return' />
									<argument exp='.Channel' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCPClose' description='When an established TCP connection has finished transmission of data, either the local application (i.e. your code) or the remote application (i.e. the application at the other end of the connection) can initiate closure of the socket.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='is_equal' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='timeout' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='100' setinit='100' />
						<local name='temp' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='loop' title='Loop' type='0' exp='.is_equal = 0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
									<return exp='.temp' />
									<argument exp='Sn_IR' />
								</command>
								<command class_type='decision' title='Decision' exp='.temp &amp; 0x10' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' >
											<exp exp='.is_equal = 1' />
										</command>
									</flowline>
									<flowline >
										<command class_type='delay' title='Delay' exp='1' type='1' />
										<command class_type='calculation' title='Calculation' >
											<exp exp='.timeout = .timeout - 1' />
										</command>
										<command class_type='decision' title='Decision' exp='.timeout = 0' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' >
													<exp exp='.is_equal = 1' />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Has there been a timeout?' exp='.timeout != 0' swap='0' >
							<flowline >
								<command class_type='call' title='Not timed out so ok to close' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_DISCON' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.is_equal = 1' />
								</command>
								<command class_type='loop' title='Loop' type='0' exp='.is_equal' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.is_equal' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='Disconnected, now close' macro='MAC_WriteByte' >
									<argument exp='Sn_CR' />
									<argument exp='Sn_CR_CLOSE' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.is_equal = 1' />
								</command>
								<command class_type='loop' title='Loop' type='0' exp='.is_equal' >
									<flowline >
										<command class_type='call' title='Call Macro' macro='MAC_ReadByte' >
											<return exp='.is_equal' />
											<argument exp='Sn_CR' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetSocketStatus' description='This returns the state of the requested channel&apos;s socket.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetRegister' >
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' exp='.Channel &gt;= 4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Trying to open a non-existant channel' >
									<exp exp='.Return = 255' />
									<exp exp='' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Read status' macro='MAC_ReadByte' >
									<return exp='.Return' />
									<argument exp='Sn_SR' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Initialise' description='Resets and initialises the W5500 IC.
Sets up the gateway address, subnet mask, device IP address and device MAC address.
This macro must be called before any other TCP_IP component macros.
Returns 1 to indicate successful communication.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='temp' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup the default MAC' >
							<exp exp='My_MAC[0] = mac0' />
							<exp exp='My_MAC[1] = mac1' />
							<exp exp='My_MAC[2] = mac2' />
							<exp exp='My_MAC[3] = mac3' />
							<exp exp='My_MAC[4] = mac4' />
							<exp exp='My_MAC[5] = mac5' />
						</command>
						<command class_type='decision' title='Decision' exp='MIAC_SYSTEM' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' macro='MIAC_Module_SetData' >
									<argument exp='4' />
									<argument exp='0x1e' />
									<argument exp='0' />
									<argument exp='0' />
									<argument exp='0' />
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' macro='MIAC_Module_Message' >
									<argument exp='(ORDINAL &lt;&lt; 9) + 64' />
									<argument exp='800' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Component Macro' component='cal_spi' macro='Master_Init' />
							</flowline>
						</command>
						<command class_type='call' title='Call Macro' macro='MAC_SetBank' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='Init W5100 - Send Reset' macro='MAC_WriteByte' >
							<argument exp='0' />
							<argument exp='0x80' />
						</command>
						<command class_type='call' title='Set Interrupts Mask' macro='MAC_WriteByte' >
							<argument exp='0x16' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Set MAC Address' macro='MAC_WriteArray' >
							<argument exp='0x09' />
							<argument exp='My_MAC' />
							<argument exp='6' />
						</command>
						<command class_type='decision' title='Decision' exp='DHCP' swap='0' >
							<flowline >
								<command class_type='calculation' title='Zero IP' >
									<exp exp='My_IP[0] = 0' />
									<exp exp='My_IP[1] = 0' />
									<exp exp='My_IP[2] = 0' />
									<exp exp='My_IP[3] = 0' />
								</command>
								<command class_type='calculation' title='Zero Gateway' >
									<exp exp='Gateway[0] = 0' />
									<exp exp='Gateway[1] = 0' />
									<exp exp='Gateway[2] = 0' />
									<exp exp='Gateway[3] = 0' />
								</command>
								<command class_type='call' title='Set IP Address' macro='MAC_WriteArray' >
									<argument exp='0x01' />
									<argument exp='Gateway' />
									<argument exp='4' />
								</command>
								<command class_type='call' title='Set IP Address' macro='MAC_WriteArray' >
									<argument exp='0x0F' />
									<argument exp='My_IP' />
									<argument exp='4' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='DHCP_Timeout = 0' />
									<exp exp='DHCP_State = 0' />
								</command>
								<command class_type='loop' title='Loop' type='0' exp='(DHCP_Timeout &lt; 1000) &amp;&amp; (DHCP_State &lt; 3)' >
									<flowline >
										<command class_type='call' title='User Macro' macro='DHCP_Run' />
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Setup the default IP' >
									<exp exp='My_IP[0] = ip0' />
									<exp exp='My_IP[1] = ip1' />
									<exp exp='My_IP[2] = ip2' />
									<exp exp='My_IP[3] = ip3' />
								</command>
								<command class_type='calculation' title='Setup the default gateway' >
									<exp exp='Gateway[0] = gateway0' />
									<exp exp='Gateway[1] = gateway1' />
									<exp exp='Gateway[2] = gateway2' />
									<exp exp='Gateway[3] = gateway3' />
								</command>
								<command class_type='calculation' title='Setup the subnet' >
									<exp exp='Subnet[0] = subnet0' />
									<exp exp='Subnet[1] = subnet1' />
									<exp exp='Subnet[2] = subnet2' />
									<exp exp='Subnet[3] = subnet3' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Set IP Address' macro='MAC_WriteArray' >
							<argument exp='0x01' />
							<argument exp='Gateway' />
							<argument exp='4' />
						</command>
						<command class_type='call' title='Set Subnet' macro='MAC_WriteArray' >
							<argument exp='0x05' />
							<argument exp='Subnet' />
							<argument exp='4' />
						</command>
						<command class_type='call' title='Set IP Address' macro='MAC_WriteArray' >
							<argument exp='0x0F' />
							<argument exp='My_IP' />
							<argument exp='4' />
						</command>
						<command class_type='comment' title='' comment='Comment' textarea='12,0,12,0' disable='1' />
						<command class_type='call' title='Set TCP Timout Values' macro='MAC_WriteByte' >
							<argument exp='0x19' />
							<argument exp='0x0F' />
						</command>
						<command class_type='call' title='Set TCP Timout Values' macro='MAC_WriteByte' >
							<argument exp='0x1a' />
							<argument exp='0xA0' />
						</command>
						<command class_type='call' title='Set TCP Retry Count 25' macro='MAC_WriteByte' >
							<argument exp='0x1b' />
							<argument exp='25' />
						</command>
						<command class_type='comment' title='' comment='Check that SPI is working by reading a test byte' textarea='12,0,12,0' />
						<command class_type='call' title='Return Timout Value, should be 0xA0 (160)' macro='MAC_ReadByte' >
							<return exp='.Return' />
							<argument exp='0x0F' />
						</command>
						<command class_type='decision' title='Decision' exp='.Return = My_IP[0]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetGateway' description='This macro sets up the Internet E-Block&apos;s Gateway address.  In most circumstances, this macro will not be required as the gateway address setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetCommon' />
						<command class_type='call' title='Set Gateway IP' macro='MAC_WriteByte' >
							<argument exp='GAR0' />
							<argument exp='.IP0' />
						</command>
						<command class_type='call' title='Set Gateway IP' macro='MAC_WriteByte' >
							<argument exp='GAR1' />
							<argument exp='.IP1' />
						</command>
						<command class_type='call' title='Set Gateway IP' macro='MAC_WriteByte' >
							<argument exp='GAR2' />
							<argument exp='.IP2' />
						</command>
						<command class_type='call' title='Set Gateway IP' macro='MAC_WriteByte' >
							<argument exp='GAR3' />
							<argument exp='.IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MAC_SetCommon' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Call Macro' macro='MAC_SetBank' >
							<argument exp='0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_MakeMessage' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ptr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' exp='DHCP' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' >
									<exp exp='//op' />
									<exp exp='DHCP_MSG[0] = 1' />
									<exp exp='//htype' />
									<exp exp='DHCP_MSG[1] = 1' />
									<exp exp='//hlen' />
									<exp exp='DHCP_MSG[2] = 6' />
									<exp exp='//hops' />
									<exp exp='DHCP_MSG[3] = 0' />
									<exp exp='//xid' />
									<exp exp='DHCP_MSG[4] = 0x12' />
									<exp exp='DHCP_MSG[5] = 0x34' />
									<exp exp='DHCP_MSG[6] = 0x56' />
									<exp exp='DHCP_MSG[7] = 0x78' />
									<exp exp='//secs' />
									<exp exp='DHCP_MSG[8] = 0x00' />
									<exp exp='DHCP_MSG[9] = 0x00' />
									<exp exp='//flags' />
									<exp exp='DHCP_MSG[10] = 0x80' />
									<exp exp='DHCP_MSG[11] = 0x00' />
									<exp exp='//ciaddr' />
									<exp exp='DHCP_MSG[12] = 0' />
									<exp exp='DHCP_MSG[13] = 0' />
									<exp exp='DHCP_MSG[14] = 0' />
									<exp exp='DHCP_MSG[15] = 0' />
									<exp exp='//yiaddr' />
									<exp exp='DHCP_MSG[16] = 0' />
									<exp exp='DHCP_MSG[17] = 0' />
									<exp exp='DHCP_MSG[18] = 0' />
									<exp exp='DHCP_MSG[19] = 0' />
									<exp exp='//siaddr' />
									<exp exp='DHCP_MSG[20] = 0' />
									<exp exp='DHCP_MSG[21] = 0' />
									<exp exp='DHCP_MSG[22] = 0' />
									<exp exp='DHCP_MSG[23] = 0' />
									<exp exp='//giaddr' />
									<exp exp='DHCP_MSG[24] = 0' />
									<exp exp='DHCP_MSG[25] = 0' />
									<exp exp='DHCP_MSG[26] = 0' />
									<exp exp='DHCP_MSG[27] = 0' />
									<exp exp='//chaddr' />
									<exp exp='DHCP_MSG[28] = My_MAC[0]' />
									<exp exp='DHCP_MSG[29] = My_MAC[1]' />
									<exp exp='DHCP_MSG[30] = My_MAC[2]' />
									<exp exp='DHCP_MSG[31] = My_MAC[3]' />
									<exp exp='DHCP_MSG[32] = My_MAC[4]' />
									<exp exp='DHCP_MSG[33] = My_MAC[5]' />
									<exp exp='DHCP_MSG[34] = 0' />
									<exp exp='DHCP_MSG[35] = 0' />
									<exp exp='DHCP_MSG[36] = 0' />
									<exp exp='DHCP_MSG[37] = 0' />
									<exp exp='DHCP_MSG[38] = 0' />
									<exp exp='DHCP_MSG[39] = 0' />
									<exp exp='DHCP_MSG[40] = 0' />
									<exp exp='DHCP_MSG[41] = 0' />
									<exp exp='DHCP_MSG[42] = 0' />
									<exp exp='DHCP_MSG[43] = 0' />
								</command>
								<command class_type='calculation' title='Calculation' >
									<exp exp='.ptr = 44' />
								</command>
								<command class_type='loop' title='Loop' type='2' forvar='.idx' exp='64' >
									<flowline >
										<command class_type='calculation' title='sname' >
											<exp exp='DHCP_MSG[.ptr] = 0' />
											<exp exp='.ptr = .ptr + 1' />
										</command>
									</flowline>
								</command>
								<command class_type='loop' title='Loop' type='2' forvar='.idx' exp='128' >
									<flowline >
										<command class_type='calculation' title='file' >
											<exp exp='DHCP_MSG[.ptr] = 0' />
											<exp exp='.ptr = .ptr + 1' />
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='//opt' >
									<exp exp='//Magic Cookie' />
									<exp exp='DHCP_MSG[236] = 0x63' />
									<exp exp='DHCP_MSG[237] = 0x82' />
									<exp exp='DHCP_MSG[238] = 0x53' />
									<exp exp='DHCP_MSG[239] = 0x63' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
			</macros>
			<component class_type='ref' guid='54369d81-80ed-4d59-97bf-91f4b2cdf24c' vmin='2' vmaj='2' codename='TCP_Base' panelId='-1' x='0' y='0' z='0' xsz='0.01' ysz='0.01' zsz='0.01' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='1' poslock='0' ancTop='0' ancBottom='0' ancLeft='0' ancRight='0' ancMinX='0' ancMinY='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='hostname' data='0.0.0.0' />
					<value target='interface' data='2' />
					<value target='gateway0' data='192' />
					<value target='gateway1' data='168' />
					<value target='gateway2' data='0' />
					<value target='gateway3' data='1' />
					<value target='subnet0' data='255' />
					<value target='subnet1' data='255' />
					<value target='subnet2' data='255' />
					<value target='subnet3' data='0' />
					<value target='ip0' data='192' />
					<value target='ip1' data='168' />
					<value target='ip2' data='0' />
					<value target='ip3' data='152' />
					<value target='mac0' data='28' />
					<value target='mac1' data='191' />
					<value target='mac2' data='206' />
					<value target='mac3' data='76' />
					<value target='mac4' data='71' />
					<value target='mac5' data='137' />
					<value target='ConsoleData' data='1' />
					<value target='notify_target' data='dash_IO_flasher1' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='c67171df-0ad6-4b11-8361-cfe14b072847' vmin='21' vmaj='21' codename='cal_spi' panelId='-1' x='0' y='0' z='0' xsz='0.01' ysz='0.01' zsz='0.01' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='1' poslock='0' ancTop='0' ancBottom='0' ancLeft='0' ancRight='0' ancMinX='0' ancMinY='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='ENABLED' data='1' />
					<value target='REF' data='1' />
					<value target='CHANNEL' data='001' />
					<value target='MOSI' data='$PORTB.3' />
					<value target='MOSIPins' data='008' />
					<value target='MISO' data='$PORTB.4' />
					<value target='MISOPins' data='013' />
					<value target='CLK' data='$PORTB.5' />
					<value target='CLKPins' data='004' />
					<value target='UseAutoCS' data='1' />
					<value target='UseCS' data='0' />
					<value target='SS' data='$PORTB.2' />
					<value target='CSPolarity' data='000' />
					<value target='SSPins' data='000' />
					<value target='AltSSPin' data='0' />
					<value target='Mode' data='000' />
					<value target='PR_SCALE' data='004' />
					<value target='CKE' data='1' />
					<value target='CKP' data='1' />
					<value target='SMP' data='1' />
					<value target='ScopeTraces' data='1' />
					<value target='ConsoleData' data='1' />
					<value target='Injector' data='000' />
					<value target='InjectorCS' data='0' />
					<value target='InjectorHandle' data='0' />
					<value target='InjectorChannel' data='0' />
					<value target='Loading' data='1' />
					<value target='BMODE' data='7' />
					<value target='MOSI_PORT' data='$PORTB.3' />
					<value target='MOSI_TRIS' data='$PORTB.3' />
					<value target='MOSI_PIN' data='3' />
					<value target='MISO_PORT' data='$PORTB.4' />
					<value target='MISO_TRIS' data='$PORTB.4' />
					<value target='MISO_PIN' data='4' />
					<value target='SCK_PORT' data='$PORTB.5' />
					<value target='SCK_TRIS' data='$PORTB.5' />
					<value target='SCK_PIN' data='5' />
					<value target='SS_PORT' data='$PORTB.2' />
					<value target='SS_TRIS' data='$PORTB.2' />
					<value target='SS_PIN' data='2' />
					<value target='Remappable' data='' />
					<value target='MOSIReg' data='008' />
					<value target='CLKREG' data='004' />
					<value target='MOSIRPNUM' data='21' />
					<value target='MOSIBank' data='b' />
					<value target='MOSIBank2' data='c' />
					<value target='CLKRPNUM' data='20' />
					<value target='CLKBank' data='b' />
					<value target='MISORPREG' data='SSP1DATPPS' />
					<value target='MISOBank' data='b' />
					<value target='SPIName' data='' />
					<value target='MISOReg' data='000' />
					<value target='SPIClock' data='' />
					<value target='MISOBank2' data='c' />
					<value target='CLKBank2' data='c' />
					<value target='ParentName' data='' />
					<value target='BitDelay' data='0' />
					<value target='ClockSpeed' data='16000000' />
					<value target='MasterDivider' data='1' />
					<value target='Sim' data='1' />
					<value target='CLKRPREG' data='' />
					<value target='SSRPREG' data='' />
					<value target='SSBank' data='' />
					<value target='SSBank2' data='' />
					<value target='AltSSReg' data='' />
					<value target='AltSSMask' data='0' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='58be670e-18fb-477e-ab09-61fde14b23ec' vmin='0' vmaj='1' codename='LibraryComponent1' panelId='-1' x='-0.77665' y='0.77665' z='0' xsz='100' ysz='100' zsz='100' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='1' poslock='1' ancTop='0' ancBottom='0' ancLeft='0' ancRight='0' ancMinX='0' ancMinY='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='Text::sText' data='TCP/IP
W5500' />
					<value target='Name' data='' />
					<value target='Peripheral::sText' data='(SPI CH1)' />
					<value target='Text::nVerticalAlignment' data='002' />
					<value target='ShowComms' data='0' />
					<value target='InputIcon::CommsType' data='1' />
					<value target='InputIcon::LinkTo' data='0' />
					<value target='IconsOnRight' data='0' />
					<value target='OutputIcon::CommsType' data='255' />
					<value target='OutputIcon::LinkTo' data='0' />
					<value target='InputIcon1::CommsType' data='255' />
					<value target='ConsoleHandle' data='0' />
					<value target='Upgraded' data='0' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
		</component>
	</components>
	<scadaresourcelookup />
	<keymap />
	<panel2d shadows='0' lighting='0' brightness='0' >
		<background rgb='9737364' img='' style='0' />
		<camera xe='-43.736' ye='26.1983' ze='373.005' xt='-43.736' yt='26.1983' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<viewport dx='426' dy='746' zoom='138.191' fix_topleft='0' />
		<page x='1000' y='1000' show='0' rgb='0' />
		<winpos ID='7005' RectRecentFloat='1430,299,2041,809' RectRecentDocked='742,141,1188,977' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel2d>
	<panel3d shadows='0' lighting='0' brightness='0' perspective='1' >
		<background rgb='8409120' img='' style='0' />
		<table rgb='7360576' img='' style='0' size='10' />
		<camera xe='-54.5823' ye='-33.0613' ze='575.099' xt='-54.5823' yt='-33.0613' zt='0.582324' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey0 xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey1 xe='-3.67394e-14' ye='0' ze='-300' xt='0' yt='0' zt='0' xquat='0' yquat='1' zquat='0' wquat='6.12323e-17' />
		<camerakey2 xe='0' ye='-300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.707107' yquat='0' zquat='0' wquat='0.707107' />
		<camerakey3 xe='-3.67394e-14' ye='300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-4.32978e-17' yquat='0.707107' zquat='0.707107' wquat='4.32978e-17' />
		<camerakey4 xe='-300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='0.5' zquat='0.5' wquat='0.5' />
		<camerakey5 xe='300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='-0.5' zquat='-0.5' wquat='0.5' />
		<camerakey6 xe='-173.205' ye='-173.205' ze='173.205' xt='0' yt='0' zt='0' xquat='-0.424708' yquat='0.17592' zquat='0.339851' wquat='0.820473' />
		<winpos ID='7004' RectRecentFloat='0,425,654,1002' RectRecentDocked='0,0,446,836' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel3d>
	<panels2d count='0' />
	<layout >
		<view type='0' name='Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='InitialiseSim' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='TCPClose' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Main' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Property' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Timer' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='CreateIPSocket' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_ReadByte' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_ReadWord' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_WriteByte' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_WriteWord' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='TxSendByte_Sim' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='RxDataAvailable_Sim' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetMyIP' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_SetCommon' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_SetRegister' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_SetBank' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_WriteArray' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='MAC_ReadArray' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetGateway' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetMACAddress' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='TxSendByte' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='TxSendString' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='TxSendArray' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='TxSendArray_Sim' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='CreateTCPSocket' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='CreateMACSocket' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='CreateUDPSocket' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='RxReadArray' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='RxReadByte_Sim' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='RxReadArray_Sim' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='RxDataAvailable' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='DHCP_Run' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='DHCP_Discover' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='DHCP_Parse' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='DHCP_Request' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='DHCP_MakeMessage' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAswEAAD8DAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
	</layout>
</document>
</root>
