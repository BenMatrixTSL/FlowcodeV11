<root>
<document scada='0' schema='103' license='1,MartinW,JAK2JB' title='' description='' fcversion='655616' target='ARD.ATMEGA.BL0055' >
	<config data='' clkspd='16000000' simspd='1' usewdt='0' constif='0' commport='94' Use3V3='0' />
	<plugins >
		<dll_models enabled='1' />
	</plugins>
	<supplement use='0' head='' body='' />
	<debug />
	<traces />
	<ghost >
		<FK2 >
			<data name='FK2D0' port='4294967295' pin='4294967295' />
			<data name='FK2D1' port='4294967295' pin='4294967295' />
			<data name='FK2D2' port='4294967295' pin='4294967295' />
			<data name='FK2D3' port='4294967295' pin='4294967295' />
			<data name='FK2D4' port='4294967295' pin='4294967295' />
			<data name='FK2D5' port='4294967295' pin='4294967295' />
			<data name='FK2D6' port='4294967295' pin='4294967295' />
			<data name='FK2D7' port='4294967295' pin='4294967295' />
			<data name='FK2D8' port='4294967295' pin='4294967295' />
			<data name='FK2D9' port='4294967295' pin='4294967295' />
			<data name='FK2D10' port='4294967295' pin='4294967295' />
			<data name='FK2D11' port='4294967295' pin='4294967295' />
			<data name='FK2D12' port='4294967295' pin='4294967295' />
			<data name='FK2D13' port='4294967295' pin='4294967295' />
			<data name='FK2D14' port='4294967295' pin='4294967295' />
			<data name='FK2D15' port='4294967295' pin='4294967295' />
			<data name='FK2A0' port='4294967295' pin='4294967295' />
			<data name='FK2A1' port='4294967295' pin='4294967295' />
			<data name='FK2A2' port='4294967295' pin='4294967295' />
			<data name='FK2A3' port='4294967295' pin='4294967295' />
			<data name='FK2A4' port='4294967295' pin='4294967295' />
			<data name='FK2A5' port='4294967295' pin='4294967295' />
		</FK2>
		<ICD >
			<data name='AnalogPrescaleValue' value='19' />
			<data name='DigitalSampleRate' value='100000' />
			<data name='BreakpointCount' value='8' />
			<data name='CallStackDepthCount' value='8' />
			<data name='ClockPort' value='3' />
			<data name='ClockPin' value='1' />
			<data name='DataPort' value='3' />
			<data name='DataPin' value='0' />
			<data name='UseDefaultPins' value='1' />
			<data name='WrapEnabled' value='1' />
			<data name='CommsDelayOverridden' value='0' />
			<data name='CommsDelay' value='11' />
			<data name='CalculatedCommsDelay' value='11' />
			<data name='AnalogEB2PrescaleValue' value='2' />
			<data name='DigitalEB2SampleRate' value='100000' />
		</ICD>
		<pins >
			<digital A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
			<analog A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
		</pins>
	</ghost>
	<components >
		<settings autoimg='0' center='1' unitscale='0' fixedscale='0' fixedx='1' fixedy='1' fixedz='1' headcode='0' />
		<definition guid='7ea86aa3-ef65-4e41-80ea-ed33c0e1baa6' vstate='40' vmin='3' vmaj='2' srcleaf='TCPIP_BL0187.fcfx' visiblename='TCP/IP' description='A set of routines used to control a ENC28J60 TCP/IP Module.
Required connections VCC, Reset, GND, SCK, MISO, MOSI, CS.
Leave these pins disconnected CLKOUT, ENC_WOL, ENC_INT' category='E-blocks 2' category2='' category3='' bIs2dOnly='1' bIs3dOnly='0' catenable='1' author='Matrix TSL' manuname='Matrix TSL' manucode='BL0187' sysinfo='1053515' keywords='Eithernet|Eblocks2|' dynamic='1' scadaCompatible='0' embeddedCompatible='1' showmacros='1' iconpath='..\..\Icons\Components\TCP_IP.png' />
		<component class_type='root' codename='TCPIP_BL0187' panelId='-1' x='0' y='0' z='0' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='0' poslock='0' comp2dType='0' >
			<resources >
				<file name='TCPIP.png' source='..\icons\Large Comms Icons\TCPIP.png' />
			</resources>
			<properties >
				<property name='TCP IP Specifics' folder='property_4' hidden='0' >
					<property name='Server Port' target='Port' typeid='21' hidden='0' locked='0' info='Sets the server&apos;s TCP/IP port address which is used to filter incoming TCP packets.' />
					<property name='Buffer Size' target='BufferSize' typeid='21' hidden='0' locked='0' info='Number of bytes to use for the transmit and receive buffer, we actually use this +1 to allow for a null termination.
8-bit PICs should set this to 255 to allow compilation to succeed.
Other devices can have larger buffers.
Default = 500' />
				</property>
				<property name='SPI Settings' folder='property_3' hidden='0' >
					<property name='Channel' target='cal_spi::CHANNEL' typeid='16' hidden='0' locked='0' info='SPI Channel selector' filter='000Software
001Channel 1
' />
					<property name='Prescale' target='cal_spi::PR_SCALE' typeid='16' hidden='0' locked='0' info='Prescale option selector' filter='004Fosc/4
016Fosc/16
064Fosc/64' />
					<property name='MOSI' target='cal_spi::MOSI' typeid='5' hidden='0' locked='1' info='SPI Data Out Pin SDO - Also Known as Master Out Slave In (MOSI) when used in Master mode.' />
					<property name='MOSI Remap Pin' target='cal_spi::MOSIPins' typeid='16' hidden='1' locked='0' info='Select which the target pin to assign the MOSI hardware pin functionality.' filter='000$PORTE.5
001$PORTE.7
002$PORTG.6
003$PORTG.8
004$PORTF.4
005$PORTF.5
006$PORTF.3
007$PORTD.0
008$PORTD.1
009$PORTD.2
010$PORTD.3
011$PORTD.4
012$PORTD.5
013$PORTD.6
014$PORTD.7
015$PORTF.0
016$PORTF.1
017$PORTE.0
018$PORTE.2
019$PORTE.4' />
					<property name='MISO' target='cal_spi::MISO' typeid='5' hidden='0' locked='1' info='SPI Data In Pin SDI - Also Known as Master In Slave Out (MISO) when used in Master mode.' />
					<property name='MISO Remap Pin' target='cal_spi::MISOPins' typeid='16' hidden='1' locked='0' info='Select which the target pin to assign the MISO hardware pin functionality.' filter='085$PORTE.5
086$PORTE.6
087$PORTE.7
118$PORTG.6
119$PORTG.7
120$PORTG.8
121$PORTG.9
037$PORTB.5
036$PORTB.4
035$PORTB.3
034$PORTB.2
033$PORTB.1
032$PORTB.0
038$PORTB.6
039$PORTB.7
040$PORTB.8
041$PORTB.9
042$PORTB.10
043$PORTB.11
044$PORTB.12
045$PORTB.13
046$PORTB.14
047$PORTB.15
100$PORTF.4
101$PORTF.5
099$PORTF.3
060$PORTC.12
072$PORTD.8
073$PORTD.9
074$PORTD.10
075$PORTD.11
064$PORTD.0
061$PORTC.13
062$PORTC.14
065$PORTD.1
066$PORTD.2
067$PORTD.3
068$PORTD.4
069$PORTD.5
070$PORTD.6
071$PORTD.7
096$PORTF.0
097$PORTF.1
080$PORTE.0
081$PORTE.1
082$PORTE.2
083$PORTE.3
084$PORTE.4' />
					<property name='CLK' target='cal_spi::CLK' typeid='5' hidden='0' locked='1' info='SPI Clock Pin CLK - The Clock signal is driven by the SPI master.' />
					<property name='CLK Remap Pin' target='cal_spi::CLKPins' typeid='16' hidden='1' locked='0' info='Select which the target pin to assign the CLK hardware pin functionality.' filter='000$PORTE.5
001$PORTE.7
002$PORTG.6
003$PORTG.8
004$PORTF.4
005$PORTF.5
006$PORTF.3
007$PORTD.0
008$PORTD.1
009$PORTD.2
010$PORTD.3
011$PORTD.4
012$PORTD.5
013$PORTD.6
014$PORTD.7
015$PORTF.0
016$PORTF.1
017$PORTE.0
018$PORTE.2
019$PORTE.4' />
					<property name='CS / SS' target='cal_spi::SS' typeid='5' hidden='0' locked='0' info='Chip Select / Slave Select Pin 
Master Mode: General purpose output pin used to select the remote SPI device.
Slave Mode: Hardware chip select pin input used to select the SPI device.
' />
					<property name='Reset Pin' target='ResetPin' typeid='5' hidden='0' locked='0' info='' />
				</property>
				<property name='LED Flash' target='LED_FLASH' typeid='16' hidden='0' locked='0' info='When enabled the socket LEDs will flash on/off 500ms.
Useful for SPI check.' filter='000No
001Yes' />
				<property name='Auto DHCP' target='DHCP' typeid='16' hidden='0' locked='0' info='When enabled the Initialisation will also include DHCP setup to auto configure settings.
' filter='000No
001Yes' />
				<property name='MAC Address' folder='property_1' hidden='0' >
					<property name='MAC0' target='MAC0' typeid='21' hidden='0' locked='0' info='' />
					<property name='MAC1' target='MAC1' typeid='21' hidden='0' locked='0' info='' />
					<property name='MAC2' target='MAC2' typeid='21' hidden='0' locked='0' info='' />
					<property name='MAC3' target='MAC3' typeid='21' hidden='0' locked='0' info='' />
					<property name='MAC4' target='MAC4' typeid='21' hidden='0' locked='0' info='' />
					<property name='MAC5' target='MAC5' typeid='21' hidden='0' locked='0' info='' />
				</property>
				<property name='IP Address' folder='property_2' hidden='0' >
					<property name='IP0' target='IP0' typeid='21' hidden='0' locked='0' info='' />
					<property name='IP1' target='IP1' typeid='21' hidden='0' locked='0' info='' />
					<property name='IP2' target='IP2' typeid='21' hidden='0' locked='0' info='' />
					<property name='IP3' target='IP3' typeid='21' hidden='0' locked='0' info='' />
				</property>
				<property name='Gateway IP' hidden='0' >
					<property name='Gateway0' target='gateway0' typeid='14' hidden='0' locked='0' info='' />
					<property name='Gateway1' target='gateway1' typeid='14' hidden='0' locked='0' info='' />
					<property name='Gateway2' target='gateway2' typeid='14' hidden='0' locked='0' info='' />
					<property name='Gateway3' target='gateway3' typeid='14' hidden='0' locked='0' info='' />
				</property>
				<property name='Subnet Mask' hidden='0' >
					<property name='Subnet0' target='subnet0' typeid='14' hidden='0' locked='0' info='' />
					<property name='Subnet1' target='subnet1' typeid='14' hidden='0' locked='0' info='' />
					<property name='Subnet2' target='subnet2' typeid='14' hidden='0' locked='0' info='' />
					<property name='Subnet3' target='subnet3' typeid='14' hidden='0' locked='0' info='' />
				</property>
				<property name='Simulation' folder='property_5' hidden='0' >
					<property name='Label' target='label' typeid='10' hidden='0' locked='0' info='' />
					<property name='Sim Type' target='SimType' typeid='16' hidden='0' locked='0' info='Decides how to perform the simulation of the component.
TCP IP - Communicates using the Windows TCP IP communications DLL
SPI / Injector - Communicates using the CAL SPI to allow the communications to be analysed and debugged.' filter='000TCP IP - N/A
001SPI / Injector' />
					<property name='SPI Simulation' folder='property_6' hidden='0' >
						<property name='Scope Traces' target='cal_spi::ScopeTraces' typeid='7' hidden='0' locked='0' info='Selects if the scope traces are automatically generated or not' />
						<property name='Console Data' target='cal_spi::ConsoleData' typeid='7' hidden='0' locked='0' info='Selects if the console data is automatically generated or not' />
						<property name='API' target='cal_spi::Injector' typeid='16' hidden='0' locked='0' info='' filter='000' />
						<property name='API CS Pin' target='cal_spi1::InjectorCS' typeid='21' hidden='1' locked='0' info='' />
					</property>
					<property name='TCP Simulation' folder='property_7' hidden='1' >
						<property name='Network Interface' target='TCP_Base1::interface' typeid='16' hidden='0' locked='0' info='List of network interfaces connected to the PC. 
Sets which interface we are communicating via.' filter='0000
0011
0022
0033
0044
0055
0066
255AutoDetect' />
					</property>
				</property>
				<property name='RemapIndex' target='RemapIndex' typeid='21' hidden='1' locked='0' info='' />
			</properties>
			<values >
				<value target='Port' data='80' />
				<value target='BufferSize' data='1000' />
				<value target='cal_spi::CHANNEL' data='001' />
				<value target='cal_spi::PR_SCALE' data='004' />
				<value target='cal_spi::MOSI' data='$PORTB.3' />
				<value target='cal_spi::MOSIPins' data='013' />
				<value target='cal_spi::MISO' data='$PORTB.4' />
				<value target='cal_spi::MISOPins' data='065' />
				<value target='cal_spi::CLK' data='$PORTB.5' />
				<value target='cal_spi::CLKPins' data='009' />
				<value target='cal_spi::SS' data='$PORTB.0' />
				<value target='ResetPin' data='$PORTB.2' />
				<value target='LED_FLASH' data='001' />
				<value target='DHCP' data='001' />
				<value target='MAC0' data='10' />
				<value target='MAC1' data='101' />
				<value target='MAC2' data='102' />
				<value target='MAC3' data='103' />
				<value target='MAC4' data='104' />
				<value target='MAC5' data='105' />
				<value target='IP0' data='192' />
				<value target='IP1' data='168' />
				<value target='IP2' data='1' />
				<value target='IP3' data='99' />
				<value target='gateway0' data='192' />
				<value target='gateway1' data='168' />
				<value target='gateway2' data='1' />
				<value target='gateway3' data='1' />
				<value target='subnet0' data='255' />
				<value target='subnet1' data='255' />
				<value target='subnet2' data='255' />
				<value target='subnet3' data='' />
				<value target='label' data='BL0187' />
				<value target='SimType' data='1' />
				<value target='cal_spi::ScopeTraces' data='1' />
				<value target='cal_spi::ConsoleData' data='1' />
				<value target='cal_spi::Injector' data='000' />
				<value target='cal_spi1::InjectorCS' data='' />
				<value target='TCP_Base1::interface' data='4' />
				<value target='RemapIndex' data='4' />
			</values>
			<events >
				<event class='Compile' event='GetVarSize' target='Ev_GetVarSize' />
				<event class='Components' event='Initialise' target='Ev_Initialise' />
				<event class='Components' event='Property' target='Ev_Property' />
			</events>
			<apis >
				<api name='TxSendMyIP' alt='TxSendMyIP' type='1' proto='1' />
				<api name='RxStart' alt='RxStart' type='1' proto='1' />
				<api name='RxMatchMyIP' alt='RxMatchMyIP' type='1' proto='1' />
				<api name='RxMatch_4_Bytes' alt='RxMatch_4_Bytes' type='1' proto='1' />
				<api name='GetLocalMAC' alt='GetLocalMAC' type='1' proto='1' />
				<api name='TxSendString' alt='TxSendString' type='1' proto='1' />
				<api name='RxReadHeader' alt='RxReadHeader' type='1' proto='1' />
				<api name='RxSkipBytes' alt='RxSkipBytes' type='1' proto='1' />
				<api name='CreateIPSocket' alt='CreateIPSocket' type='1' proto='1' />
				<api name='SetDestination' alt='SetDestination' type='1' proto='1' />
				<api name='GetLocalIP' alt='GetLocalIP' type='1' proto='1' />
				<api name='TxStart' alt='TxStart' type='1' proto='1' />
				<api name='RxReadByte' alt='RxReadByte' type='1' proto='1' />
				<api name='CreateUDPSocket' alt='CreateUDPSocket' type='1' proto='1' />
				<api name='RxMatch_6_Bytes' alt='RxMatch_6_Bytes' type='1' proto='1' />
				<api name='SetLocalIP' alt='SetLocalIP' type='1' proto='1' />
				<api name='RxMatch_2_Bytes' alt='RxMatch_2_Bytes' type='1' proto='1' />
				<api name='RxReadString' alt='RxReadString' type='1' proto='1' />
				<api name='TxEnd' alt='TxEnd' type='1' proto='1' />
				<api name='DNS_Lookup' alt='DNS_Lookup' type='1' proto='1' />
				<api name='TCP_Close' alt='TCP_Close' type='1' proto='1' />
				<api name='RxDataAvailable' alt='RxDataAvailable' type='1' proto='1' />
				<api name='CreateTCPSocket' alt='CreateTCPSocket' type='1' proto='1' />
				<api name='TxSendByte' alt='TxSendByte' type='1' proto='1' />
				<api name='RxFlushData' alt='RxFlushData' type='1' proto='1' />
				<api name='ReadRegister' alt='ReadRegister' type='1' proto='1' />
				<api name='TCP_Connect' alt='TCP_Connect' type='1' proto='1' />
				<api name='RxMatchMyMAC' alt='RxMatchMyMAC' type='1' proto='1' />
				<api name='RxDataSize' alt='RxDataSize' type='1' proto='1' />
				<api name='ControlLEDs' alt='ControlLEDs' type='1' proto='1' />
				<api name='TxSendMyMAC' alt='TxSendMyMAC' type='1' proto='1' />
				<api name='CreateMACSocket' alt='CreateMACSocket' type='1' proto='1' />
				<api name='SetMACAddress' alt='SetMACAddress' type='1' proto='1' />
				<api name='SetSubnetMask' alt='SetSubnetMask' type='1' proto='1' />
				<api name='DHCP_Setup' alt='DHCP_Setup' type='1' proto='1' />
				<api name='WriteRegister' alt='WriteRegister' type='1' proto='1' />
				<api name='Initialise' alt='Initialise' type='1' proto='1' />
				<api name='SetGateway' alt='SetGateway' type='1' proto='1' />
			</apis>
			<variables >
				<variable public='0' >
					<def class_type='variable' name='BufferDataLength' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MyMAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='6' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_TYPE_IP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_MODE_LISTEN' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_TYPE_UDP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_STATUS_NONE' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MyGateway' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_STATUS_CONNECTED' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='info_hdr_len' type='s16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gHrdSize' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='DNS_MAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='6' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SocketType' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='SOCKET_TYPE_MAC' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PROTOCOL_TCP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='6' setinit='6' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Header' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='32' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gTxSize' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_MODE_PASSIVE' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='false' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCP_SourcePort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gRxSize' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RemoteIPHeader' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='DHCP_XID' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Enc28j60Bank' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='LocalPort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_TYPE_MAC' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCP_ListenPort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RemotePort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='DNS_IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCP_DestinationPort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PROTOCOL_ICMP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='BufferDataReadIdx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='info_data_len' type='s16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_TYPE_TCP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='3' setinit='3' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='PROTOCOL_UDP' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='17' setinit='17' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SocketMode' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MyIP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TransactionID' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Buffer' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='501' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SOCKET_MODE_ACTIVE' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gRxPtr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='BufferDataWriteIdx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MySubnet' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Host' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCP_SEQ' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='IP_Identifier' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='ErrorCode' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SeqNum' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='10' setinit='0x0A' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCP_ACK' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MyDHCP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='SocketStatus' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='BANK_MASK' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='96' setinit='0x60' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='NextPacketPtr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='true' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='ADDR_MASK' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='31' setinit='0x1F' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='gTxPtr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RemoteMAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='6' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TX_IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RemoteIP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='4' />
					</def>
				</variable>
			</variables>
			<macros >
				<macro >
					<flowline name='EncPhyWrite' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='retval' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Timeout' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='9999' setinit='9999' />
						<command class_type='call' title='PHY register address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xD4' />
							<argument exp='.Address' />
						</command>
						<command class_type='call' title='PHY data' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xD6' />
							<argument exp='.Data' />
						</command>
						<command class_type='call' title='PHY data' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xD7' />
							<argument exp='.Data &gt;&gt; 8' />
						</command>
						<command class_type='loop' title='wait until the PHY write completes' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.retval &amp; 0x01' start='0' >
							<flowline >
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='15' type='0' />
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadRegister' >
									<return exp='.retval' />
									<argument exp='0xCA' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Timeout = .Timeout - 1' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Timeout = 0' swap='0' >
									<flowline >
										<command class_type='comment' title='' comment='Don&apos;t block forever if no reply' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
										<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendMyIP' description='This macro fills the specified channel&apos;s transmit buffer with 4 bytes of data representing this Internet E-Block&apos;s IP address as specified in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyIP[0]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyIP[1]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyIP[2]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyIP[3]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxStart' description='Move the received buffer read pointer back to the start' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='switch' title='skip the headers depending upon the packet type expect' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType' >
							<case >
								<flowline >
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='BufferDataReadIdx = 0' />
										<exp exp='' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_IP' >
								<flowline >
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='BufferDataReadIdx = 34' />
										<exp exp='' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_TCP' >
								<flowline />
							</case>
							<case exp='SOCKET_TYPE_UDP' >
								<flowline >
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='BufferDataReadIdx = 42' />
										<exp exp='' />
									</command>
								</flowline>
							</case>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetSubnetMAC' description='Sends ARP request to get the MAC of a host
Either on the subnet, else the router MAC
Returns 0 on failure.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<param name='MAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</param>
						<local name='Packet' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='60' />
						</local>
						<local name='Timeout' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Size' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='comment' title='' comment='create ARP packet' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='// Destination broadcast' />
							<exp exp='.Packet[0] = 255' />
							<exp exp='.Packet[1] = 255' />
							<exp exp='.Packet[2] = 255' />
							<exp exp='.Packet[3] = 255' />
							<exp exp='.Packet[4] = 255' />
							<exp exp='.Packet[5] = 255' />
							<exp exp='// Source MAC' />
							<exp exp='.Packet[6] = MyMAC[0]' />
							<exp exp='.Packet[7] = MyMAC[1]' />
							<exp exp='.Packet[8] = MyMAC[2]' />
							<exp exp='.Packet[9] = MyMAC[3]' />
							<exp exp='.Packet[10] = MyMAC[4]' />
							<exp exp='.Packet[11] = MyMAC[5]' />
							<exp exp='// Type ARP' />
							<exp exp='.Packet[12] = 8' />
							<exp exp='.Packet[13] = 6' />
							<exp exp='// ARP datagram' />
							<exp exp='.Packet[14] = 0' />
							<exp exp='.Packet[15] = 1' />
							<exp exp='// Protocol type' />
							<exp exp='.Packet[16] = 8' />
							<exp exp='.Packet[17] = 0' />
							<exp exp='// MAC address size' />
							<exp exp='.Packet[18] = 6' />
							<exp exp='// Protocol size' />
							<exp exp='.Packet[19] = 4' />
							<exp exp='// ARP request = 0,1 (ARP reply = 0,2)' />
							<exp exp='.Packet[20] = 0' />
							<exp exp='.Packet[21] = 1' />
							<exp exp='// Source MAC' />
							<exp exp='.Packet[22] = MyMAC[0]' />
							<exp exp='.Packet[23] = MyMAC[1]' />
							<exp exp='.Packet[24] = MyMAC[2]' />
							<exp exp='.Packet[25] = MyMAC[3]' />
							<exp exp='.Packet[26] = MyMAC[4]' />
							<exp exp='.Packet[27] = MyMAC[5]' />
							<exp exp='// Source IP' />
							<exp exp='.Packet[28] = MyIP[0]' />
							<exp exp='.Packet[29] = MyIP[1]' />
							<exp exp='.Packet[30] = MyIP[2]' />
							<exp exp='.Packet[31] = MyIP[3]' />
							<exp exp='// Destination MAC (unknown)' />
							<exp exp='.Packet[32] = 0' />
							<exp exp='.Packet[33] = 0' />
							<exp exp='.Packet[34] = 0' />
							<exp exp='.Packet[35] = 0' />
							<exp exp='.Packet[36] = 0' />
							<exp exp='.Packet[37] = 0' />
							<exp exp='// Destination IP' />
							<exp exp='.Packet[38] = .IP[0]' />
							<exp exp='.Packet[39] = .IP[1]' />
							<exp exp='.Packet[40] = .IP[2]' />
							<exp exp='.Packet[41] = .IP[3]' />
							<exp exp='// End of ARP packet' />
						</command>
						<command class_type='comment' title='' comment='send ARP packet to network' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DataPacketSend' >
							<argument exp='.Packet' />
							<argument exp='60' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Timeout = 20000' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Timeout &gt; 0' start='0' >
							<flowline >
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='0' />
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DataPacketReceive' >
									<return exp='.Size' />
									<argument exp='.Packet' />
									<argument exp='60' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Size = 60) &amp;&amp; (.Packet[12] = 8) &amp;&amp; (.Packet[13] = 6) &amp;&amp; (.Packet[20] = 0) &amp;&amp; (.Packet[21] = 2)' swap='0' >
									<flowline >
										<command class_type='comment' title='' comment='It&apos;s an ARP reply
But is it for me?' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Packet[0] = MyMAC[0]) &amp;&amp; (.Packet[1] = MyMAC[1]) &amp;&amp; (.Packet[2] = MyMAC[2]) &amp;&amp; (.Packet[3] = MyMAC[3]) &amp;&amp; (.Packet[4] = MyMAC[4]) &amp;&amp; (.Packet[5] = MyMAC[5])' swap='0' >
											<flowline >
												<command class_type='calculation' title='ARP reply' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.MAC[0] = .Packet[22]' />
													<exp exp='.MAC[1] = .Packet[23]' />
													<exp exp='.MAC[2] = .Packet[24]' />
													<exp exp='.MAC[3] = .Packet[25]' />
													<exp exp='.MAC[4] = .Packet[26]' />
													<exp exp='.MAC[5] = .Packet[27]' />
													<exp exp='.Timeout = 0' />
													<exp exp='.Return = 1' />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Timeout = .Timeout - 1' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncSetBank' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Address &amp; BANK_MASK) != Enc28j60Bank' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
									<argument exp='0xA0' />
									<argument exp='0x1F' />
									<argument exp='0x03' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
									<argument exp='0x80' />
									<argument exp='0x1F' />
									<argument exp='(.Address &amp; BANK_MASK) &gt;&gt; 5' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Enc28j60Bank = (.Address &amp; BANK_MASK)' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatchMyIP' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as the Internet E-block&apos;s IP address.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyIP[0]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyIP[1]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyIP[2]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyIP[3]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncClockOut' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Clk' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x75' />
							<argument exp='.Clk &amp; 0x07' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckMatchIp' description='Checks to see if the received data is an IP match with my IP address.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='comment' title='' comment='Check the IP for match with local' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x1E] != MyIp[0]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x1F] != MyIp[1]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x20] != MyIp[2]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x21] != MyIp[3]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='PopulateInjectorFilter' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='ObjHandle' type='h32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RootHandle' type='h32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='OldHandle' type='h32' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='ObjName' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<local name='CmpName' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<local name='CmpStr' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Index' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetFilter' >
							<argument exp='this' />
							<argument exp='&quot;Injector&quot;' />
							<argument exp='&quot;&quot;' />
						</command>
						<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.GetParent' >
							<return exp='.ObjHandle' />
							<argument exp='this' />
						</command>
						<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Tree.GetCopy' >
							<return exp='.RootHandle' />
							<argument exp='.ObjHandle' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.OldHandle != .ObjHandle' >
							<flowline >
								<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Tree.GetCopy' >
									<return exp='.OldHandle' />
									<argument exp='.ObjHandle' />
								</command>
								<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Tree.GetName' >
									<return exp='.ObjName' />
									<argument exp='.ObjHandle' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.CmpName = Left$ (.ObjName,8)' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.CmpStr = Compare$ (.CmpName,&quot;Injector&quot;,0)' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.CmpStr = 0' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.CmpName = Left$ (.ObjName,12)' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.CmpStr = Compare$ (.CmpName,&quot;InjectorBase&quot;,0)' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.CmpStr &gt; 0' swap='0' >
											<flowline >
												<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.AddListItem' >
													<argument exp='this' />
													<argument exp='&quot;Injector&quot;' />
													<argument exp='.Index' />
													<argument exp='.ObjName' />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Index = .Index + 1' />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='sim' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Tree.Traverse' >
									<argument exp='.ObjHandle' />
									<argument exp='.RootHandle' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_4_Bytes' description='This macro returns a non-zero value when the next 4 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 2 bytes and 6 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte3' type='u8' description='Specifies the value of the third byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte4' type='u8' description='Specifies the value of the fourth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte1' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte3' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DNS_HasResponse' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxDataAvailable' >
							<return exp='.Return' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(Buffer[0x17] = PROTOCOL_UDP) &amp;&amp; (LocalPort = 5555) &amp;&amp; (RemotePort = 53)' swap='0' >
									<flowline />
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = 0' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_MakeAckWithData' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='DataLength' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ck' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x2F] = 0x19' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ck = 40 + .DataLength' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x11] = .ck' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpFillIpHdrChecksum' />
						<command class_type='calculation' title='Zero the checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = 0' />
							<exp exp='Buffer[0x33] = 0' />
						</command>
						<command class_type='call' title='Calculate the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='28 + .DataLength' />
							<argument exp='2' />
						</command>
						<command class_type='calculation' title='Assign checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x33] = .ck' />
						</command>
						<command class_type='call' title='' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='54 + .DataLength' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='PacketSend' description='Attempts to transmit a data packet to the ENC28J60 module.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DataPacketSend' >
							<argument exp='Buffer' />
							<argument exp='.Length' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetLocalMAC' description='Gets the local MAC address' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='MAC' type='u8' description='6-byte Array to store the MAC address' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</param>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.MAC[0] = MyMAC[0]' />
							<exp exp='.MAC[1] = MyMAC[1]' />
							<exp exp='.MAC[2] = MyMAC[2]' />
							<exp exp='.MAC[3] = MyMAC[3]' />
							<exp exp='.MAC[4] = MyMAC[4]' />
							<exp exp='.MAC[5] = MyMAC[5]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendString' description='This macro fills the specified channel&apos;s transmit buffer with data.  It can fill the buffer with a string of information.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='T8*' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='Length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.idx = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; .Length' >
							<flowline >
								<command class_type='calculation' title='' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[BufferDataWriteIdx] = .Data[.idx]' />
									<exp exp='.idx = .idx + 1' />
									<exp exp='BufferDataWriteIdx = BufferDataWriteIdx + 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_SendDiscovery' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='DHCP_XID = DHCP_XID + 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CreateUDPSocket' >
							<return exp='.result' />
							<argument exp='0' />
							<argument exp='68' />
						</command>
						<command class_type='comment' title='' comment='Overwrite the defaults' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='broadcast destination mac ' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = 255' />
							<exp exp='Buffer[1] = 255' />
							<exp exp='Buffer[2] = 255' />
							<exp exp='Buffer[3] = 255' />
							<exp exp='Buffer[4] = 255' />
							<exp exp='Buffer[5] = 255' />
						</command>
						<command class_type='call' title='Source IP 0.0.0.0' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetSourceIP' >
							<argument exp='0' />
							<argument exp='0' />
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Destination IP 255.255.255.255' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationIP' >
							<argument exp='255' />
							<argument exp='255' />
							<argument exp='255' />
							<argument exp='255' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationPort' >
							<argument exp='67' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxStart' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='op = REQUEST' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='htype = 1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='hlen = 6' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='6' />
						</command>
						<command class_type='call' title='hops = 0' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Transaction ID (xid)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='DHCP_XID' />
						</command>
						<command class_type='call' title='secs' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='flags (broadcast reply)' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='flags (broadcast reply)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='0' />
							<argument exp='0x8000' />
						</command>
						<command class_type='call' title='ciaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='yiaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='siaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='giaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Client hardware address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[0]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[1]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[2]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[3]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[4]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[5]' />
						</command>
						<command class_type='call' title='Client hardware address padding to total of 16 octets' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendZeroPadding' >
							<argument exp='0' />
							<argument exp='10' />
						</command>
						<command class_type='call' title='192 octets of zeros; BOOTP legacy' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendZeroPadding' >
							<argument exp='0' />
							<argument exp='192' />
						</command>
						<command class_type='call' title='Magic Cookie' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0x63825363' />
						</command>
						<command class_type='comment' title='' comment='Start of request options' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='DHCP Message Type' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='53' />
						</command>
						<command class_type='call' title='Length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='DHCP Discover' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='DHCP Requested Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='50' />
						</command>
						<command class_type='call' title='Length 4 octets' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='4' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[0]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[1]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[2]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[3]' />
						</command>
						<command class_type='call' title='Parameter Request List' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='55' />
						</command>
						<command class_type='call' title='Length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='3' />
						</command>
						<command class_type='call' title='Subnet Mask' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='Routers' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='3' />
						</command>
						<command class_type='call' title='Domain Name Servers' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='6' />
						</command>
						<command class_type='call' title='DHCP Options End' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='255' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxEnd' >
							<argument exp='0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckBroadcastIp' description='Checks to see if the received data is a broadcast IP' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='comment' title='' comment='Check the IP for broadcast address' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x1E] != 0xFF' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x1F] != 0xFF' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x20] != 0xFF' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x21] != 0xFF' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='ETH_MakeReply' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='copy the destination mac from the source' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = Buffer[6]' />
							<exp exp='Buffer[1] = Buffer[7]' />
							<exp exp='Buffer[2] = Buffer[8]' />
							<exp exp='Buffer[3] = Buffer[9]' />
							<exp exp='Buffer[4] = Buffer[10]' />
							<exp exp='Buffer[5] = Buffer[11]' />
						</command>
						<command class_type='calculation' title='fill my mac into src' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[6] = MyMac[0]' />
							<exp exp='Buffer[7] = MyMac[1]' />
							<exp exp='Buffer[8] = MyMac[2]' />
							<exp exp='Buffer[9] = MyMac[3]' />
							<exp exp='Buffer[10] = MyMac[4]' />
							<exp exp='Buffer[11] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='IPv4' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[12] = 8' />
							<exp exp='Buffer[13] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpMakeEth' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='copy the destination mac from the source' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = RemoteMAC[0]' />
							<exp exp='Buffer[1] = RemoteMAC[1]' />
							<exp exp='Buffer[2] = RemoteMAC[2]' />
							<exp exp='Buffer[3] = RemoteMAC[3]' />
							<exp exp='Buffer[4] = RemoteMAC[4]' />
							<exp exp='Buffer[5] = RemoteMAC[5]' />
						</command>
						<command class_type='calculation' title='fill my mac into src' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[6] = MyMac[0]' />
							<exp exp='Buffer[7] = MyMac[1]' />
							<exp exp='Buffer[8] = MyMac[2]' />
							<exp exp='Buffer[9] = MyMac[3]' />
							<exp exp='Buffer[10] = MyMac[4]' />
							<exp exp='Buffer[11] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[12] = 8' />
							<exp exp='Buffer[13] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckForSynAck' description='Checks for a SYNACK flag in the received buffer' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x2F] == 0x12' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_CheckPort' description='Checks to see if the received data is requesting the server port' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='DestPort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
							<exp exp='.DestPort = (Buffer[0x24] &lt;&lt; 8) | Buffer[0x25]' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.DestPort = .Port' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Initialise' description='Initialisation routine for the component once the component is linked to its parent' statediag='0' >
						<return name='Return' type='u32' description='Non-zero to prevent initialisation' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tempstr' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpInitIpArpUdpTcp' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
					</flowline>
				</macro>
				<macro >
					<flowline name='MakeArpRequest' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='ServerIP' type='u8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; 6' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0 + .idx] = 0xFF' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[6] = MyMac[0]' />
							<exp exp='Buffer[7] = MyMac[1]' />
							<exp exp='Buffer[8] = MyMac[2]' />
							<exp exp='Buffer[9] = MyMac[3]' />
							<exp exp='Buffer[10] = MyMac[4]' />
							<exp exp='Buffer[11] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[12] = 0x08' />
							<exp exp='Buffer[13] = 0x06' />
						</command>
						<command class_type='calculation' title='Generate ARP Packet' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x14] = 0x00' />
							<exp exp='Buffer[0x15] = 0x01' />
						</command>
						<command class_type='calculation' title='setup hardware type to ethernet 0x0001' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x0E] = 0x00' />
							<exp exp='Buffer[0x0F] = 0x01' />
						</command>
						<command class_type='calculation' title='setup protocol type to ip 0x0800' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = 0x08' />
							<exp exp='Buffer[0x11] = 0x00' />
						</command>
						<command class_type='calculation' title='setup hardware length to 0x06' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x12] = 0x06' />
							<exp exp='' />
						</command>
						<command class_type='calculation' title='setup protocol length to 0x04' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x13] = 0x04' />
							<exp exp='' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.idx = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; 6' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x20 + .idx] = 0' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x16] = MyMac[0]' />
							<exp exp='Buffer[0x17] = MyMac[1]' />
							<exp exp='Buffer[0x18] = MyMac[2]' />
							<exp exp='Buffer[0x19] = MyMac[3]' />
							<exp exp='Buffer[0x1A] = MyMac[4]' />
							<exp exp='Buffer[0x1B] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.idx = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; 4' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x26 + .idx] = .ServerIP[.idx]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1C] = MyIp[0]' />
							<exp exp='Buffer[0x1D] = MyIp[1]' />
							<exp exp='Buffer[0x1E] = MyIp[2]' />
							<exp exp='Buffer[0x1F] = MyIp[3]' />
							<exp exp='' />
						</command>
						<command class_type='call' title='eth+arp is 42 bytes:' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='42' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='InitialiseDataLengthInfo' description='Initialises the data pointers to allow us to craft a response containing data' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='info_data_len = (Buffer[0x10] &lt;&lt; 8) | Buffer[0x11]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='info_data_len = info_data_len - 20' />
						</command>
						<command class_type='calculation' title='generate len in bytes' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='info_hdr_len = (Buffer[0x2E] &gt;&gt; 4) * 4' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='info_data_len = info_data_len - info_hdr_len' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='info_data_len &lt;= 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='info_data_len = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SaveSendersIPHeader' description='Saves the incoming IP Header' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='x' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.x = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.x &lt; 20' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='RemoteIPHeader[.x] = Buffer[.x + 14]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.x = .x + 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetErrorCode' description='' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = ErrorCode' />
							<exp exp='ErrorCode = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IP_MakeReply' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Set IP protocol version' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x0e] = 0x45' />
							<exp exp='Buffer[0x0f] = 0' />
						</command>
						<command class_type='calculation' title='Length to be set before send' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = 0' />
							<exp exp='Buffer[0x11] = 0' />
						</command>
						<command class_type='calculation' title='set packet identification' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x12] = IP_Identifier &gt;&gt; 8' />
							<exp exp='Buffer[0x13] = IP_Identifier' />
							<exp exp='IP_Identifier = IP_Identifier + 1' />
						</command>
						<command class_type='calculation' title='Dont fragment' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x14] = 0x40' />
							<exp exp='Buffer[0x15] = 0' />
						</command>
						<command class_type='calculation' title='Fill protocol later' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x16] = 0x80 // TTL' />
							<exp exp='Buffer[0x17] = 17 // Protocol default UDP' />
						</command>
						<command class_type='calculation' title='Clear the checksum, calculate later' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x18] = 0' />
							<exp exp='Buffer[0x19] = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1E] = Buffer[0x1A]' />
							<exp exp='Buffer[0x1F] = Buffer[0x1B]' />
							<exp exp='Buffer[0x20] = Buffer[0x1C]' />
							<exp exp='Buffer[0x21] = Buffer[0x1D]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1A] = MyIp[0]' />
							<exp exp='Buffer[0x1B] = MyIp[1]' />
							<exp exp='Buffer[0x1C] = MyIp[2]' />
							<exp exp='Buffer[0x1D] = MyIp[3]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncReadBuffer' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='ENC28J60_READ_BUF_MEM' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='0x3A' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Index &lt; .Length' >
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
									<return exp='Buffer[.Index]' />
									<argument exp='0x3A' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Index = .Index + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[.Index] = 0' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
					</flowline>
				</macro>
				<macro >
					<flowline name='IpMakeIp' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Set IP protocol version' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x0e] = 0x45' />
							<exp exp='Buffer[0x0f] = 0' />
						</command>
						<command class_type='calculation' title='Length to be set before send' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = 0' />
							<exp exp='Buffer[0x11] = 0' />
						</command>
						<command class_type='calculation' title='set packet identification' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x12] = IP_Identifier &gt;&gt; 8' />
							<exp exp='Buffer[0x13] = IP_Identifier' />
							<exp exp='IP_Identifier = IP_Identifier + 1' />
						</command>
						<command class_type='calculation' title='Dont fragment' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x14] = 0x40' />
							<exp exp='Buffer[0x15] = 0' />
						</command>
						<command class_type='calculation' title='Fill protocol later' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x16] = 0x80 // TTL' />
							<exp exp='Buffer[0x17] = 1 // Protocol ICMP' />
						</command>
						<command class_type='calculation' title='Clear the checksum, calculate later' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x18] = 0' />
							<exp exp='Buffer[0x19] = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1A] = MyIp[0]' />
							<exp exp='Buffer[0x1B] = MyIp[1]' />
							<exp exp='Buffer[0x1C] = MyIp[2]' />
							<exp exp='Buffer[0x1D] = MyIp[3]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1E] = RemoteIPHeader[12]' />
							<exp exp='Buffer[0x1F] = RemoteIPHeader[13]' />
							<exp exp='Buffer[0x20] = RemoteIPHeader[14]' />
							<exp exp='Buffer[0x21] = RemoteIPHeader[15]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='PacketReceive' description='Attempts to receive a data packet from the ENC28J60 module.
Returns the number of bytes received.' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RxStat' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RetVal' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='check if a packet has been received and buffered' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadRegister' >
							<return exp='.RetVal' />
							<argument exp='0x39' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.RetVal = 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Set the read pointer to the start of the received packet' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0' />
							<argument exp='NextPacketPtr' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='1' />
							<argument exp='NextPacketPtr &gt;&gt; 8' />
						</command>
						<command class_type='call' title='read the next packet pointer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='NextPacketPtr' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='read the next packet pointer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RetVal' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='NextPacketPtr = NextPacketPtr | (.RetVal &lt;&lt; 8)' />
						</command>
						<command class_type='call' title='read the packet length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.Length' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='read the packet length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RetVal' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Length = .Length | (.RetVal &lt;&lt; 8)' />
							<exp exp='.Length = .Length - 4' />
						</command>
						<command class_type='call' title='read the receive status ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RxStat' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='read the receive status ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RetVal' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.RxStat = .RxStat | (.RetVal &lt;&lt; 8)' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Length &gt; (BufferSize)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Length = BufferSize' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='check CRC and symbol errors' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.RxStat &amp; 0x80) = 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Length = 0' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadBuffer' >
									<argument exp='.Length' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Move the RX read pointer to the start of the next received packe' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0C' />
							<argument exp='NextPacketPtr' />
						</command>
						<command class_type='call' title='Move the RX read pointer to the start of the next received packe' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0D' />
							<argument exp='NextPacketPtr &gt;&gt; 8' />
						</command>
						<command class_type='call' title='decrement the packet counter indicate we are done with this pack' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x80' />
							<argument exp='0x1E' />
							<argument exp='0x40' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .Length' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckArpPacketIsMyreplyArp' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='if packet type is not arp packet exit from function' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[12] != Buffer[0x08] || Buffer[13] != Buffer[0x06]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='check arp request opcode' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x14] != Buffer[0x00] || Buffer[0x15] != Buffer[0x02]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='if destination ip address in arp packet not match with avr ip ad' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x26] != MyIp[0]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='if destination ip address in arp packet not match with avr ip ad' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x27] != MyIp[1]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='if destination ip address in arp packet not match with avr ip ad' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x28] != MyIp[2]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='if destination ip address in arp packet not match with avr ip ad' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x29] != MyIp[3]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='DNS_SendQuery' description='Send the URL query request to the DNS server.
Returns non-zero if successful' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='URL' type='T8*' description='URL address string' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<local name='end' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='start' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TransactionID = TransactionID + 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CreateUDPSocket' >
							<return exp='.Return' />
							<argument exp='0' />
							<argument exp='5555' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationIP' >
							<argument exp='DNS_IP[0]' />
							<argument exp='DNS_IP[1]' />
							<argument exp='DNS_IP[2]' />
							<argument exp='DNS_IP[3]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationPort' >
							<argument exp='53' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = DNS_MAC[0]' />
							<exp exp='Buffer[1] = DNS_MAC[1]' />
							<exp exp='Buffer[2] = DNS_MAC[2]' />
							<exp exp='Buffer[3] = DNS_MAC[3]' />
							<exp exp='Buffer[4] = DNS_MAC[4]' />
							<exp exp='Buffer[5] = DNS_MAC[5]' />
							<exp exp='.Return = 1' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxStart' >
									<argument exp='0' />
								</command>
								<command class_type='call' title='Transaction ID' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='TransactionID' />
								</command>
								<command class_type='call' title='Standard Query' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='0x0100' />
								</command>
								<command class_type='call' title='No of Questions' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='1' />
								</command>
								<command class_type='call' title='No of answers' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='No of Auth' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='No of Additonal' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.start = 0' />
									<exp exp='.end = 0' />
									<exp exp='.length = 0' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.length &gt; 0' start='0' >
									<flowline >
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='(.URL[.end] != 0) &amp;&amp; (.URL[.end] != &apos;.&apos;)' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.end = .end + 1' />
												</command>
											</flowline>
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.length = .end - .start' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.length &gt; 0' swap='0' >
											<flowline >
												<command class_type='comment' title='' comment='send the sub-string' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
													<argument exp='0' />
													<argument exp='.length' />
												</command>
												<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.start &lt; .end' >
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
															<argument exp='0' />
															<argument exp='.URL[.start]' />
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.start = .start + 1' />
														</command>
													</flowline>
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.URL[.end] = &apos;.&apos;' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.start = .start + 1' />
															<exp exp='.end = .start' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Host' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='1' />
								</command>
								<command class_type='call' title='In' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
									<argument exp='0' />
									<argument exp='1' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxEnd' >
									<argument exp='0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DebugPrintNumber' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='text' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='n' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='.text' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.n' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='&quot;\r\n&quot;' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpMakeEthIpNew' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='DestinationMAC' type='u8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</param>
						<command class_type='calculation' title='copy the destination mac' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = .DestinationMAC[0]' />
							<exp exp='Buffer[1] = .DestinationMAC[1]' />
							<exp exp='Buffer[2] = .DestinationMAC[2]' />
							<exp exp='Buffer[3] = .DestinationMAC[3]' />
							<exp exp='Buffer[4] = .DestinationMAC[4]' />
							<exp exp='Buffer[5] = .DestinationMAC[5]' />
						</command>
						<command class_type='calculation' title='fill my mac into src' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[6] = MyMac[0]' />
							<exp exp='Buffer[7] = MyMac[1]' />
							<exp exp='Buffer[8] = MyMac[2]' />
							<exp exp='Buffer[9] = MyMac[3]' />
							<exp exp='Buffer[10] = MyMac[4]' />
							<exp exp='Buffer[11] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[12] = 8' />
							<exp exp='Buffer[13] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpMakeIpTcpNew' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='DestIp' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<command class_type='calculation' title='set ipv4 and header length' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x0E] = 0x45' />
						</command>
						<command class_type='calculation' title='set TOS to default 0x00' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x0F] = 0x00' />
						</command>
						<command class_type='calculation' title='set total length' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = .Length &gt;&gt; 8' />
							<exp exp='Buffer[0x11] = .Length' />
						</command>
						<command class_type='calculation' title='set packet identification' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x12] = IP_Identifier &gt;&gt; 8' />
							<exp exp='Buffer[0x13] = IP_Identifier' />
							<exp exp='IP_Identifier = IP_Identifier + 1' />
						</command>
						<command class_type='calculation' title='set fragment flags' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x14] = 0x00' />
							<exp exp='Buffer[0x15] = 0x00' />
						</command>
						<command class_type='calculation' title='set TTL' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x16] = 128' />
						</command>
						<command class_type='calculation' title='set ip packettype to tcp/udp/icmp...' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x17] = 0x06' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1E] = .DestIp[0]' />
							<exp exp='Buffer[0x1F] = .DestIp[1]' />
							<exp exp='Buffer[0x20] = .DestIp[2]' />
							<exp exp='Buffer[0x21] = .DestIp[3]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1A] = MyIp[0]' />
							<exp exp='Buffer[0x1B] = MyIp[1]' />
							<exp exp='Buffer[0x1C] = MyIp[2]' />
							<exp exp='Buffer[0x1D] = MyIp[3]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpFillIpHdrChecksum' />
					</flowline>
				</macro>
				<macro >
					<flowline name='IpSetSourcePort' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType' >
							<case >
								<flowline />
							</case>
							<case exp='SOCKET_TYPE_UDP' >
								<flowline >
									<command class_type='calculation' title='Destination port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='// LocalPort = .Port ?' />
										<exp exp='Buffer[34] = .Port &gt;&gt; 8' />
										<exp exp='Buffer[35] = .Port' />
										<exp exp='' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_TCP' >
								<flowline />
							</case>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_SendRequest' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='DHCP_XID = DHCP_XID + 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CreateUDPSocket' >
							<return exp='.result' />
							<argument exp='0' />
							<argument exp='68' />
						</command>
						<command class_type='comment' title='' comment='Overwrite the defaults' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='broadcast destination mac ' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = 255' />
							<exp exp='Buffer[1] = 255' />
							<exp exp='Buffer[2] = 255' />
							<exp exp='Buffer[3] = 255' />
							<exp exp='Buffer[4] = 255' />
							<exp exp='Buffer[5] = 255' />
						</command>
						<command class_type='call' title='Source IP 0.0.0.0' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetSourceIP' >
							<argument exp='0' />
							<argument exp='0' />
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Destination IP 255.255.255.255' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationIP' >
							<argument exp='255' />
							<argument exp='255' />
							<argument exp='255' />
							<argument exp='255' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationPort' >
							<argument exp='67' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxStart' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='op = REQUEST' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='htype = 1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='hlen = 6' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='6' />
						</command>
						<command class_type='call' title='hops = 0' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Transaction ID (xid)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='DHCP_XID' />
						</command>
						<command class_type='call' title='secs' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='flags (broadcast reply)' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='flags (broadcast reply)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='0' />
							<argument exp='0x8000' />
						</command>
						<command class_type='call' title='ciaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='yiaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[0]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[1]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[2]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[3]' />
						</command>
						<command class_type='call' title='giaddr' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Client hardware address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[0]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[1]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[2]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[3]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[4]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyMAC[5]' />
						</command>
						<command class_type='call' title='Client hardware address padding to total of 16 octets' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendZeroPadding' >
							<argument exp='0' />
							<argument exp='10' />
						</command>
						<command class_type='call' title='192 octets of zeros; BOOTP legacy' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendZeroPadding' >
							<argument exp='0' />
							<argument exp='192' />
						</command>
						<command class_type='call' title='Magic Cookie' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint32' >
							<argument exp='0' />
							<argument exp='0x63825363' />
						</command>
						<command class_type='comment' title='' comment='Start of request options' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='DHCP Message Type' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='53' />
						</command>
						<command class_type='call' title='Length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='1' />
						</command>
						<command class_type='call' title='DHCP Request' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='3' />
						</command>
						<command class_type='call' title='DHCP Requested Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='50' />
						</command>
						<command class_type='call' title='Length 4 octets' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='4' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[0]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[1]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[2]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyIP[3]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='54' />
						</command>
						<command class_type='call' title='Length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='4' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[0]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[1]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[2]' />
						</command>
						<command class_type='call' title='DHCP Server' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='MyDHCP[3]' />
						</command>
						<command class_type='call' title='DHCP Options End' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='0' />
							<argument exp='255' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxEnd' >
							<argument exp='0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadHeader' description='Once data in a particular channel has been received, the header will be filled with information about the received data.  This macro will return the information in the header.  The idx parameter specifies which byte of information in the header to read ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Idx' type='u8' description='Specifies the byte index to return' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = RemoteIPHeader[.Idx]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxSkipBytes' description='Often when receiving data packets, it may be necessary to ignore large sections of the data.  This can be achieved by reading each byte individually (and ignoring the returned data), but a better way is to use this Rx_skipbytes macro.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Count' type='u8' description='Specifies how many bytes to skip' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='comment' title='' comment='Channel is currently ignored' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='BufferDataReadIdx = BufferDataReadIdx + .Count' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='BufferDataReadIdx &lt; BufferDataLength' swap='0' >
							<flowline />
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='BufferDataReadIdx = BufferDataLength' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetDestination' description='This is used in IP and UDP modes to set the destination of the intended data transfer.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<param name='Port' type='u16' description='Destination Port' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='IsSubnet' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='CHECK WE STILL NEED THESE ?' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='RemoteIPHeader[12] = .IP[0]' />
							<exp exp='RemoteIPHeader[13] = .IP[1]' />
							<exp exp='RemoteIPHeader[14] = .IP[2]' />
							<exp exp='RemoteIPHeader[15] = .IP[3]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='RemoteIPHeader[16] = .IP[0]' />
							<exp exp='RemoteIPHeader[17] = .IP[1]' />
							<exp exp='RemoteIPHeader[18] = .IP[2]' />
							<exp exp='RemoteIPHeader[19] = .IP[3]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='RemotePort = .Port' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetDestinationMAC' >
							<return exp='.Return' />
							<argument exp='.IP' />
							<argument exp='RemoteMAC' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationIP' >
									<argument exp='.IP[0]' />
									<argument exp='.IP[1]' />
									<argument exp='.IP[2]' />
									<argument exp='.IP[3]' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetDestinationPort' >
									<argument exp='.Port' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateIPSocket' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Protocol' type='u8' description='Specifies which IP protocol to use' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Broadcast' type='u8' description='Allows broadcast type packets to be sent and received' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='SocketType = SOCKET_TYPE_IP' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIp' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetProtocol' >
							<argument exp='.Protocol' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='// Move write pointer to end of Ethernet and IP headers' />
							<exp exp='BufferDataWriteIdx = 34' />
						</command>
						<command class_type='calculation' title='Opened socket correctly' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_HasReply' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxDataAvailable' >
							<return exp='.Return' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(Buffer[0x17] = PROTOCOL_UDP) &amp;&amp; (LocalPort = 68) &amp;&amp; (RemotePort = 67)' swap='0' >
									<flowline />
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = 0' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpChecksum' description='' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Type' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Sum' type='u32' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='temp2' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Sum = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Type = 1' swap='0' >
							<flowline >
								<command class_type='calculation' title='protocol udp' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = .Sum + 0x11' />
								</command>
								<command class_type='calculation' title='the length here is the length of udp' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = .Sum + (.Length - 8)' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Type = 2' swap='0' >
							<flowline >
								<command class_type='calculation' title='protocol udp' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = .Sum + 0x06' />
								</command>
								<command class_type='calculation' title='the length here is the length of tcp ' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = .Sum + (.Length - 8)' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='loop' title='build the sum of 16bit words' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Length &gt; 1' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.temp2 = (Buffer[.Idx] &lt;&lt; 8) | Buffer[.Idx + 1]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = .Sum + .temp2' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Idx = .Idx + 2' />
									<exp exp='.Length = .Length - 2' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='if there is a byte left then add it (padded with zero)' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Length' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.temp2 = (Buffer[.Idx] &lt;&lt; 8)' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = .Sum + .temp2' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='native' title='C Code' ccode='while (FCL_SUM &gt;&gt; 16)
{
  FCL_SUM = (FCL_SUM &amp; 0xFFFF) + (FCL_SUM &gt;&gt; 16);
}' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' language='C' />
						<command class_type='loop' title='Loop' disable='1' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Sum / 65536' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.temp2 = .Sum &amp; 0xFFFF' />
								</command>
								<command class_type='calculation' title='now calculate the sum over the bytes in the sum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Sum = (.Sum / 65536) + .temp2' />
								</command>
							</flowline>
						</command>
						<command class_type='native' title='C Code' ccode='FCR_RETVAL = (MX_UINT16) FCL_SUM ^ 0xFFFF;' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' language='C' />
						<command class_type='calculation' title='build 1&apos;s complement:' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = ~ .Sum' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckForIp' description='Checks to see if the received data is an IP request
' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Length &lt; 42' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[12] != 0x08 || Buffer[13] != 0x00' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x0E] != 0x45' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='EncWriteData' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='32' />
						</param>
						<param name='Size' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='FlashTx' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='ENC28J60_WRITE_BUF_MEM' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='0x7A' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Index &lt; .Size' >
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
									<argument exp='.Data[.Index]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Index = .Index + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
					</flowline>
				</macro>
				<macro >
					<flowline name='GetLocalIP' description='Gets the local IP address' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP' type='u8' description='4-byte Array to store the IP address' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.IP[0] = MyIP[0]' />
							<exp exp='.IP[1] = MyIP[1]' />
							<exp exp='.IP[2] = MyIP[2]' />
							<exp exp='.IP[3] = MyIP[3]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DNS_SkipQuestion' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.length &gt; 0' start='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
									<return exp='.length' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
									<argument exp='0' />
									<argument exp='.length' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Skip Type and Class (Ints)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
							<argument exp='0' />
							<argument exp='4' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='UDP_ProcessPacket' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='received' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='LocalPort = (Buffer[36] &lt;&lt; 8) + Buffer[37]' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SaveSendersIPHeader' />
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='RemotePort = (Buffer[34] &lt;&lt; 8) + Buffer[35]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='BufferDataLength = .received' />
									<exp exp='BufferDataReadIdx = 42' />
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DNS_ParseResponse' description='Extract the DNS IP address info from the response' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<local name='Uint16' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Questions' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Answers' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Auths' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Additional' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Type' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxStart' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
							<return exp='.Uint16' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Uint16 = TransactionID' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
									<return exp='.Uint16' />
									<argument exp='0' />
								</command>
								<command class_type='decision' title='Check for standard query response' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Uint16 = 0x8180' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
											<return exp='.Questions' />
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
											<return exp='.Answers' />
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
											<return exp='.Auths' />
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
											<return exp='.Additional' />
											<argument exp='0' />
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Questions &gt; 0' >
											<flowline >
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DNS_SkipQuestion' >
													<argument exp='0' />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Questions = .Questions - 1' />
												</command>
											</flowline>
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Answers &gt; 0' >
											<flowline >
												<command class_type='call' title='Skip Name' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
													<argument exp='0' />
													<argument exp='2' />
												</command>
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
													<return exp='.Type' />
													<argument exp='0' />
												</command>
												<command class_type='call' title='Skip Class and TTL' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
													<argument exp='0' />
													<argument exp='6' />
												</command>
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadUint16' >
													<return exp='.Length' />
													<argument exp='0' />
												</command>
												<command class_type='decision' title='check for host address' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Type = 1' swap='0' >
													<flowline >
														<command class_type='comment' title='' comment='Could check that length = 4' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
															<return exp='.IP[0]' />
															<argument exp='0' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
															<return exp='.IP[1]' />
															<argument exp='0' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
															<return exp='.IP[2]' />
															<argument exp='0' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
															<return exp='.IP[3]' />
															<argument exp='0' />
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = 1' />
														</command>
													</flowline>
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
															<argument exp='0' />
															<argument exp='.Length' />
														</command>
													</flowline>
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Answers = .Answers - 1' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxFlushData' >
							<argument exp='0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_GetFlags' description='Checks to what kind of TCP type the received data is requesting.
Returns a bit field specifying the type of request.
0x01 = Ack Requires, 0x02 = Synchronise
0x10 = Ack
' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = Buffer[0x2F]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_MakeHead' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='RelAckNum' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Mss' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='CpSeq' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='4' setinit='4' />
						<local name='tseq' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Set Source and Destination Ports' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x24] = Buffer[0x22]' />
							<exp exp='Buffer[0x25] = Buffer[0x23]' />
							<exp exp='' />
							<exp exp='Buffer[0x22] = .Port &gt;&gt; 8' />
							<exp exp='Buffer[0x23] = .Port' />
						</command>
						<command class_type='loop' title='Loop' disable='1' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &gt; 0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.RelAckNum = Buffer[0x26 + .idx - 1] + .RelAckNum' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.tseq = Buffer[0x2A + .idx - 1]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x2A + .idx - 1] = .RelAckNum' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.CpSeq' swap='0' >
									<flowline >
										<command class_type='calculation' title='copy the acknum sent to us into the sequence number' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='Buffer[0x26 + .idx - 1] = .tseq' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='Buffer[0x26 + .idx - 1] = 0' />
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.RelAckNum = .RelAckNum &gt;&gt; 8' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx - 1' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' disable='1' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.CpSeq = 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='put inital seq number' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x26] = 0' />
									<exp exp='Buffer[0x27] = 0' />
								</command>
								<command class_type='calculation' title='' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x28] = SeqNum' />
									<exp exp='Buffer[0x29] = 0' />
								</command>
								<command class_type='calculation' title='' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='SeqNum = SeqNum + 2' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='zero the checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = 0' />
							<exp exp='Buffer[0x33] = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Mss' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='TCP Header Length (for checksum) is 24 bytes
buffer it is checking is +8 = 32
' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='comment' title='' comment='Commented out from here' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='calculation' title='the only option we set is MSS to 1408:' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x36] = 2' />
									<exp exp='Buffer[0x37] = 4' />
									<exp exp='Buffer[0x38] = 5' />
									<exp exp='Buffer[0x39] = 0x80' />
									<exp exp='' />
									<exp exp='Buffer[0x2E] = 0x60' />
								</command>
								<command class_type='calculation' title='the only option we set is MSS to 1408:' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x36] = 2' />
									<exp exp='Buffer[0x37] = 4' />
									<exp exp='Buffer[0x38] = 5' />
									<exp exp='Buffer[0x39] = 0x50' />
									<exp exp='Buffer[0x3A] = 1' />
									<exp exp='Buffer[0x3B] = 1' />
									<exp exp='Buffer[0x3C] = 4' />
									<exp exp='Buffer[0x3D] = 2' />
									<exp exp='Buffer[0x3E] = 1' />
									<exp exp='Buffer[0x3F] = 3' />
									<exp exp='Buffer[0x40] = 3' />
									<exp exp='Buffer[0x41] = 7' />
									<exp exp='' />
									<exp exp='' />
									<exp exp='Buffer[0x2E] = 0x80' />
								</command>
								<command class_type='calculation' title='total length field in the IP header' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x10] = 0' />
									<exp exp='Buffer[0x11] = 52' />
								</command>
								<command class_type='comment' title='' comment='Comment out end' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='calculation' title='the only option we set is MSS to 1460' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x36] = 2' />
									<exp exp='Buffer[0x37] = 4' />
									<exp exp='Buffer[0x38] = 5' />
									<exp exp='Buffer[0x39] = 0xb4' />
									<exp exp='' />
									<exp exp='Buffer[0x2E] = 0x60' />
								</command>
								<command class_type='calculation' title='total length field in the IP header' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x10] = 0' />
									<exp exp='Buffer[0x11] = 44' />
								</command>
								<command class_type='comment' title='' comment='new attempt from here' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='calculation' title='copy of browser send' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[54] = 0x02' />
									<exp exp='Buffer[55] = 0x04' />
									<exp exp='Buffer[56] = 0x05' />
									<exp exp='Buffer[57] = 0xB4' />
									<exp exp='Buffer[58] = 0x01' />
									<exp exp='Buffer[59] = 0x03' />
									<exp exp='Buffer[60] = 0x03' />
									<exp exp='Buffer[61] = 0x08' />
									<exp exp='Buffer[62] = 0x01' />
									<exp exp='Buffer[63] = 0x01' />
									<exp exp='Buffer[64] = 0x04' />
									<exp exp='Buffer[65] = 0x02' />
									<exp exp='' />
									<exp exp='Buffer[16] = 0' />
									<exp exp='Buffer[17] = 52' />
									<exp exp='' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='no options:' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x2E] = 0x50' />
								</command>
								<command class_type='calculation' title='total length field in the IP header' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x10] = 0' />
									<exp exp='Buffer[0x11] = 40' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckForPing' description='Checks to see if the received data is a Ping request' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='Ping Request' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x17] == 0x01 &amp;&amp; Buffer[0x22] == 8' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxStart' description='This macro indicates the start of data transmission for the specified buffer.  In TCP mode, data transmission can only begin once the socket has become established.  In other modes, data transmission can occur as soon as the socket has been opened.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_ptr_val' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_wr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_mem' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType' >
							<case >
								<flowline />
							</case>
							<case exp='SOCKET_TYPE_MAC' >
								<flowline >
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='BufferDataWriteIdx = 0' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_IP' >
								<flowline >
									<command class_type='comment' title='' comment='Load the tranmit buffer with the saved (Remote) destination IP and MAC
These will be either from the received packet,
or the user will have overwritten via SetDestination etc
' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='BufferDataWriteIdx = 34' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_UDP' >
								<flowline >
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='BufferDataWriteIdx = 42' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_TCP' >
								<flowline >
									<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='// BufferDataWriteIdx =' />
									</command>
								</flowline>
							</case>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SaveSendersMAC' description='Saves the MAC address from locations 6-11 of the IP Header' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='RemoteMAC[0] = Buffer[6]' />
							<exp exp='RemoteMAC[1] = Buffer[7]' />
							<exp exp='RemoteMAC[2] = Buffer[8]' />
							<exp exp='RemoteMAC[3] = Buffer[9]' />
							<exp exp='RemoteMAC[4] = Buffer[10]' />
							<exp exp='RemoteMAC[5] = Buffer[11]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpSetDestinationPort' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType' >
							<case >
								<flowline />
							</case>
							<case exp='SOCKET_TYPE_UDP' >
								<flowline >
									<command class_type='calculation' title='Destination port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='// RemotePort = .Port ?' />
										<exp exp='Buffer[36] = .Port &gt;&gt; 8' />
										<exp exp='Buffer[37] = .Port' />
										<exp exp='' />
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_TCP' >
								<flowline />
							</case>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetBufferUint32' description='' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = Buffer[.Index]' />
							<exp exp='.Return = (.Return &lt;&lt; 8) + Buffer[.Index + 1]' />
							<exp exp='.Return = (.Return &lt;&lt; 8) + Buffer[.Index + 2]' />
							<exp exp='.Return = (.Return &lt;&lt; 8) + Buffer[.Index + 3]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetModuleRevision' description='Requets the module revision number and returns the value supplied by the module&apos;s firmware.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadRegister' >
							<return exp='.Return' />
							<argument exp='0x72' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadByte' description='A call to this macro will return a byte of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='BufferDataReadIdx &lt; BufferDataLength' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = Buffer[BufferDataReadIdx]' />
									<exp exp='BufferDataReadIdx = BufferDataReadIdx + 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateUDPSocket' description='This macro creates a socket for sending and receiving UDP data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Src_Port' type='u16' description='Port Number' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='SocketType = SOCKET_TYPE_UDP' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIp' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetProtocol' >
							<argument exp='PROTOCOL_UDP' />
						</command>
						<command class_type='calculation' title='Create UDP Header' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='LocalPort = .Src_Port' />
							<exp exp='Buffer[34] = .Src_Port &gt;&gt; 8 // Source Port' />
							<exp exp='Buffer[35] = .Src_Port' />
							<exp exp='Buffer[36] = 0 // Destination port' />
							<exp exp='Buffer[37] = 0' />
							<exp exp='Buffer[38] = 0 // Message length, fill later' />
							<exp exp='Buffer[39] = 0' />
							<exp exp='Buffer[40] = 0 // Checksum, not used' />
							<exp exp='Buffer[41] = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='// Move write pointer to end of Ethernet, IP and UDP headers' />
							<exp exp='BufferDataWriteIdx = 42' />
						</command>
						<command class_type='calculation' title='Opened socket correctly' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendUint16' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Uint16' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='.Uint16 &gt;&gt; 8' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='.Uint16' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Property' description='Sent when a property has been changed by the User' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tempstr' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</local>
						<local name='ObjHandle' type='h32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Override Sim Type as TCP IP mode currently unsupported' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
							<argument exp='this' />
							<argument exp='&quot;SimType&quot;' />
							<argument exp='1' />
						</command>
						<command class_type='sim' title='Comms Flashers' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
							<argument exp='LibraryComponent1' />
							<argument exp='&quot;ShowComms&quot;' />
							<argument exp='SimType' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SImType' swap='0' >
							<flowline >
								<command class_type='sim' title='SPI icon ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
									<argument exp='LibraryComponent1' />
									<argument exp='&quot;OutputIcon::CommsType&quot;' />
									<argument exp='5' />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_6&quot;' />
									<argument exp='1' />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_7&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='sim' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='GetConsoleHandle' >
									<return exp='.ObjHandle' />
								</command>
								<command class_type='sim' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='SetConsoleHandle' >
									<argument exp='.ObjHandle' />
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='No icon ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
									<argument exp='LibraryComponent1' />
									<argument exp='&quot;OutputIcon::CommsType&quot;' />
									<argument exp='255' />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_6&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_7&quot;' />
									<argument exp='1' />
								</command>
								<command class_type='sim' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='SetConsoleHandle' >
									<argument exp='0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_6_Bytes' description='This macro returns a non-zero value when the next 6 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 2 bytes and 4 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte3' type='u8' description='Specifies the value of the third byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte4' type='u8' description='Specifies the value of the fourth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte5' type='u8' description='Specifies the value of the fifth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte6' type='u8' description='Specifies the value of the sixth byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte1' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte3' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte4' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte5' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte6' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetLocalIP' description='This macro sets up the Internet E-Block&apos;s own IP address.  In most circumstances, this macro will not be required as the IP address setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='MyIP[0] = .IP0' />
							<exp exp='MyIP[1] = .IP1' />
							<exp exp='MyIP[2] = .IP2' />
							<exp exp='MyIP[3] = .IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncReadOp' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Op' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='.Op | (.Address &amp; ADDR_MASK)' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<return exp='.Return' />
							<argument exp='0x00' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Address &amp; 0x80' swap='0' >
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
									<return exp='.Return' />
									<argument exp='0x00' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
					</flowline>
				</macro>
				<macro >
					<flowline name='IpMakeUdpReplyFromRequest' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Data' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='DataLength' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='ck' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.DataLength &gt; 220' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.DataLength = 220' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = 0' />
							<exp exp='Buffer[0x11] = 28 + .DataLength' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIp' />
						<command class_type='calculation' title='Assign Destination Port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x24] = .Port &gt;&gt; 8' />
							<exp exp='Buffer[0x25] = .Port' />
						</command>
						<command class_type='calculation' title='calculte the udp length:' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x26] = 0' />
							<exp exp='Buffer[0x27] = 8 + .DataLength' />
						</command>
						<command class_type='calculation' title='Zero the checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x28] = 0' />
							<exp exp='Buffer[0x29] = 0' />
						</command>
						<command class_type='loop' title='Copy the data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; .DataLength' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x2A + .idx] = .Data[.idx]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Calculate the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='16 + .DataLength' />
							<argument exp='1' />
						</command>
						<command class_type='calculation' title='Zero the checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x28] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x29] = .ck' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='42 + .DataLength' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_AddVarSize' description='Sent to a component to allow dynamic amendment of global array-size declarations' statediag='0' >
						<return name='Return' type='u32' description='Non-zero to include definition - initialised on call' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='VarName' type='T8' description='The original Flowcode variable' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='ExpandName' type='T8' description='The expanded variable-size name' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='Expansion' type='T8*' description='The expanded string to inline to the code' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatch_2_Bytes' description='This macro returns a non-zero value when the next 2 bytes of data in the specified channel&apos;s reception buffer are the same as those passed as parameters.  There are similar functions that check for 4 bytes and 6 bytes.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte1' type='u8' description='Specifies the value of the first byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Byte2' type='u8' description='Specifies the value of the second byte' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte1' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != .byte2' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_ParseOffer' description='Extract the DHCP info from the received Offer reply' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='option' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='x' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxStart' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.result' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Check for DHCP Reply (Offer)' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result = 2' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
									<argument exp='0' />
									<argument exp='15' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
									<return exp='MyIP[0]' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
									<return exp='MyIP[1]' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
									<return exp='MyIP[2]' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
									<return exp='MyIP[3]' />
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
									<argument exp='0' />
									<argument exp='220' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.x = 12' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.x &gt; 0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.x = .x - 1' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
											<return exp='.option' />
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
											<return exp='.length' />
											<argument exp='0' />
										</command>
										<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.option' >
											<case >
												<flowline >
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxSkipBytes' >
														<argument exp='0' />
														<argument exp='.length' />
													</command>
												</flowline>
											</case>
											<case exp='1' >
												<flowline >
													<command class_type='call' title='Subnet Mask (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MySubnet[0]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MySubnet[1]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MySubnet[2]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MySubnet[3]' />
														<argument exp='0' />
													</command>
												</flowline>
											</case>
											<case exp='3' >
												<flowline >
													<command class_type='call' title='Router/Gateway (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyGateway[0]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyGateway[1]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyGateway[2]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyGateway[3]' />
														<argument exp='0' />
													</command>
												</flowline>
											</case>
											<case exp='6' >
												<flowline >
													<command class_type='call' title='DNS (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='DNS_IP[0]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='DNS_IP[1]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='DNS_IP[2]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='DNS_IP[3]' />
														<argument exp='0' />
													</command>
												</flowline>
											</case>
											<case exp='54' >
												<flowline >
													<command class_type='call' title='DHCP Server (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyDHCP[0]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='DHCP Server (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyDHCP[1]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='DHCP Server (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyDHCP[2]' />
														<argument exp='0' />
													</command>
													<command class_type='call' title='DHCP Server (assume 4 bytes)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
														<return exp='MyDHCP[3]' />
														<argument exp='0' />
													</command>
												</flowline>
											</case>
											<case exp='255' >
												<flowline >
													<command class_type='calculation' title='End' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
														<exp exp='.x = 0' />
													</command>
												</flowline>
											</case>
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='Copy the MAC, as the server does not seem to respond to an ARP' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='DNS_MAC[0] = Buffer[6]' />
									<exp exp='DNS_MAC[1] = Buffer[7]' />
									<exp exp='DNS_MAC[2] = Buffer[8]' />
									<exp exp='DNS_MAC[3] = Buffer[9]' />
									<exp exp='DNS_MAC[4] = Buffer[10]' />
									<exp exp='DNS_MAC[5] = Buffer[11]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxFlushData' >
									<argument exp='0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='MakeArpAnswerFromRequest' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='x' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='calculation' title='force ARP' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[12] = 8' />
							<exp exp='Buffer[13] = 6' />
						</command>
						<command class_type='calculation' title='ARP Reply' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x14] = 0' />
							<exp exp='Buffer[0x15] = 2' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x20] = Buffer[0x16]' />
							<exp exp='Buffer[0x21] = Buffer[0x17]' />
							<exp exp='Buffer[0x22] = Buffer[0x18]' />
							<exp exp='Buffer[0x23] = Buffer[0x19]' />
							<exp exp='Buffer[0x24] = Buffer[0x1A]' />
							<exp exp='Buffer[0x25] = Buffer[0x1B]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x16] = MyMac[0]' />
							<exp exp='Buffer[0x17] = MyMac[1]' />
							<exp exp='Buffer[0x18] = MyMac[2]' />
							<exp exp='Buffer[0x19] = MyMac[3]' />
							<exp exp='Buffer[0x1A] = MyMac[4]' />
							<exp exp='Buffer[0x1B] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x26] = Buffer[0x1C]' />
							<exp exp='Buffer[0x27] = Buffer[0x1D]' />
							<exp exp='Buffer[0x28] = Buffer[0x1E]' />
							<exp exp='Buffer[0x29] = Buffer[0x1F]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1C] = MyIp[0]' />
							<exp exp='Buffer[0x1D] = MyIp[1]' />
							<exp exp='Buffer[0x1E] = MyIp[2]' />
							<exp exp='Buffer[0x1F] = MyIp[3]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.x = 42' />
						</command>
						<command class_type='loop' title='18 bytes of padding' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.x &lt; 60' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[.x] = 0' />
									<exp exp='.x = .x + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='60' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadString' description='A call to this macro will return a string of data in the reception buffer of the specified channel.  It will also internally increment a pointer to that data so that the next call to &apos;Rx_readbyte&apos; (or any other read function) will read the next byte ' statediag='0' >
						<return name='Return' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;\x00&quot;' setinit='' >
							<array size='2000' />
						</return>
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Length' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.idx = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; .Length' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
									<return exp='.Return[.idx]' />
									<argument exp='.Channel' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx + 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxEnd' description='Once the transmit buffer has been filled with data, call this macro to actually send the data.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType' >
							<case >
								<flowline />
							</case>
							<case exp='SOCKET_TYPE_MAC' >
								<flowline >
									<command class_type='loop' title='Pad to 60 bytes' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='BufferDataWriteIdx &lt; 60' >
										<flowline >
											<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
												<argument exp='.Channel' />
												<argument exp='0' />
											</command>
										</flowline>
									</command>
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_IP' >
								<flowline >
									<command class_type='calculation' title='Set the IP header length field' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='.length = BufferDataWriteIdx - 14 // minus ETH header length' />
										<exp exp='Buffer[0x10] = .length &gt;&gt; 8' />
										<exp exp='Buffer[0x11] = .length' />
									</command>
									<command class_type='call' title='Calculate and write the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpFillIpHdrChecksum' />
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_UDP' >
								<flowline >
									<command class_type='calculation' title='Set the IP header length field' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='.length = BufferDataWriteIdx - 14 // minus ETH header length' />
										<exp exp='Buffer[0x10] = .length &gt;&gt; 8' />
										<exp exp='Buffer[0x11] = .length' />
									</command>
									<command class_type='calculation' title='Set UDP header length field' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
										<exp exp='.length = BufferDataWriteIdx - 34 // minus ETH and IP header length' />
										<exp exp='Buffer[38] = .length &gt;&gt; 8' />
										<exp exp='Buffer[39] = .length' />
									</command>
									<command class_type='call' title='Calculate and write the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpFillIpHdrChecksum' />
								</flowline>
							</case>
							<case exp='SOCKET_TYPE_TCP' >
								<flowline />
							</case>
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='BufferDataWriteIdx' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='BufferDataLength = 0' />
							<exp exp='BufferDataWriteIdx = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpSetDestinationIP' description='Sets the destination in the current IP header prior to sending' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1e] = .IP0' />
							<exp exp='Buffer[0x1f] = .IP1' />
							<exp exp='Buffer[0x20] = .IP2' />
							<exp exp='Buffer[0x21] = .IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncReadData' description='Reads the received packet into data buffer' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='64' />
						</param>
						<param name='Size' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='FlashRx' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='ENC28J60_READ_BUF_MEM' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='0x3A' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Index &lt; .Size' >
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
									<return exp='.Data[.Index]' />
									<argument exp='0x3A' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Index = .Index + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Data[.Index] = 0' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
					</flowline>
				</macro>
				<macro >
					<flowline name='DNS_Lookup' description='Resolve the URL into an IP address via the DNS server.
Returns non-zero if successful' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='URL' type='T8*' description='URL address string' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='IP' type='u8' description='Returned IPv4 address' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<local name='timeout' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DNS_SendQuery' >
							<argument exp='.URL' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.timeout = 20000' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.timeout &gt; 0' >
							<flowline >
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='0' />
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DNS_HasResponse' >
									<return exp='.Return' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.timeout = 0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DNS_ParseResponse' >
											<return exp='.Return' />
											<argument exp='.IP' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_Close' description='When an established TCP connection has finished transmission of data, either the local application (i.e. your code) or the remote application (i.e. the application at the other end of the connection) can initiate closure of the socket.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Send the FIN handshake' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='SocketType = SOCKET_TYPE_UDP' />
							<exp exp='SocketMode = SOCKET_MODE_PASSIVE' />
							<exp exp='SocketStatus = SOCKET_STATUS_NONE' />
							<exp exp='TCP_ListenPort = 0' />
							<exp exp='TCP_SourcePort = 0' />
							<exp exp='TCP_DestinationPort = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxDataAvailable' description='Check if data has been received. A non-zero return value indicates that data is available. This macro should be called regularly as it also processess supporting network traffic.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='received' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='BufferDataLength = 0' />
							<exp exp='BufferDataReadIdx = 0' />
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketReceive' >
							<return exp='.received' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.received' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='Buffer[] now contains the data packet' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='call' title='Save the senders MAC' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SaveSendersMAC' />
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType = SOCKET_TYPE_MAC' swap='1' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(Buffer[12] = 0x08) &amp;&amp; (Buffer[13] = 0x06)' swap='1' >
											<flowline >
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CheckForIp' >
													<return exp='.Return' />
													<argument exp='.received' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
													<flowline >
														<command class_type='comment' title='' comment='Incoming packet has IP header' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketType = SOCKET_TYPE_IP' swap='1' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Return = 0' />
																</command>
																<command class_type='switch' title='Check the IP Protocol' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x17]' >
																	<case >
																		<flowline />
																	</case>
																	<case exp='PROTOCOL_ICMP' >
																		<flowline />
																	</case>
																	<case exp='PROTOCOL_TCP' >
																		<flowline >
																			<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_ProcessPacket' >
																				<return exp='.Return' />
																				<argument exp='.received' />
																			</command>
																			<command class_type='decision' title='Decision' disable='1' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
																				<flowline >
																					<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
																						<argument exp='&quot;TCP OK&quot;' />
																					</command>
																				</flowline>
																				<flowline >
																					<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
																						<argument exp='&quot;TCP Fail&quot;' />
																					</command>
																				</flowline>
																			</command>
																		</flowline>
																	</case>
																	<case exp='PROTOCOL_UDP' >
																		<flowline >
																			<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UDP_ProcessPacket' >
																				<return exp='.Return' />
																				<argument exp='.received' />
																			</command>
																		</flowline>
																	</case>
																</command>
															</flowline>
															<flowline >
																<command class_type='calculation' title='Return packet to user' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='BufferDataLength = .received' />
																	<exp exp='BufferDataReadIdx = 34' />
																	<exp exp='.Return = 1' />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline >
												<command class_type='comment' title='' comment='Silently process the ARP,
it&apos;s likely from the gateway/router' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CheckForARP' >
													<return exp='.Return' />
													<argument exp='.received' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='MakeArpAnswerFromRequest' />
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = 0' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline >
										<command class_type='comment' title='' comment='If socket type is MAC
i.e. CreateMACSocket() was used,
assume the user application is
processing all network packets.
' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='BufferDataLength = .received' />
											<exp exp='BufferDataReadIdx = 0' />
											<exp exp='.Return = 1' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateTCPSocket' description='This macro creates a socket for sending and receiving TCP data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Src_Port' type='u16' description='Port Number' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='SocketType = SOCKET_TYPE_TCP' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TCP_SourcePort = .Src_Port' />
						</command>
						<command class_type='call' title='Call Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='call' title='Call Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIp' />
						<command class_type='comment' title='' comment='IpMakeTcp' textarea='12,0,12,0' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='comment' title='' comment='Set Source Port' textarea='12,0,12,0' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Call Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpSetProtocol' >
							<argument exp='PROTOCOL_TCP' />
						</command>
						<command class_type='calculation' title='Calculation' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='// Move write pointer to end of Ethernet, IP and TCP headers' />
							<exp exp='BufferDataWriteIdx = 59' />
						</command>
						<command class_type='calculation' title='Opened socket correctly' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ParseIP' description='Attempt to parse an IP address from the string url, return 0 if fails' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='URL' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<local name='parts' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='x' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ThisIP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<local name='ThisChar' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='next' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
							<exp exp='.parts = 0' />
							<exp exp='.x = 0' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.parts &lt; 4' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.ThisIP[.parts] = 0' />
									<exp exp='.next = 0' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.next = 0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.ThisChar = .URL[.x]' />
											<exp exp='.x = .x + 1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.ThisChar &gt;= &apos;0&apos;) &amp;&amp; (.ThisChar &lt;= &apos;9&apos;)' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.ThisIP[.parts] = (.ThisIP[.parts] * 10) + .ThisChar - &apos;0&apos;' />
												</command>
											</flowline>
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ThisChar = &apos;.&apos;' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.next = 1' />
															<exp exp='.parts = .parts + 1' />
														</command>
													</flowline>
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ThisChar = 0' swap='0' >
															<flowline >
																<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.parts &gt;= 3' swap='0' >
																	<flowline >
																		<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																			<exp exp='.Return = 1' />
																			<exp exp='.parts = 4' />
																			<exp exp='.IP[0] = .ThisIP[0]' />
																			<exp exp='.IP[1] = .ThisIP[1]' />
																			<exp exp='.IP[2] = .ThisIP[2]' />
																			<exp exp='.IP[3] = .ThisIP[3]' />
																		</command>
																	</flowline>
																	<flowline />
																</command>
															</flowline>
															<flowline />
														</command>
													</flowline>
												</command>
											</flowline>
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_GetVarSize' description='Sent to a component to amend the size of the expected array' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='VarName' type='T8' description='The original Flowcode variable' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='Elements' type='u32*' description='The number of elements in the array' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Check for Buffer Variable' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Compare$ (.VarName,&quot;Buffer&quot;,0) == 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Elements = BufferSize + 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendByte' description='This macro fills the specified channel&apos;s transmit buffer with data.  It can fill the buffer with a single byte of data, or with a string of information.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='Data byte to append to Tx buffer.' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_l' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_h' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='offset' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='tx_mem' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[BufferDataWriteIdx] = .Data' />
							<exp exp='BufferDataWriteIdx = BufferDataWriteIdx + 1' />
						</command>
						<command class_type='comment' title='' comment='Need to check that the buffer is not full,
if it is then send the packet
and reset the write pointer (based on socket type)
' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='BufferDataWriteIdx &gt;= BufferSize' swap='0' >
							<flowline >
								<command class_type='calculation' title='For now just set the pointer back' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='BufferDataWriteIdx = BufferDataWriteIdx - 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetDestinationMAC' description='Sends ARP request to get the MAC of a host
Either on the subnet, else the router MAC
Returns 0 on failure.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<param name='MAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</param>
						<local name='IsSubnet' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IsSubnetIP' >
							<return exp='.IsSubnet' />
							<argument exp='.IP[0]' />
							<argument exp='.IP[1]' />
							<argument exp='.IP[2]' />
							<argument exp='.IP[3]' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.IsSubnet' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetSubnetMAC' >
									<return exp='.Return' />
									<argument exp='.IP' />
									<argument exp='RemoteMAC' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetSubnetMAC' >
									<return exp='.Return' />
									<argument exp='MyGateway' />
									<argument exp='RemoteMAC' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetBufferUint32' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Value' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[.Index] = .Value &gt;&gt; 24' />
							<exp exp='Buffer[.Index + 1] = .Value &gt;&gt; 16' />
							<exp exp='Buffer[.Index + 2] = .Value &gt;&gt; 8' />
							<exp exp='Buffer[.Index + 3] = .Value' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DataPacketReceive' description='Attempts to receive a data packet from the ENC28J60 module.
Returns the number of bytes received.' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='64' />
						</param>
						<param name='Size' type='u16' description='Size of data buffer (byte count)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RxStat' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RetVal' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='check if a packet has been received and buffered' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadRegister' >
							<return exp='.RetVal' />
							<argument exp='0x39' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.RetVal = 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Set the read pointer to the start of the received packet' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0' />
							<argument exp='NextPacketPtr' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='1' />
							<argument exp='NextPacketPtr &gt;&gt; 8' />
						</command>
						<command class_type='call' title='read the next packet pointer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='NextPacketPtr' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='read the next packet pointer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RetVal' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='NextPacketPtr = NextPacketPtr | (.RetVal &lt;&lt; 8)' />
						</command>
						<command class_type='call' title='read the packet length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.Length' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='read the packet length' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RetVal' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Length = .Length | (.RetVal &lt;&lt; 8)' />
							<exp exp='.Length = .Length - 4' />
						</command>
						<command class_type='call' title='read the receive status ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RxStat' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='read the receive status ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.RetVal' />
							<argument exp='0x3A' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.RxStat = .RxStat | (.RetVal &lt;&lt; 8)' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Length &gt; (.Size)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Length = .Size' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='check CRC and symbol errors' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.RxStat &amp; 0x80) = 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Length = 0' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadData' >
									<argument exp='.Data' />
									<argument exp='.Length' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Move the RX read pointer to the start of the next received packe' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0C' />
							<argument exp='NextPacketPtr' />
						</command>
						<command class_type='call' title='Move the RX read pointer to the start of the next received packe' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0D' />
							<argument exp='NextPacketPtr &gt;&gt; 8' />
						</command>
						<command class_type='call' title='decrement the packet counter indicate we are done with this pack' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x80' />
							<argument exp='0x1E' />
							<argument exp='0x40' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .Length' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxFlushData' description='Once data reception has been completed, this macro should be called to discard the data packet and allow other data packets to be read.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_rsr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_rd' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='cr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_sz' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_ptr' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Don&apos;t think we need this' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='BufferDataLength = 0' />
							<exp exp='BufferDataReadIdx = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncInit' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
						<command class_type='call' title='System Reset' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0xFF' />
							<argument exp='0' />
							<argument exp='0xFF' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='50' type='1' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='NextPacketPtr = 0' />
						</command>
						<command class_type='call' title='Rx Start - 0x0000' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x08' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='Rx Start' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x09' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='set receive pointer address - 0x0000' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0C' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='set receive pointer address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0D' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='RX end - 0x19FF' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0A' />
							<argument exp='0xFF' />
						</command>
						<command class_type='call' title='RX end' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x0B' />
							<argument exp='0x19' />
						</command>
						<command class_type='call' title='TX start - 0x1A00' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x04' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='TX start' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x05' />
							<argument exp='0x1A' />
						</command>
						<command class_type='call' title='TX end - 0x1FFF' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x06' />
							<argument exp='0xFF' />
						</command>
						<command class_type='call' title='TX end' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x07' />
							<argument exp='0x1F' />
						</command>
						<command class_type='call' title='Packet Filter - Bank1' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x38' />
							<argument exp='0xB0' />
						</command>
						<command class_type='comment' title='' comment='Removed Pattern Match enable
Added Broadcast enable' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Packet Filter - Bank1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x38' />
							<argument exp='0xA1' />
						</command>
						<command class_type='comment' title='' comment='Removed following (partial?) Pattern Match setup' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Packet Filter' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x28' />
							<argument exp='0x3F' />
						</command>
						<command class_type='call' title='Packet Filter' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x29' />
							<argument exp='0x30' />
						</command>
						<command class_type='call' title='Packet Filter' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x30' />
							<argument exp='0xF9' />
						</command>
						<command class_type='call' title='Packet Filter' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x31' />
							<argument exp='0xF7' />
						</command>
						<command class_type='comment' title='' comment='MACON1' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Enable MAC Receive - Bank2' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xC0' />
							<argument exp='0x0D' />
						</command>
						<command class_type='comment' title='' comment='Bank 2 Reg 1
Reserved ????' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Enable MAC Receive' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xC1' />
							<argument exp='0x00' />
						</command>
						<command class_type='call' title='Auto 60 Byte Padding &amp; CRC' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x80' />
							<argument exp='0xC2' />
							<argument exp='0x32' />
						</command>
						<command class_type='call' title='Inner Frame Gap - Non Back to back' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xC6' />
							<argument exp='0x12' />
						</command>
						<command class_type='call' title='Inner Frame Gap' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xC7' />
							<argument exp='0x0C' />
						</command>
						<command class_type='call' title='Inner Frame Gap - Back to back' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xC4' />
							<argument exp='0x12' />
						</command>
						<command class_type='call' title='Max Packet Size' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xCA' />
							<argument exp='0x00' />
						</command>
						<command class_type='call' title='Max Packet Size' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xCB' />
							<argument exp='0x1A' />
						</command>
						<command class_type='call' title='MAC Address - Bank3' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xE4' />
							<argument exp='MyMac[0]' />
						</command>
						<command class_type='call' title='MAC Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xE5' />
							<argument exp='MyMac[1]' />
						</command>
						<command class_type='call' title='MAC Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xE2' />
							<argument exp='MyMac[2]' />
						</command>
						<command class_type='call' title='MAC Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xE3' />
							<argument exp='MyMac[3]' />
						</command>
						<command class_type='call' title='MAC Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xE0' />
							<argument exp='MyMac[4]' />
						</command>
						<command class_type='call' title='MAC Address' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0xE1' />
							<argument exp='MyMac[5]' />
						</command>
						<command class_type='call' title='no loopback of transmitted frames' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncPhyWrite' >
							<argument exp='0x10' />
							<argument exp='0x0100' />
						</command>
						<command class_type='call' title='Switch to Bank0' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncSetBank' >
							<argument exp='0x1F' />
						</command>
						<command class_type='call' title='Enable Interrupts' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x80' />
							<argument exp='0x1B' />
							<argument exp='0xC0' />
						</command>
						<command class_type='call' title='Enable Packet Reception' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x80' />
							<argument exp='0x1F' />
							<argument exp='0x04' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadRegister' description='Reads the value from a single register onboard the ENC28J60 module.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncSetBank' >
							<argument exp='.Address' />
						</command>
						<command class_type='call' title='ENC28J60_READ_CTRL_REG' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncReadOp' >
							<return exp='.Return' />
							<argument exp='0x00' />
							<argument exp='.Address' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckForARP' description='Checks to see if the received data is an ARP request with my IP address.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Length &lt; 41' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[12] != 0x08 || Buffer[13] != 0x06' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x26] != MyIp[0]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x27] != MyIp[1]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x28] != MyIp[2]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x29] != MyIp[3]' swap='0' >
							<flowline >
								<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
					</flowline>
				</macro>
				<macro >
					<flowline name='IpSetSourceIP' description='Sets the source in the current IP header prior to sending' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x1A] = .IP0' />
							<exp exp='Buffer[0x1B] = .IP1' />
							<exp exp='Buffer[0x1C] = .IP2' />
							<exp exp='Buffer[0x1D] = .IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ClientSendPacket' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='DestPort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='SourcePort' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Flags' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MaxSegmentSize' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='ClearSeqAck' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='NextAckNum' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='DataLength' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='DestMac' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</param>
						<param name='DestIp' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='tseq' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='ck' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='copy the destination mac' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0] = .DestMAC[0]' />
							<exp exp='Buffer[1] = .DestMAC[1]' />
							<exp exp='Buffer[2] = .DestMAC[2]' />
							<exp exp='Buffer[3] = .DestMAC[3]' />
							<exp exp='Buffer[4] = .DestMAC[4]' />
							<exp exp='Buffer[5] = .DestMAC[5]' />
						</command>
						<command class_type='calculation' title='fill my mac into src' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[6] = MyMac[0]' />
							<exp exp='Buffer[7] = MyMac[1]' />
							<exp exp='Buffer[8] = MyMac[2]' />
							<exp exp='Buffer[9] = MyMac[3]' />
							<exp exp='Buffer[10] = MyMac[4]' />
							<exp exp='Buffer[11] = MyMac[5]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[12] = 8' />
							<exp exp='Buffer[13] = 0' />
						</command>
						<command class_type='calculation' title='Set Destination Port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x24] = .DestPort &gt;&gt; 8' />
							<exp exp='Buffer[0x25] = .DestPort' />
						</command>
						<command class_type='calculation' title='Set Source Port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x22] = .SourcePort &gt;&gt; 8' />
							<exp exp='Buffer[0x23] = .SourcePort' />
						</command>
						<command class_type='decision' title='sequence numbers' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.NextAckNum' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Idx = 4' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Idx &gt; 0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.NextAckNum = Buffer[0x26 + .Idx - 1] + .NextAckNum' />
											<exp exp='.tseq = Buffer[0x2A + .Idx - 1]' />
											<exp exp='Buffer[0x2A + .Idx - 1] = .NextAckNum' />
										</command>
										<command class_type='calculation' title='copy the acknum sent to us into the sequence number' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='Buffer[0x26 + .Idx - 1] = .tseq' />
											<exp exp='.NextAckNum = .NextAckNum &gt;&gt; 8' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Idx = .Idx - 1' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='initial tcp sequence number,require to setup for first transmit/' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.MaxSegmentSize' swap='0' >
							<flowline >
								<command class_type='calculation' title='put inital seq number' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x26] = 0' />
									<exp exp='Buffer[0x27] = 0' />
								</command>
								<command class_type='calculation' title='we step only the second byte' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x28] = SeqNum' />
									<exp exp='Buffer[0x29] = 0' />
								</command>
								<command class_type='calculation' title='step the inititial seq num' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='SeqNum = SeqNum + 2' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x36] = 2' />
									<exp exp='Buffer[0x37] = 4' />
									<exp exp='Buffer[0x38] = 0x05' />
									<exp exp='Buffer[0x39] = 0x80' />
								</command>
								<command class_type='calculation' title='24 Bytes' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x2E] = 0x60' />
									<exp exp='' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.DataLength = .DataLength + 4' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='20 Bytes' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x2E] = 0x50' />
									<exp exp='' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIpTcpNew' >
							<argument exp='40 + .DataLength' />
							<argument exp='.DestIp' />
						</command>
						<command class_type='decision' title='clear sequence ack numer before send tcp SYN packet' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ClearSeqAck' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x2A] = 0' />
									<exp exp='Buffer[0x2B] = 0' />
									<exp exp='Buffer[0x2C] = 0' />
									<exp exp='Buffer[0x2D] = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Zero the checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = 0' />
							<exp exp='Buffer[0x33] = 0' />
						</command>
						<command class_type='calculation' title='Setup the flags' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x2F] = .Flags' />
						</command>
						<command class_type='calculation' title='setup maximum windows size' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x30] = 0x02' />
							<exp exp='Buffer[0x31] = 0x36' />
						</command>
						<command class_type='calculation' title='setup urgent pointer' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x34] = 0' />
							<exp exp='Buffer[0x35] = 0' />
						</command>
						<command class_type='call' title='Calculate checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='28 + .DataLength' />
							<argument exp='2' />
						</command>
						<command class_type='calculation' title='Assign checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x33] = .ck' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='54 + .DataLength' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_MakeSynackFromSyn' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ck' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Info to save' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetBufferUint32' >
							<return exp='TCP_ACK' />
							<argument exp='0x26' />
						</command>
						<command class_type='comment' title='' comment='Now make reply' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ETH_MakeReply' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IP_MakeReply' />
						<command class_type='calculation' title='total length field in the IP header' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = 0' />
							<exp exp='Buffer[0x11] = 44' />
						</command>
						<command class_type='calculation' title='Protocol set to TCP' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x17] = 6' />
						</command>
						<command class_type='calculation' title='Set the TCP ACK and SYN flags' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x2F] = 0x12' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeHead' >
							<argument exp='1' />
							<argument exp='1' />
							<argument exp='0' />
							<argument exp='.Port' />
						</command>
						<command class_type='call' title='Call Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeHead' >
							<argument exp='1' />
							<argument exp='0' />
							<argument exp='0' />
							<argument exp='.Port' />
						</command>
						<command class_type='call' title='Set our seq number' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetBufferUint32' >
							<argument exp='0x26' />
							<argument exp='TCP_SEQ' />
						</command>
						<command class_type='call' title='Ack the received seq number' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetBufferUint32' >
							<argument exp='0x2A' />
							<argument exp='TCP_ACK + 1' />
						</command>
						<command class_type='comment' title='' comment='2nd parameter is TCP seg length + 8' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Calculate the checksum' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='32' />
							<argument exp='2' />
						</command>
						<command class_type='call' title='Calculate the checksum' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='40' />
							<argument exp='2' />
						</command>
						<command class_type='call' title='Calculate the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='Buffer[17]-12' />
							<argument exp='2' />
						</command>
						<command class_type='calculation' title='Assign checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x33] = .ck' />
						</command>
						<command class_type='call' title='add 4 for option mss:' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='58' />
						</command>
						<command class_type='call' title='add 4 for option mss:' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='66' />
						</command>
						<command class_type='call' title='add 4 for option mss:' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='Buffer[17] + 14' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncWriteBuffer' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='FlashTx' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='ENC28J60_WRITE_BUF_MEM' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='0x7A' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Index &lt; .Length' >
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
									<argument exp='Buffer[.Index]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Index = .Index + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
					</flowline>
				</macro>
				<macro >
					<flowline name='MakeEchoReplyFromRequest' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Length' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIp' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x22] = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x24] &gt; 0xF7' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x25] = Buffer[0x25] + 1' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x24] = Buffer[0x24] + 0x08' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='.Length' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='InternalInit' description='Initialises the SPI connection to the TCPIP module and sets up some initial values.
Flashes the LEDs on and off twice to confirm SPI comms are active.
LEDs are then configured to auto functionality.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Reset Low' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='ResetPin = 0' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='1' type='1' />
						<command class_type='calculation' title='Reset High' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='ResetPin = 1' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='1' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Init' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncInit' />
						<command class_type='call' title='change clkout from 6.25MHz to 12.5MHz' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncClockOut' >
							<argument exp='2' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='LED_FLASH' swap='0' >
							<flowline >
								<command class_type='call' title='LEDs On' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ControlLEDs' >
									<argument exp='1' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='500' type='1' />
								<command class_type='call' title='LEDs Off' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ControlLEDs' >
									<argument exp='0' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='500' type='1' />
								<command class_type='call' title='LEDs On' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ControlLEDs' >
									<argument exp='1' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='500' type='1' />
								<command class_type='call' title='LEDs Off' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ControlLEDs' >
									<argument exp='0' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='500' type='1' />
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='LEDs Auto' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ControlLEDs' >
							<argument exp='2' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='1' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='DHCP' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DHCP_Setup' />
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Set default socket type' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='SocketType = SOCKET_TYPE_MAC' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DebugPrintIP' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='text' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='IP' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</param>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='.text' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos; &apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.IP[0]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.IP[1]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.IP[2]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.IP[3]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='&quot;\r\n&quot;' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_Connect' description='This macro puts a previously opened TCP channel in &quot;active open&quot; mode.  This is the required mode when writing a TCP client application (e.g. using SMTP to send an email).' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='URL' type='T8*' description='URL or IPv4 address' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='Dst_Port' type='u16' description='Destination Port' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='comment' title='' comment='Check for IPv4 address and parse, or do DNS lookup' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ParseIP' >
							<return exp='.Return' />
							<argument exp='.URL' />
							<argument exp='RemoteIP' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='1' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DNS_Lookup' >
									<return exp='.Return' />
									<argument exp='.URL' />
									<argument exp='RemoteIP' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='Do ARP to get MAC ' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetDestinationMAC' >
									<return exp='.Return' />
									<argument exp='RemoteIP' />
									<argument exp='RemoteMAC' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='Connect to destination (do SYN packet)' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DataPacketSend' description='Attempts to transmit a data packet via the ENC28J60 module.' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='32' />
						</param>
						<param name='Size' type='u16' description='Data length (byte count)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='EndPointer' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='retval' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Set the write pointer to start of transmit buffer area' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x02' />
							<argument exp='0x00' />
						</command>
						<command class_type='call' title='Set the write pointer to start of transmit buffer area' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x03' />
							<argument exp='0x1A' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.EndPointer = 0x1A00 + .Size' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.EndPointer &gt; 0x1FFF' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.EndPointer = 0x1FFF' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Set the TXND pointer to correspond to the packet size given' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x06' />
							<argument exp='.EndPointer' />
						</command>
						<command class_type='call' title='Set the TXND pointer to correspond to the packet size given' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='WriteRegister' >
							<argument exp='0x07' />
							<argument exp='.EndPointer &gt;&gt; 8' />
						</command>
						<command class_type='call' title='write per-packet control byte (0x00 means use macon3 settings)' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x7A' />
							<argument exp='0' />
							<argument exp='0' />
						</command>
						<command class_type='call' title='copy the packet into the transmit buffer' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteData' >
							<argument exp='.Data' />
							<argument exp='.Size' />
						</command>
						<command class_type='call' title='send the contents of the transmit buffer onto the network' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x80' />
							<argument exp='0x1F' />
							<argument exp='0x08' />
						</command>
						<command class_type='call' title='Reset the transmit logic problem. See Rev. B4 Silicon Errata poi' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ReadRegister' >
							<return exp='.retval' />
							<argument exp='0x1C' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval &amp; 0x02' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
									<argument exp='0xA0' />
									<argument exp='0x1F' />
									<argument exp='0x08' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxMatchMyMAC' description='This macro returns a non-zero value when the next 6 bytes of data in the specified channel&apos;s reception buffer are the same as the Internet E-block&apos;s MAC address entered in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='rx_byte' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyMAC[0]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyMAC[1]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyMAC[2]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyMAC[3]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyMAC[4]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.rx_byte' />
							<argument exp='.Channel' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.rx_byte != MyMAC[5]' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_ProcessPacket' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='received' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='flags' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='SocketMode = SOCKET_MODE_LISTEN' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_CheckPort' >
									<return exp='.Return' />
									<argument exp='TCP_ListenPort' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_GetFlags' >
											<return exp='.flags' />
										</command>
										<command class_type='decision' title='Synchronise?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.flags &amp; 0x02' swap='0' >
											<flowline >
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeSynackFromSyn' >
													<argument exp='TCP_ListenPort' />
												</command>
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
													<argument exp='&quot;SYN -&gt; SYN ACK&quot;' />
												</command>
											</flowline>
											<flowline >
												<command class_type='decision' title='Ack?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.flags &amp; 0x10' swap='0' >
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
															<argument exp='&quot;ACK -&gt; ?&quot;' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_CheckPort' >
									<return exp='.Return' />
									<argument exp='TCP_SourcePort' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_MakeAckFromAny' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ck' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<local name='SubBuff' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='28' />
						</local>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeEth' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x2F] = 0x10' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='info_data_len = 0' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeHead' >
									<argument exp='1' />
									<argument exp='0' />
									<argument exp='1' />
									<argument exp='.Port' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeHead' >
									<argument exp='info_data_len' />
									<argument exp='0' />
									<argument exp='1' />
									<argument exp='.Port' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x10] = 0' />
							<exp exp='Buffer[0x11] = 40' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpMakeIp' />
						<command class_type='call' title='Calculate the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x1A' />
							<argument exp='28' />
							<argument exp='2' />
						</command>
						<command class_type='calculation' title='Assign checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x32] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x33] = .ck' />
						</command>
						<command class_type='call' title='' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketSend' >
							<argument exp='54' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='RxDataSize' description='This macro is used to detect the size of data collected by the Rx_data_available macro.' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = BufferDataLength - BufferDataReadIdx' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendUint32' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Uint32' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='.Channel' />
							<argument exp='.Uint32 &gt;&gt; 16' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendUint16' >
							<argument exp='.Channel' />
							<argument exp='.Uint32' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Loop' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='plen' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='dat_p' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='retval' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='CompString' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='call' title='Check for incoming data' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='PacketReceive' >
							<return exp='.plen' />
						</command>
						<command class_type='decision' title='Data Available?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.plen != 0' swap='0' >
							<flowline >
								<command class_type='call' title='ARP Request?' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CheckForARP' >
									<return exp='.retval' />
									<argument exp='.plen' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='MakeArpAnswerFromRequest' />
										<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
									</flowline>
									<flowline />
								</command>
								<command class_type='call' title='IP Request' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CheckForIp' >
									<return exp='.retval' />
									<argument exp='.plen' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CheckMatchIp' >
											<return exp='.retval' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='If not IP Request then bail out' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval = 0' swap='0' >
									<flowline >
										<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
									</flowline>
									<flowline />
								</command>
								<command class_type='call' title='Check For Ping' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CheckForPing' >
									<return exp='.retval' />
								</command>
								<command class_type='decision' title='Ping Request' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='MakeEchoReplyFromRequest' >
											<argument exp='.plen' />
										</command>
										<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
									</flowline>
									<flowline />
								</command>
								<command class_type='call' title='Check For Port' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_CheckPort' >
									<return exp='.retval' />
									<argument exp='.Port' />
								</command>
								<command class_type='decision' title='Check for TCP Port Request' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval' swap='0' >
									<flowline >
										<command class_type='call' title='Check For Type' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_GetFlags' >
											<return exp='.retval' />
										</command>
										<command class_type='decision' title='Synchronise?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval &amp; 0x02' swap='0' >
											<flowline >
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeSynackFromSyn' >
													<argument exp='.Port' />
												</command>
												<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
											</flowline>
											<flowline />
										</command>
										<command class_type='decision' title='Ack?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval &amp; 0x10' swap='0' >
											<flowline >
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='InitialiseDataLengthInfo' />
												<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetTcpDataPointer' >
													<return exp='.dat_p' />
												</command>
												<command class_type='decision' title='Is there no data?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.dat_p = 0' swap='0' >
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.retval &amp; 0x01' swap='0' >
															<flowline >
																<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeAckFromAny' >
																	<argument exp='.Port' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
													</flowline>
													<flowline />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.CompString[0] = Buffer[.dat_p]' />
													<exp exp='.CompString[1] = Buffer[.dat_p + 1]' />
													<exp exp='.CompString[2] = Buffer[.dat_p + 2]' />
													<exp exp='.CompString[3] = Buffer[.dat_p + 3]' />
												</command>
												<command class_type='decision' title='&quot;GET&quot; Request' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Compare$ (&quot;GET &quot;, .CompString,0) != 0' swap='0' >
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='0' />
															<argument exp='&quot;HTTP/1.0 200 OK\r\nContent-Type: text/html\r\n\r\n&lt;h1&gt;200 OK&lt;/h1&gt;&quot;' />
														</command>
														<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='1' labelname='' />
													</flowline>
													<flowline />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.CompString[0] = Buffer[.dat_p + 4]' />
													<exp exp='.CompString[1] = Buffer[.dat_p + 5]' />
													<exp exp='.CompString[2] = 0' />
												</command>
												<command class_type='decision' title='Root of I/P' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Compare$ (&quot;/ &quot;, .CompString,0) = 0' swap='0' >
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='0' />
															<argument exp='&quot;HTTP/1.0 200 OK\r\nContent-Type: text/html\r\n\r\n&quot;' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='.plen' />
															<argument exp='&quot;&lt;center&gt;&lt;p&gt;&lt;h1&gt;Welcome to Arduino Ethernet Shield V1.0  &lt;/h1&gt;&lt;/p&gt;&quot;' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='.plen' />
															<argument exp='&quot;&lt;hr&gt;&lt;br&gt; &lt;h2&gt;&lt;font color=\&quot;blue\&quot;&gt;-- Put your ARDUINO online -- &quot;' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='.plen' />
															<argument exp='&quot;&lt;br&gt; Control digital outputs &quot;' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='.plen' />
															<argument exp='&quot;&lt;br&gt; Read digital analog inputs HERE &quot;' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='.plen' />
															<argument exp='&quot;  &lt;br&gt;&lt;/font&gt;&lt;/h2&gt; &quot;' />
														</command>
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='FillTcpData' >
															<return exp='.plen' />
															<argument exp='.plen' />
															<argument exp='&quot;&lt;/center&gt;&lt;hr&gt;  V1.0 &lt;a href=\&quot;http://www.nuelectronics.com\&quot;&gt;www.nuelectronics.com&lt;a&gt;&quot;' />
														</command>
														<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='1' labelname='' />
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='1' labelname='SendTCP' />
										<command class_type='call' title='send ack for http get' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeAckFromAny' >
											<argument exp='.Port' />
										</command>
										<command class_type='call' title='send data  ' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_MakeAckWithData' >
											<argument exp='.plen' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='label' title='Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='Return' />
					</flowline>
				</macro>
				<macro >
					<flowline name='ControlLEDs' description='Allows both the LEDs on the Ethernet socket to be controlled.
Useful for checking if the SPI communications are functioning correctly.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Mode' type='u8' description='0=Off, 1=On, 2=Auto' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Mode' >
							<case >
								<flowline />
							</case>
							<case exp='0' >
								<flowline >
									<command class_type='call' title='LEDs Off' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncPhyWrite' >
										<argument exp='0x14' />
										<argument exp='0x990' />
									</command>
								</flowline>
							</case>
							<case exp='1' >
								<flowline >
									<command class_type='call' title='LEDs On' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncPhyWrite' >
										<argument exp='0x14' />
										<argument exp='0x880' />
									</command>
								</flowline>
							</case>
							<case exp='2' >
								<flowline >
									<command class_type='call' title='LEDs Auto' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncPhyWrite' >
										<argument exp='0x14' />
										<argument exp='0x476' />
									</command>
								</flowline>
							</case>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetDataLength' description='Returns the number of received data bytes after the headers' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='dLength' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='hLength' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.dLength = (Buffer[0x10] &lt;&lt; 8) | Buffer[0x11]' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.dLength = .dLength - 20' />
						</command>
						<command class_type='calculation' title='Length in bytes' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.hLength = (Buffer[0x2E] &gt;&gt; 4) * 4' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.dLength = .dLength - .hLength' />
							<exp exp='' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.dLength &lt;= 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.dLength = 0' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .dLength' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendMyMAC' description='This macro fills the specified channel&apos;s transmit buffer with 6 bytes of data representing this Internet E-Block&apos;s MAC address as specified in the component&apos;s property page.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='Specifies the communications channel 0-3' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_l' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='addr_h' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='offset' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyMAC[0]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyMAC[1]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyMAC[2]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyMAC[3]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyMAC[4]' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
							<argument exp='.Channel' />
							<argument exp='MyMAC[5]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CreateMACSocket' description='This macro creates a socket for sending and receiving Ethernet data using raw data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Promiscuous' type='u8' description='Receive everything (1) or just data bound for your MAC (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Broadcast' type='u8' description='Allows broadcast messages to be accepted (1) or rejected (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Error' type='u8' description='Allowsmessages with errors to be accepted (1) or rejected (0)' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='SocketType = SOCKET_TYPE_MAC' />
						</command>
						<command class_type='calculation' title='Reset Globals' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Header[0] = 0' />
							<exp exp='Header[1] = 0' />
							<exp exp='Header[2] = 0' />
							<exp exp='Header[3] = 0' />
							<exp exp='Header[4] = 0' />
							<exp exp='Header[5] = 0' />
							<exp exp='Header[6] = 0' />
							<exp exp='Header[7] = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='BufferDataWriteIdx = 0' />
						</command>
						<command class_type='calculation' title='Opened socket correctly' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 1' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IpSetProtocol' description='Set the IP protocol' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Protocol' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Fill protocol ' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x17] = .Protocol' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetMACAddress' description='Allows the MAC Address specified in the component properties to be overridden.
The MAC Address will revert back to the MAC specified in the component properties as part of the initialise macro.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='MAC0' type='u8' description='MAC Address Parameter' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC1' type='u8' description='MAC Address Parameter' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC2' type='u8' description='MAC Address Parameter' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC3' type='u8' description='MAC Address Parameter' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC4' type='u8' description='MAC Address Parameter' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MAC5' type='u8' description='MAC Address Parameter' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='MyMAC[0] = .MAC0' />
							<exp exp='MyMAC[1] = .MAC1' />
							<exp exp='MyMAC[2] = .MAC2' />
							<exp exp='MyMAC[3] = .MAC3' />
							<exp exp='MyMAC[4] = .MAC4' />
							<exp exp='MyMAC[5] = .MAC5' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='InternalInit' />
					</flowline>
				</macro>
				<macro >
					<flowline name='RxReadUint16' description='' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Channel' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='temp' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.temp' />
							<argument exp='.Channel' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxReadByte' >
							<return exp='.Return' />
							<argument exp='.Channel' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = (.temp &lt;&lt; 8) | .Return' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='CheckForPshAck' description='Checks for a PSHACK flag in the received buffer' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[0x2F] == 0x12' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='IsSubnetIP' description='Returns zero if the given IP is outside the subnet.
Returns non-zero if the IP is within the subnet' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP0' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(MyGateway[0] &amp; MySubnet[0]) = (.IP0 &amp; MySubnet[0])' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(MyGateway[1] &amp; MySubnet[1]) = (.IP1 &amp; MySubnet[1])' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(MyGateway[2] &amp; MySubnet[2]) = (.IP2 &amp; MySubnet[2])' swap='0' >
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(MyGateway[3] &amp; MySubnet[3]) = (.IP3 &amp; MySubnet[3])' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = 1' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='EncWriteOp' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Op' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='LibraryComponent1' macro='FlashTx' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Enable_CS' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='.Op | (.Address &amp; ADDR_MASK)' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Byte' >
							<argument exp='.Data' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='cal_spi' macro='Master_Disable_CS' />
					</flowline>
				</macro>
				<macro >
					<flowline name='IpFillIpHdrChecksum' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='ck' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='clear the 2 byte checksum' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x18] = 0' />
							<exp exp='Buffer[0x19] = 0' />
						</command>
						<command class_type='calculation' title='Dont fragment' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x14] = 0' />
							<exp exp='Buffer[0x15] = 0' />
						</command>
						<command class_type='calculation' title='TTL' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x16] = 64' />
						</command>
						<command class_type='call' title='Calculate the checksum' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='IpChecksum' >
							<return exp='.ck' />
							<argument exp='0x0E' />
							<argument exp='20' />
							<argument exp='0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Buffer[0x18] = .ck &gt;&gt; 8' />
							<exp exp='Buffer[0x19] = .ck' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetTcpDataPointer' description='' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='info_data_len' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0x22 + info_hdr_len' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetSubnetMask' description='This macro sets up the Internet E-Block&apos;s Subnet Mask.  In most circumstances, this macro will not be required as the subnet mask setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='MySubnet[0] = .IP0' />
							<exp exp='MySubnet[1] = .IP1' />
							<exp exp='MySubnet[2] = .IP2' />
							<exp exp='MySubnet[3] = .IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DHCP_Setup' description='' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='result' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='timeout' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DHCP_SendDiscovery' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.timeout = 20000' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.timeout &gt; 0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DHCP_HasReply' >
									<return exp='.result' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result' swap='0' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DHCP_ParseOffer' >
											<return exp='.result' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result' swap='0' >
											<flowline >
												<command class_type='call' title='Accept the Offer with a Request' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DHCP_SendRequest' >
													<return exp='.result' />
												</command>
												<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.timeout &gt; 0' >
													<flowline >
														<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DHCP_HasReply' >
															<return exp='.result' />
														</command>
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.result' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.timeout = 0' />
																	<exp exp='.Return = 1' />
																	<exp exp='' />
																</command>
															</flowline>
															<flowline >
																<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='0' />
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.timeout = .timeout - 1' />
																</command>
															</flowline>
														</command>
													</flowline>
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.timeout = 0' />
										</command>
									</flowline>
									<flowline >
										<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='0' />
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.timeout = .timeout - 1' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Main' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<local name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='200' type='1' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Initialise' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
							<argument exp='&quot;Testing DHCP ...&quot;' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintIP' >
							<argument exp='&quot;Local IP&quot;' />
							<argument exp='MyIP' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintIP' >
							<argument exp='&quot;Subnet  &quot;' />
							<argument exp='MySubnet' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintIP' >
							<argument exp='&quot;Gateway &quot;' />
							<argument exp='MyGateway' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintIP' >
							<argument exp='&quot;DHCP IP &quot;' />
							<argument exp='MyDHCP' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintIP' >
							<argument exp='&quot;DNS IP  &quot;' />
							<argument exp='DNS_IP' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintMAC' >
							<argument exp='&quot;DNS MAC &quot;' />
							<argument exp='DNS_MAC' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='2' exp='5000' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxDataAvailable' >
									<argument exp='0' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='0' />
							</flowline>
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
							<argument exp='&quot;\r\nTesting DNS ...&quot;' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
							<argument exp='&quot;DNS lookup for bbc.co.uk&quot;' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DNS_Lookup' >
							<return exp='Result' />
							<argument exp='&quot;www.bbc.co.uk&quot;' />
							<argument exp='Host' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Result' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrintIP' >
									<argument exp='&quot;Host IP = &quot;' />
									<argument exp='Host' />
								</command>
							</flowline>
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
									<argument exp='&quot;DNS failed&quot;' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
							<argument exp='&quot;\r\nTesting TCP ...&quot;' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='CreateTCPSocket' >
							<return exp='.Return' />
							<argument exp='0' />
							<argument exp='3333' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TCP_Listen' >
							<return exp='.Return' />
							<argument exp='8080' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='1' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='RxDataAvailable' >
									<argument exp='0' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='100' type='0' />
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='WriteRegister' description='Writes a value to a single register onboard the ENC28J60 module.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncSetBank' >
							<argument exp='.Address' />
						</command>
						<command class_type='call' title='ENC28J60_WRITE_CTRL_REG' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='EncWriteOp' >
							<argument exp='0x40' />
							<argument exp='.Address' />
							<argument exp='.Data' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='FillTcpData' description='' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Position' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<local name='idx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Data[.idx]' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='Buffer[0x36 + .Position] = .Data[.idx]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = .idx + 1' />
									<exp exp='.Position = .Position + 1' />
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = .Position' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadStringFromBuffer' description='Reads a string from the buffer at location specified for the number of bytes specified.
If a space character is encountered then the macro will return straight away without the space character in the string.' statediag='0' >
						<return name='Return' type='T8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='2000' />
						</return>
						<param name='BufferLocation' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='NumberOfBytes' type='u8' description='Number of bytes to read from the buffer and store into string' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Index' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Count' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Index = .BufferLocation' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Index &lt; (.BufferLocation + .NumberOfBytes)' >
							<flowline >
								<command class_type='decision' title='Check for a space' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Buffer[.Index] = &apos; &apos;' swap='0' >
									<flowline >
										<command class_type='calculation' title='End collecting data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Index = 0xFFFF' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return[.Count] = Buffer[.Index]' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Index = .Index + 1' />
											<exp exp='.Count = .Count + 1' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Null termination' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return[.Count] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TxSendZeroPadding' description='Send padding number of zero bytes' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Channel' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Padding' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.Padding &gt; 0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='TxSendByte' >
									<argument exp='0' />
									<argument exp='0' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Padding = .Padding - 1' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DebugPrintMAC' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='text' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<param name='MAC' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='6' />
						</param>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='.text' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos; &apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.MAC[0]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.MAC[1]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.MAC[2]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.MAC[3]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.MAC[4]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendChar' >
							<argument exp='&apos;.&apos;' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendNumber' >
							<argument exp='.MAC[5]' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='&quot;\r\n&quot;' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='TCP_Listen' description='Put the TCP socket into listening mode on Port' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.Return = 0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(SocketType = SOCKET_TYPE_TCP) &amp;&amp; (SocketMode = SOCKET_MODE_PASSIVE)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='SocketMode = SOCKET_MODE_LISTEN' />
									<exp exp='TCP_ListenPort = .Port' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Initialise' description='Initialises the SPI connection to the TCPIP module and sets up some initial values.
Flashes the LEDs on and off twice to confirm SPI comms are active.
LEDs are then configured to auto functionality.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='Initialise' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='DebugPrint' >
							<argument exp='&quot;\r\nStarting\r\n&quot;' />
						</command>
						<command class_type='calculation' title='Variable initialisation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='ErrorCode = 0' />
							<exp exp='// Avoid MAC such that we process ARP packets' />
							<exp exp='SocketType = SOCKET_TYPE_UDP' />
							<exp exp='SocketMode = SOCKET_MODE_PASSIVE' />
							<exp exp='SocketStatus = SOCKET_STATUS_NONE' />
							<exp exp='TCP_SourcePort = 0' />
							<exp exp='TCP_DestinationPort = 0' />
							<exp exp='TCP_ListenPort = 0' />
						</command>
						<command class_type='calculation' title='Copy MAC and IP properties to Vars' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='MyMAC[0] = MAC0' />
							<exp exp='MyMAC[1] = MAC1' />
							<exp exp='MyMAC[2] = MAC2' />
							<exp exp='MyMAC[3] = MAC3' />
							<exp exp='MyMAC[4] = MAC4' />
							<exp exp='MyMAC[5] = MAC5' />
							<exp exp='' />
							<exp exp='MyIP[0] = IP0' />
							<exp exp='MyIP[1] = IP1' />
							<exp exp='MyIP[2] = IP2' />
							<exp exp='MyIP[3] = IP3' />
							<exp exp='' />
							<exp exp='MyGateway[0] = gateway0' />
							<exp exp='MyGateway[1] = gateway1' />
							<exp exp='MyGateway[2] = gateway2' />
							<exp exp='MyGateway[3] = gateway3' />
							<exp exp='' />
							<exp exp='MySubnet[0] = subnet0' />
							<exp exp='MySubnet[1] = subnet1' />
							<exp exp='MySubnet[2] = subnet2' />
							<exp exp='MySubnet[3] = subnet3' />
							<exp exp='' />
						</command>
						<command class_type='calculation' title='&quot;Random&quot; numbers' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='DHCP_XID = (MyMAC[4] &lt;&lt; 8) + MyMAC[5]' />
							<exp exp='TransactionID = (MyMAC[2] &lt;&lt; 8) + MyMAC[3]' />
							<exp exp='//TCP_SEQ = (MyMAC[0] &lt;&lt; 8) + MyMAC[1]' />
							<exp exp='TCP_SEQ = 0' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='InternalInit' />
					</flowline>
				</macro>
				<macro >
					<flowline name='SetGateway' description='This macro sets up the Internet E-Block&apos;s Gateway address.  In most circumstances, this macro will not be required as the gateway address setting in the component property page will remain constant throughout your application.' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='First Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='Second Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='Third Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='Fourth Byte of IP address' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='MyGateway[0] = .IP0' />
							<exp exp='MyGateway[1] = .IP1' />
							<exp exp='MyGateway[2] = .IP2' />
							<exp exp='MyGateway[3] = .IP3' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='DebugPrint' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='text' type='T8*' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='20' />
						</param>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='.text' />
						</command>
						<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='UART1' macro='SendString' >
							<argument exp='&quot;\r\n&quot;' />
						</command>
					</flowline>
				</macro>
			</macros>
			<component class_type='ref' guid='c67171df-0ad6-4b11-8361-cfe14b072847' vmin='1' vmaj='2' codename='cal_spi' panelId='-1' x='0' y='0' z='0' xsz='0.00595238' ysz='0.00651042' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='1' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='ENABLED' data='1' />
					<value target='REF' data='1' />
					<value target='CHANNEL' data='001' />
					<value target='MOSI' data='$PORTB.3' />
					<value target='MOSIPins' data='013' />
					<value target='MISO' data='$PORTB.4' />
					<value target='MISOPins' data='065' />
					<value target='CLK' data='$PORTB.5' />
					<value target='CLKPins' data='009' />
					<value target='UseAutoCS' data='1' />
					<value target='UseCS' data='0' />
					<value target='SS' data='$PORTB.0' />
					<value target='CSPolarity' data='000' />
					<value target='SSPins' data='000' />
					<value target='AltSSPin' data='0' />
					<value target='Mode' data='000' />
					<value target='PR_SCALE' data='004' />
					<value target='CKE' data='001' />
					<value target='CKP' data='000' />
					<value target='SMP' data='001' />
					<value target='ScopeTraces' data='1' />
					<value target='ConsoleData' data='1' />
					<value target='Injector' data='000' />
					<value target='InjectorCS' data='0' />
					<value target='InjectorHandle' data='0' />
					<value target='InjectorChannel' data='0' />
					<value target='Loading' data='1' />
					<value target='BMODE' data='6' />
					<value target='MOSI_PORT' data='$PORTB.3' />
					<value target='MOSI_TRIS' data='$PORTB.3' />
					<value target='MOSI_PIN' data='3' />
					<value target='MISO_PORT' data='$PORTB.4' />
					<value target='MISO_TRIS' data='$PORTB.4' />
					<value target='MISO_PIN' data='4' />
					<value target='SCK_PORT' data='$PORTB.5' />
					<value target='SCK_TRIS' data='$PORTB.5' />
					<value target='SCK_PIN' data='5' />
					<value target='SS_PORT' data='$PORTB.0' />
					<value target='SS_TRIS' data='$PORTB.0' />
					<value target='SS_PIN' data='0' />
					<value target='Remappable' data='' />
					<value target='MOSIReg' data='013' />
					<value target='CLKREG' data='009' />
					<value target='MOSIRPNUM' data='5' />
					<value target='MOSIBank' data='' />
					<value target='MOSIBank2' data='' />
					<value target='CLKRPNUM' data='6' />
					<value target='CLKBank' data='' />
					<value target='MISORPREG' data='RPINR20bits.SDI1R' />
					<value target='MISOBank' data='' />
					<value target='SPIName' data='' />
					<value target='MISOReg' data='000' />
					<value target='SPIClock' data='' />
					<value target='MISOBank2' data='' />
					<value target='CLKBank2' data='' />
					<value target='ParentName' data='' />
					<value target='BitDelay' data='0' />
					<value target='ClockSpeed' data='16000000' />
					<value target='MasterDivider' data='1' />
					<value target='Sim' data='1' />
					<value target='CLKRPREG' data='' />
					<value target='SSRPREG' data='' />
					<value target='SSBank' data='' />
					<value target='SSBank2' data='' />
					<value target='AltSSReg' data='' />
					<value target='AltSSMask' data='0' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='54369d81-80ed-4d59-97bf-91f4b2cdf24c' vmin='2' vmaj='2' codename='TCP_Base1' panelId='-1' x='0' y='0' z='0' xsz='1' ysz='1' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='1' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='hostname' data='192.168.0.1' />
					<value target='interface' data='4' />
					<value target='gateway0' data='192' />
					<value target='gateway1' data='168' />
					<value target='gateway2' data='0' />
					<value target='gateway3' data='10' />
					<value target='subnet0' data='255' />
					<value target='subnet1' data='255' />
					<value target='subnet2' data='255' />
					<value target='subnet3' data='0' />
					<value target='ip0' data='192' />
					<value target='ip1' data='168' />
					<value target='ip2' data='0' />
					<value target='ip3' data='152' />
					<value target='mac0' data='28' />
					<value target='mac1' data='191' />
					<value target='mac2' data='206' />
					<value target='mac3' data='76' />
					<value target='mac4' data='71' />
					<value target='mac5' data='137' />
					<value target='ConsoleData' data='1' />
					<value target='notify_target' data='' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='c73616d1-7ad0-45d9-aada-69ccfa4c5efc' vmin='0' vmaj='3' codename='UART1' panelId='-1' x='0' y='0' z='3.74999' xsz='0.00543478' ysz='0.00581395' zsz='7.5' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='1' solid='1' layer='1' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='cal_uart::CHANNEL' data='001' />
					<value target='cal_uart::BAUD_LIST' data='008' />
					<value target='cal_uart::BAUD' data='57600' />
					<value target='cal_uart::DBITS' data='008' />
					<value target='cal_uart::RETURN' data='000' />
					<value target='cal_uart::ECHO' data='000' />
					<value target='cal_uart::UseTX' data='1' />
					<value target='cal_uart::TX' data='$PORTD.1' />
					<value target='cal_uart::OutputPins' data='007' />
					<value target='cal_uart::TXAlt' data='0' />
					<value target='cal_uart::UseRX' data='1' />
					<value target='cal_uart::RX' data='$PORTD.0' />
					<value target='cal_uart::InputPins' data='013' />
					<value target='cal_uart::RXAlt' data='0' />
					<value target='cal_uart::FLOWEN' data='000' />
					<value target='cal_uart::RTS' data='$PORTB.2' />
					<value target='cal_uart::CTS' data='$PORTB.1' />
					<value target='label' data='UART' />
					<value target='cal_uart::ScopeTraces' data='0' />
					<value target='cal_uart::ConsoleData' data='0' />
					<value target='cal_uart::ConsoleFormat' data='000' />
					<value target='cal_uart::ConsoleColumns' data='64' />
					<value target='cal_uart::DataSource' data='000' />
					<value target='cal_uart::com_port' data='000' />
					<value target='cal_uart::Injector' data='000' />
					<value target='cal_uart::APIUseDDR' data='' />
					<value target='cal_uart::APIDDRPin' data='' />
					<value target='cal_uart::APIDDRRXState' data='' />
					<value target='cal_uart::APIUseFC' data='' />
					<value target='cal_uart::APICTSPin' data='' />
					<value target='cal_uart::APIRTSPin' data='' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='58be670e-18fb-477e-ab09-61fde14b23ec' vmin='0' vmaj='1' codename='LibraryComponent1' panelId='-1' x='0' y='10' z='0' xsz='100' ysz='100' zsz='100' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='0' layer='1' poslock='1' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='Text::sText' data='BL0187
Ethernet board
EBlocks2' />
					<value target='Name' data='' />
					<value target='Peripheral::sText' data='(SPI CH1)' />
					<value target='Text::nVerticalAlignment' data='002' />
					<value target='ShowComms' data='1' />
					<value target='InputIcon::CommsType' data='255' />
					<value target='InputIcon::LinkTo' data='0' />
					<value target='IconsOnRight' data='0' />
					<value target='OutputIcon::CommsType' data='5' />
					<value target='OutputIcon::LinkTo' data='0' />
					<value target='ConsoleHandle' data='1559' />
					<value target='Upgraded' data='0' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
		</component>
	</components>
	<scadaresourcelookup />
	<keymap />
	<panel2d shadows='0' lighting='2' brightness='0' >
		<background rgb='9737364' img='' style='0' />
		<camera xe='-18.375' ye='0.80783' ze='732.004' xt='-18.375' yt='0.80783' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<viewport dx='428' dy='507' zoom='70.7482' fix_topleft='0' />
		<page x='1000' y='1000' show='0' rgb='7360576' />
		<winpos ID='7005' RectRecentFloat='2010,291,2466,896' RectRecentDocked='0,0,298,748' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='1' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='1' />
	</panel2d>
	<panel3d shadows='0' lighting='2' brightness='0' perspective='1' >
		<background rgb='8409120' img='' style='0' />
		<table rgb='7360576' img='' style='0' size='25' />
		<camera xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey0 xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey1 xe='-3.67394e-14' ye='0' ze='-300' xt='0' yt='0' zt='0' xquat='0' yquat='1' zquat='0' wquat='6.12323e-17' />
		<camerakey2 xe='0' ye='-300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.707107' yquat='0' zquat='0' wquat='0.707107' />
		<camerakey3 xe='-3.67394e-14' ye='300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-4.32978e-17' yquat='0.707107' zquat='0.707107' wquat='4.32978e-17' />
		<camerakey4 xe='-300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='0.5' zquat='0.5' wquat='0.5' />
		<camerakey5 xe='300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='-0.5' zquat='-0.5' wquat='0.5' />
		<camerakey6 xe='-173.205' ye='-173.205' ze='173.205' xt='0' yt='0' zt='0' xquat='-0.424708' yquat='0.17592' zquat='0.339851' wquat='0.820473' />
		<winpos ID='7004' RectRecentFloat='0,425,654,1002' RectRecentDocked='0,0,298,721' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel3d>
	<panels2d count='0' />
	<layout >
		<view type='0' name='TCP_MakeSynackFromSyn' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='IpChecksum' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Main' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='EncReadBuffer' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='EncReadOp' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='EncReadData' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='EncWriteData' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='EncWriteBuffer' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='EncWriteOp' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Property' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAUAIAAMwCAAA' zoom='100' scrollx='0' scrolly='0' flags='0' />
	</layout>
</document>
</root>
