<root>
<document scada='1' panel2DSCADA='0' panel3DSCADA='7' panelPropsSCADA='5' panelConsoleSCADA='0' panelDataRecorderSCADA='7' panel2DCount='1' panel2DSCADA_0='6' playbackSCADA='0' ShouldAutoStartSCADA='0' ShouldLockCameraSCADA='0' ShouldBundleSCADA='1' SCADAProgramTitle='DC Motor 2' buildnumber='0' schema='103' license='10,CompMaker,WNV3JN' title='' description='' fcversion='655364' target='SCADA.SCADA.GENERIC' >
	<config data='' clkspd='100000000' simspd='0' usewdt='0' constif='0' Use3V3='0' />
	<plugins >
		<dll_models enabled='1' />
	</plugins>
	<supplement use='0' head='' body='' />
	<debug >
		<watch expr='.Channel' />
	</debug>
	<traces />
	<ghost >
		<FK2 >
			<data name='FK2D0' port='4294967295' pin='4294967295' />
			<data name='FK2D1' port='4294967295' pin='4294967295' />
			<data name='FK2D2' port='4294967295' pin='4294967295' />
			<data name='FK2D3' port='4294967295' pin='4294967295' />
			<data name='FK2D4' port='4294967295' pin='4294967295' />
			<data name='FK2D5' port='4294967295' pin='4294967295' />
			<data name='FK2D6' port='4294967295' pin='4294967295' />
			<data name='FK2D7' port='4294967295' pin='4294967295' />
			<data name='FK2D8' port='4294967295' pin='4294967295' />
			<data name='FK2D9' port='4294967295' pin='4294967295' />
			<data name='FK2D10' port='4294967295' pin='4294967295' />
			<data name='FK2D11' port='4294967295' pin='4294967295' />
			<data name='FK2D12' port='4294967295' pin='4294967295' />
			<data name='FK2D13' port='4294967295' pin='4294967295' />
			<data name='FK2D14' port='4294967295' pin='4294967295' />
			<data name='FK2D15' port='4294967295' pin='4294967295' />
			<data name='FK2A0' port='4294967295' pin='4294967295' />
			<data name='FK2A1' port='4294967295' pin='4294967295' />
			<data name='FK2A2' port='4294967295' pin='4294967295' />
			<data name='FK2A3' port='4294967295' pin='4294967295' />
			<data name='FK2A4' port='4294967295' pin='4294967295' />
			<data name='FK2A5' port='4294967295' pin='4294967295' />
		</FK2>
		<ICD >
			<data name='AnalogPrescaleValue' value='19' />
			<data name='DigitalSampleRate' value='100000' />
			<data name='BreakpointCount' value='8' />
			<data name='CallStackDepthCount' value='8' />
			<data name='ClockPort' value='4095' />
			<data name='ClockPin' value='0' />
			<data name='DataPort' value='4095' />
			<data name='DataPin' value='0' />
			<data name='UseDefaultPins' value='1' />
			<data name='WrapEnabled' value='1' />
			<data name='CommsDelayOverridden' value='0' />
			<data name='CommsDelay' value='2' />
			<data name='CalculatedCommsDelay' value='2' />
			<data name='AnalogEB2PrescaleValue' value='2' />
			<data name='DigitalEB2SampleRate' value='100000' />
		</ICD>
		<pins >
			<digital A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
			<analog A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
		</pins>
	</ghost>
	<components >
		<settings autoimg='0' center='1' unitscale='0' fixedscale='0' fixedx='1' fixedy='1' fixedz='1' headcode='0' />
		<definition guid='c3e5eb13-e03d-4ca6-be4d-1c63ad107a35' vstate='40' vmin='0' vmaj='2' srcleaf='EM_Functions.fcsx' visiblename='Electrical Machines' description='A set of functions to communicate with the Matrix EM hardware. 
Allows the functions to be easily standardised across all SCADA programs.' category='AllCode' category2='' category3='' bIs2dOnly='1' bIs3dOnly='0' catenable='1' author='Matrix TSL' manuname='' manucode='' sysinfo='3150151' keywords='' dynamic='1' scadaCompatible='1' embeddedCompatible='0' showmacros='1' iconpath='..\..\Icons\Components\EM.png' />
		<component class_type='root' codename='ElectricalMachines' panelId='-1' x='0' y='0' z='0' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='0' poslock='0' comp2dType='0' >
			<resources />
			<properties >
				<property name='Communications' folder='property_1' hidden='0' >
					<property name='Comms Mode' target='CommsMode' typeid='16' hidden='0' locked='0' info='' filter='000USB
001Network (TCP)' />
					<property name='Stop On Error' target='StopOnError' typeid='7' hidden='0' locked='0' info='Automatically allows the runtime to stop if there is a communications error.' />
					<property name='API Version' target='APIVersion' typeid='10' hidden='0' locked='1' info='' />
					<property name='USB Communications' folder='property_3' hidden='0' >
						<property name='Autodetect Port' target='AutoDetect' typeid='7' hidden='0' locked='0' info='' />
						<property name='Refresh Ports' target='scada_uart1::RefreshPorts' typeid='7' hidden='1' locked='0' info='' />
						<property name='COM Port' target='scada_uart1::com_port' typeid='16' hidden='1' locked='0' info='Lists all the current available COM port hardware on your PC.' filter='001COM1 Communications Port' />
					</property>
					<property name='TCP Communications' folder='property_4' hidden='1' >
						<property name='Network Interface' target='NetworkComms1::NetworkInterface' typeid='16' hidden='0' locked='0' info='Some computers may have several network interfaces such as ethernet ports and wifi access.
Select the correct network interface for the network you wish to connect to.
Use the IP address to confirm you are connected to the right network.' filter='0000
0011
0022
0033
255AutoDetect' />
						<property name='IP Address' target='NetworkComms1::IPAddress' typeid='10' hidden='0' locked='1' info='IP Address of the selected network interface.' />
						<property name='EM Box IP Address' target='BoxIP' typeid='10' hidden='0' locked='0' info='' />
						<property name='EM Box Port' target='BoxPort' typeid='21' hidden='0' locked='0' info='' />
					</property>
				</property>
				<property name='Runtime Statistics' folder='property_2' hidden='0' >
					<property name='Console Data' target='ConsoleData' typeid='7' hidden='0' locked='0' info='Allow console data to be generated showing the high level EM communications and returns' />
				</property>
			</properties>
			<values >
				<value target='CommsMode' data='000' />
				<value target='StopOnError' data='1' />
				<value target='APIVersion' data='' />
				<value target='AutoDetect' data='1' />
				<value target='scada_uart1::RefreshPorts' data='0' />
				<value target='scada_uart1::com_port' data='23' />
				<value target='NetworkComms1::NetworkInterface' data='004' />
				<value target='NetworkComms1::IPAddress' data='0.0.0.0' />
				<value target='BoxIP' data='192.168.1.235' />
				<value target='BoxPort' data='88' />
				<value target='ConsoleData' data='1' />
			</values>
			<events >
				<event class='Simulation' event='Stop' target='Ev_Stop' />
				<event class='Components' event='Initialise' target='Ev_Initialise' />
				<event class='Components' event='Property' target='Ev_Property' />
				<event class='Simulation' event='Start' target='Ev_Start' />
			</events>
			<apis >
				<api name='GetLogDataReady' alt='' type='2' proto='1' />
				<api name='GetRPM' alt='' type='2' proto='1' />
				<api name='GetWeight' alt='' type='2' proto='1' />
				<api name='SetControlKP' alt='' type='2' proto='1' />
				<api name='SetControlSetpoint' alt='' type='2' proto='1' />
				<api name='GetAPIVersion' alt='' type='2' proto='1' />
				<api name='GetLogData' alt='' type='2' proto='1' />
				<api name='GetDataArray' alt='' type='2' proto='1' />
				<api name='GetSafetySwitch' alt='' type='2' proto='1' />
				<api name='SetControlKI' alt='' type='2' proto='1' />
				<api name='ZeroLoadCell' alt='' type='2' proto='1' />
				<api name='SetControlMaxDrivePercentage' alt='' type='2' proto='1' />
				<api name='SetMotorType' alt='' type='2' proto='1' />
				<api name='SetLoadCellCalibration' alt='' type='2' proto='1' />
				<api name='GetVoltage' alt='' type='2' proto='1' />
				<api name='GetControlFeedback' alt='' type='2' proto='1' />
				<api name='SetControlKD' alt='' type='2' proto='1' />
				<api name='SetCapacitorBank' alt='' type='2' proto='1' />
				<api name='GetCommsOK' alt='' type='2' proto='1' />
				<api name='GetLogStartAngle' alt='' type='2' proto='1' />
				<api name='SetVoltage' alt='' type='2' proto='1' />
				<api name='Get3PhaseMode' alt='' type='2' proto='1' />
				<api name='GetAbsPosition' alt='GetAbsPosition' type='2' proto='1' />
				<api name='SetFan' alt='' type='2' proto='1' />
				<api name='SetMotorDirection' alt='' type='2' proto='1' />
				<api name='GetMotorDirection' alt='' type='2' proto='1' />
				<api name='SetThreePhaseDriveMode' alt='' type='2' proto='1' />
				<api name='GetCurrent' alt='' type='2' proto='1' />
				<api name='SetFrequency' alt='' type='2' proto='1' />
				<api name='SetDynoLoad' alt='' type='2' proto='1' />
				<api name='GetErrorStatus' alt='' type='2' proto='1' />
				<api name='GetControlOutputs' alt='' type='2' proto='1' />
				<api name='SetActive' alt='$(type)_$(module)__$(macro)' type='2' proto='1' />
				<api name='SetDriveMode' alt='' type='2' proto='1' />
				<api name='SetTCPProps' alt='SetTCPProps' type='2' proto='1' />
				<api name='SetAbsPosition' alt='' type='2' proto='1' />
				<api name='Initialise' alt='' type='2' proto='1' />
			</apis>
			<variables >
				<variable public='0' >
					<def class_type='variable' name='CommsErrorMsg' type='b1' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='UART_API_TOUT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='500' setinit='500' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='false' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='VDC2' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='ConsoleHandle' type='h32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='VDC1' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MotorRunning' type='b1' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCPLogData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='300' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='ErrCounter' type='u16' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TxData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='10' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RxData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='64' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='Stopping' type='b1' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='BoxErrorMsg' type='b1' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MAX_PWM_Duty' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='3000' setinit='3000' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TempError' type='b1' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCP_TIMEOUT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='10000' setinit='10000' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TCPLogIdx' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='UART_TOUT' type='s16' description='' isconst='1' isHidden='0' isinit='1' usrinit='10000' setinit='10000' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='OldConsole' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='CommsVer' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='true' type='b1' description='' isconst='1' isHidden='0' isinit='1' usrinit='1' setinit='1' />
				</variable>
			</variables>
			<macros >
				<macro >
					<flowline name='GetLogDataReady' description='Checks to see if the logging is complete and ready to read.' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 14' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TCPLogIdx = 0' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetLogDataReady -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Stop' description='Broadcast to all components that simulation has stopped' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Flag no more comms errors' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Stopping = 1' />
						</command>
						<command class_type='decision' title='Is the motor Active?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='MotorRunning' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='Most of the time this will be ok but sometimes you get a comms error
as you&apos;re trying to do this when the sim is stopped and it seems
a bit flaky.

Only trying when the motor is active should hopefully reduce the amount of 
errors you get when stopping or exiting the app.' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='sim' title='Just in case the SetActive has an error dont raise the Event Err' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.WDTEnable' >
									<argument exp='0' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetActive' >
									<argument exp='0' />
								</command>
								<command class_type='sim' title='Re-enable' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.WDTEnable' >
									<argument exp='1' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode = 0' swap='0' >
							<flowline >
								<command class_type='sim' title='Close the port' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='Uninit' />
							</flowline>
							<flowline >
								<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
							</flowline>
						</command>
						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='APP_LED' macro='TurnOff' />
						<command class_type='calculation' title='Reset the error message flag - produce error messages again' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='CommsErrorMsg = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetRPM' description='Reads the speed in RPM' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TempUint' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 20' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,3)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.TempUint = RxData[1] | (RxData[2] &lt;&lt; 8)' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = (FLOAT .TempUint / 10.0)' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetRPM -&gt; &quot; + string .Return + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='StartupComms' description='Broadcast to all components that simulation is starting.
Returns a 0 if hardware not found or returns a 1 if hardware found and connected.' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Port' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='USB Comms?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode = 0' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='COM port - Detect correct EM port here...
' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='AutoDetect' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='ScanForDeviceID' >
											<return exp='.Port' />
											<argument exp='&quot;VID_12BF&amp;PID_0101&quot;' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Port &gt; 0) &amp;&amp; (.Port &lt; 254)' swap='0' >
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
													<flowline >
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
															<argument exp='ConsoleHandle' />
															<argument exp='&quot;EM Hardware Detected on Port &quot; + ToString$(.Port) + &quot;\n&quot;' />
														</command>
													</flowline>
													<flowline />
												</command>
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
													<argument exp='scada_uart1' />
													<argument exp='&quot;com_port&quot;' />
													<argument exp='.Port' />
												</command>
												<command class_type='delay' title='Delay to allow EvProperty to kick in on COM port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='1' type='2' />
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Return = 1' />
												</command>
											</flowline>
											<flowline >
												<command class_type='comment' title='' comment='Now try again!' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='ScanForDeviceID' >
													<return exp='.Port' />
													<argument exp='&quot;VID_12BF&amp;PID_0101&quot;' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Port &gt; 0) &amp;&amp; (.Port &lt; 254)' swap='0' >
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
															<flowline >
																<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
																	<argument exp='ConsoleHandle' />
																	<argument exp='&quot;EM Hardware Detected on Port &quot; + ToString$(.Port) + &quot;\n&quot;' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
															<argument exp='scada_uart1' />
															<argument exp='&quot;com_port&quot;' />
															<argument exp='.Port' />
														</command>
														<command class_type='delay' title='Delay to allow EvProperty to kick in on COM port' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='1' type='2' />
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = 1' />
														</command>
													</flowline>
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
															<flowline >
																<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
																	<argument exp='ConsoleHandle' />
																	<argument exp='&quot;EM Hardware Not Detected!\n&quot;' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UI.SimpleMsgBox' >
															<argument exp='&quot;Electrical Machines Hardware not found.\r\nCheck the hardware s connected and that the USB driver is installed.&quot;' />
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = 0' />
														</command>
													</flowline>
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = 1' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
									<flowline >
										<command class_type='sim' title='Ensure port is first unconnected' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='Uninit' />
										<command class_type='comment' title='' comment='If we have found the port 
Then connect and flush RX buffer' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
										<command class_type='sim' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='Init' />
										<command class_type='loop' title='Loop and pull in any pending data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='2' exp='10' >
											<flowline >
												<command class_type='sim' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='Receive' >
													<argument exp='0' />
												</command>
											</flowline>
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='RxData[0] = 0' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='TCP Comms?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode = 1' swap='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Initialise' />
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetWeight' description='Reads the voltage of a single channel' statediag='0' >
						<return name='Return' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<param name='Scale' type='u8' description='Range: 0-1 -  0=Weight, 1=Torque' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TempLong' type='s32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 26' />
							<exp exp='TxData[2] = .Scale' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,5)' swap='0' >
							<flowline >
								<command class_type='call' title='Call Component Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='TypeConversions1' macro='SetByte' >
									<argument exp='0' />
									<argument exp='RxData[1]' />
								</command>
								<command class_type='call' title='Call Component Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='TypeConversions1' macro='SetByte' >
									<argument exp='1' />
									<argument exp='RxData[2]' />
								</command>
								<command class_type='call' title='Call Component Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='TypeConversions1' macro='SetByte' >
									<argument exp='2' />
									<argument exp='RxData[3]' />
								</command>
								<command class_type='call' title='Call Component Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='TypeConversions1' macro='SetByte' >
									<argument exp='3' />
									<argument exp='RxData[4]' />
								</command>
								<command class_type='call' title='Call Component Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='TypeConversions1' macro='GetLong' >
									<return exp='.TempLong' />
								</command>
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.TempLong = RxData[4]' />
									<exp exp='.TempLong = .TempLong &lt;&lt; 8' />
									<exp exp='.TempLong = .TempLong | RxData[3]' />
									<exp exp='.TempLong = .TempLong &lt;&lt; 8' />
									<exp exp='.TempLong = .TempLong | RxData[2]' />
									<exp exp='.TempLong = .TempLong &lt;&lt; 8' />
									<exp exp='.TempLong = .TempLong | RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsVer' swap='0' >
									<flowline >
										<command class_type='calculation' title='Convert to 0.01' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = (FLOAT .TempLong / 100.0)' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Convert to 0.1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = (FLOAT .TempLong / 10.0)' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Scale' swap='0' >
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;GetTorque -&gt; &quot; + FloatToString$(.Return,1) + &quot;\n&quot;' />
												</command>
											</flowline>
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;GetWeight -&gt; &quot; + FloatToString$(.Return,1) + &quot;\n&quot;' />
												</command>
												<command class_type='sim' title='Simulation' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;GetWeight -&gt; &quot; + ToString$(RXData[1]) + &quot;, &quot;+ ToString$(RXData[2]) + &quot;, &quot;+ ToString$(RXData[3]) + &quot;, &quot;+ ToString$(RXData[4]) + &quot;\n&quot;' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0.0' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetWeight -&gt; Error\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetControlKP' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Value' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='BitData' type='s32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='sim' title='Convert Float to Long Bits' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Calculations.FloatToStorageULong' >
							<return exp='.BitData' />
							<argument exp='.Value' />
						</command>
						<command class_type='calculation' title='Convert Long Bits to Byte Bits' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ByteData[0] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[1] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[2] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[3] = .BitData' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 51' />
							<exp exp='TxData[2] = .ByteData[0]' />
							<exp exp='TxData[3] = .ByteData[1]' />
							<exp exp='TxData[4] = .ByteData[2]' />
							<exp exp='TxData[5] = .ByteData[3]' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetControlKP -&gt; &quot; + FloatToString$ (.Value,1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetControlSetpoint' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Value' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='BitData' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='TypeConversions1' macro='SetFloat' >
							<argument exp='.Value' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 50' />
							<exp exp='TxData[2] = TypeConversions1 :: GetByte (0)' />
							<exp exp='TxData[3] = TypeConversions1 :: GetByte (1)' />
							<exp exp='TxData[4] = TypeConversions1 :: GetByte (2)' />
							<exp exp='TxData[5] = TypeConversions1 :: GetByte (3)' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetControlSetpoint -&gt; &quot; + FloatToString$(.Value, 1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetAPIVersion' description='Reads the API firmware version' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 0' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetAPIVersion -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Initialise' description='Initialisation routine for the component once the component is linked to its parent' statediag='0' >
						<return name='Return' type='u32' description='Non-zero to prevent initialisation' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Port' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.AddText' >
									<return exp='ConsoleHandle' />
									<argument exp='&quot;Elec Machine&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='OldConsole = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='OldConsole = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetLogData' description='Gets a 64-byte packet of log data. 250 packets make up a single log.
Returns 0 if comms failed and 1 if comms OK' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Buffer' type='u8' description='Buffer to store the incoming log data' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='300' />
						</param>
						<local name='ActualRxCount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TxCount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RetVal' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ReqRxCount' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='buffidx' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='retry' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='20' setinit='20' />
						<command class_type='comment' title='' comment='This function works differently in that it doesn&apos;t go via the Communications function.
This is because the command code is not explicitly echoed back in this case meaning we can 
squeeze more data into the USB transaction.' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
						<command class_type='label' title='Declare Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 13' />
							<exp exp='.TxCount = 2' />
						</command>
						<command class_type='decision' title='Legacy or new comms mode' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsVer || CommsMode' swap='0' >
							<flowline >
								<command class_type='calculation' title='Replace component byte with command initialiser' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TxData[0] = &apos;:&apos;' />
								</command>
								<command class_type='calculation' title='Append command end to end of packet' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TxData[.TxCount] = &apos;;&apos;' />
									<exp exp='TxData[.TxCount + 1] = &apos;\n&apos;' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='TCPLogIdx = 0' swap='0' >
											<flowline >
												<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketOpen' >
													<return exp='.RetVal' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retval' swap='0' >
													<flowline >
														<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Connect' >
															<return exp='.RetVal' />
															<argument exp='BoxIP' />
															<argument exp='BoxPort' />
														</command>
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retval' swap='0' >
															<flowline >
																<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Send' >
																	<argument exp='TxData' />
																	<argument exp='.TxCount + 2' />
																</command>
															</flowline>
															<flowline >
																<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
																<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
																	<flowline >
																		<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																			<exp exp='.Retry = .Retry - 1' />
																		</command>
																		<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
																		<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
																	</flowline>
																	<flowline />
																</command>
																<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
																	<argument exp='ConsoleHandle' />
																	<argument exp='&quot;Comms Error Connect\n&quot;' />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline >
														<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Retry = .Retry - 1' />
																</command>
																<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
																<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
															</flowline>
															<flowline />
														</command>
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
															<argument exp='ConsoleHandle' />
															<argument exp='&quot;Comms Error Socket Not Open\n&quot;' />
														</command>
													</flowline>
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline >
										<command class_type='call' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='SendByteArray' >
											<argument exp='TxData' />
											<argument exp='.TxCount + 2' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='SendByteArray' >
									<argument exp='TxData' />
									<argument exp='.TxCount' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='TCPLogIdx = 0' swap='0' >
									<flowline >
										<command class_type='call' title='TCP Receive' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Receive' >
											<return exp='.ActualRxCount' />
											<argument exp='TCPLogData' />
											<argument exp='240' />
											<argument exp='TCP_TIMEOUT' />
										</command>
										<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ActualRxCount = 240' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.ActualRxCount = 60' />
													<exp exp='TCPLogIdx = 3' />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='TCPLogIdx = TCPLogIdx - 1' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.ActualRxCount = 60' />
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.idx = 0' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.idx &lt; 60' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Buffer[.idx] = TCPLogData[.idx + ((3 - TCPLogIdx) * 60)]' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.idx = .idx + 1' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.ReqRxCount = 60' />
								</command>
								<command class_type='call' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='ReceiveByteArray' >
									<return exp='.ActualRxCount' />
									<argument exp='.Buffer' />
									<argument exp='60' />
									<argument exp='UART_TOUT' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ActualRxCount = 60' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetLogData - OK\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Retry = .Retry - 1' />
												</command>
												<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
												<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetLogData - FAIL &quot; + string .ActualRxCount + &quot; bytes collected\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='COMMS_LED' macro='TurnOn' />
							</flowline>
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='COMMS_LED' macro='TurnOff' />
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='StopOnError' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.StopSim' />
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetDataArray' description='Collects a data array from the EM box full of control data.
Each set of data includes:
Setpoint, Feedback, Poutput, Ioutput, Doutput
Returns the number of complete data samples collected.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='data' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' >
							<array size='250' />
							<array size='5' />
						</param>
						<local name='index' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='subindex' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='count' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='subcount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 57' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetDataArray -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return &gt;= 12' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.index = 0' />
											<exp exp='.count = .Return / 12' />
											<exp exp='.Return = 0' />
										</command>
										<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='TxData[0] = 0' />
											<exp exp='TxData[1] = 59' />
										</command>
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.count' >
											<flowline >
												<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,61)' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.subcount = 1' />
														</command>
														<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.subcount &lt; 60' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.subindex = 0' />
																</command>
																<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.subindex &lt; 5' >
																	<flowline >
																		<command class_type='calculation' title='Convert incoming bytes to float' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																			<exp exp='TypeConversions1 :: SetByte (0,RxData[.subcount])' />
																			<exp exp='TypeConversions1 :: SetByte (1,RxData[.subcount + 1])' />
																			<exp exp='TypeConversions1 :: SetByte (2,RxData[.subcount + 2])' />
																			<exp exp='TypeConversions1 :: SetByte (3,RxData[.subcount + 3])' />
																			<exp exp='.Data[.index][.subindex] = TypeConversions1 :: GetFloat ()' />
																		</command>
																		<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.subindex &gt; 1' swap='0' >
																			<flowline >
																				<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																					<exp exp='.Data[.index][.subindex] = RxData[.subcount]' />
																					<exp exp='.Data[.index][.subindex] = .Data[.index][.subindex] - 128.0' />
																					<exp exp='.Data[.index][.subindex] = .Data[.index][.subindex] / 128.0' />
																				</command>
																			</flowline>
																			<flowline >
																				<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																					<exp exp='.Data[.index][.subindex] = FLOAT RxData[.subcount] * 1.40625' />
																				</command>
																			</flowline>
																		</command>
																		<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																			<exp exp='.subindex = .subindex + 1' />
																		</command>
																		<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																			<exp exp='.subcount = .subcount + 1' />
																		</command>
																	</flowline>
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.index = .index + 1' />
																</command>
															</flowline>
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = .Return + 12' />
															<exp exp='.Count = .Count - 1' />
														</command>
													</flowline>
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Return = 0' />
															<exp exp='.count = 0' />
														</command>
													</flowline>
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='TxData[0] = 0' />
											<exp exp='TxData[1] = 58' />
										</command>
										<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,6)' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.subindex = 0' />
													<exp exp='.index = 0' />
													<exp exp='.count = 1' />
												</command>
												<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.subindex &lt; 5' >
													<flowline >
														<command class_type='calculation' title='Convert incoming bytes to float' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='TypeConversions1 :: SetByte (0,RxData[.count])' />
															<exp exp='TypeConversions1 :: SetByte (1,RxData[.count + 1])' />
															<exp exp='TypeConversions1 :: SetByte (2,RxData[.count + 2])' />
															<exp exp='TypeConversions1 :: SetByte (3,RxData[.count + 3])' />
															<exp exp='.Data[.index][.subindex] = TypeConversions1 :: GetFloat ()' />
														</command>
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.subindex &gt; 1' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Data[.index][.subindex] = RxData[.subindex + 1]' />
																	<exp exp='.Data[.index][.subindex] = .Data[.index][.subindex] - 128.0' />
																	<exp exp='.Data[.index][.subindex] = .Data[.index][.subindex] / 128.0' />
																</command>
															</flowline>
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Data[.index][.subindex] = FLOAT RxData[.subindex + 1] * 1.40625' />
																</command>
															</flowline>
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.subindex = .subindex + 1' />
															<exp exp='//.count = .count + 4' />
														</command>
													</flowline>
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Return = 1' />
												</command>
											</flowline>
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Return = 0' />
												</command>
											</flowline>
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetSafetySwitch' description='Reads the safety switch' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 25' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetSafetySwitch -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
									<flowline >
										<command class_type='call' title='OK' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='MOTOR_IN_LED' macro='TurnOn' />
									</flowline>
									<flowline >
										<command class_type='call' title='Error' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='MOTOR_IN_LED' macro='TurnOff' />
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetControlKI' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Value' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='BitData' type='s32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='sim' title='Convert Float to Long Bits' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Calculations.FloatToStorageULong' >
							<return exp='.BitData' />
							<argument exp='.Value' />
						</command>
						<command class_type='calculation' title='Convert Long Bits to Byte Bits' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ByteData[0] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[1] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[2] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[3] = .BitData' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 52' />
							<exp exp='TxData[2] = .ByteData[0]' />
							<exp exp='TxData[3] = .ByteData[1]' />
							<exp exp='TxData[4] = .ByteData[2]' />
							<exp exp='TxData[5] = .ByteData[3]' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetControlTI -&gt; &quot; + FloatToString$ (.Value,1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ZeroLoadCell' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 6' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;ZeroLoadCell\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetControlMaxDrivePercentage' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Value' type='f32' description='Range 0.0-1.0' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='ByteData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<local name='BitData' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='sim' title='Convert Float to Long Bits' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Calculations.FloatToStorageULong' >
							<return exp='.BitData' />
							<argument exp='.Value' />
						</command>
						<command class_type='calculation' title='Convert Long Bits to Byte Bits' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ByteData[0] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[1] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[2] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[3] = .BitData' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 56' />
							<exp exp='TxData[2] = .ByteData[0]' />
							<exp exp='TxData[3] = .ByteData[1]' />
							<exp exp='TxData[4] = .ByteData[2]' />
							<exp exp='TxData[5] = .ByteData[3]' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetControlMaxDrivePercentage -&gt; &quot; + FloatToString$ (.Value,1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetMotorType' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='MotorType' type='u8' description='0=DC, 1=1 Phase, 2=3 Phase' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 1' />
							<exp exp='TxData[2] = .MotorType' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='MotorRunning = 0' />
								</command>
								<command class_type='call' title='Motor Stopped' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='RUN_LED' macro='TurnOff' />
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetMotorType -&gt; &quot; + ToString$(.MotorType) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetLoadCellCalibration' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Value' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='BitData' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='sim' title='Convert Float to Long Bits' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Calculations.FloatToStorageULong' >
							<return exp='.BitData' />
							<argument exp='.Value' />
						</command>
						<command class_type='calculation' title='Convert Long Bits to Byte Bits' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ByteData[0] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[1] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[2] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[3] = .BitData' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 17' />
							<exp exp='TxData[2] = .ByteData[0]' />
							<exp exp='TxData[3] = .ByteData[1]' />
							<exp exp='TxData[4] = .ByteData[2]' />
							<exp exp='TxData[5] = .ByteData[3]' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetLoadCellCalibration -&gt; &quot; + FloatToString$ (.Value,1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetVoltage' description='Reads the voltage of a single channel' statediag='0' >
						<return name='Return' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<param name='Channel' type='u8' description='Range: 0-5 -  0=DC1, 1=DC2, 2=U, 3=V, 4=W, 5=VEXT' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='sum' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 22' />
							<exp exp='TxData[2] = .Channel' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,3)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.sum = RxData[1] | (RxData[2] &lt;&lt; 8)' />
								</command>
								<command class_type='decision' title='Ext V channel?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Channel = 5' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = (FLOAT .sum / 56.638176)' />
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = (FLOAT .sum / 100.0)' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetVoltage Channel: &quot; + ToString$(.Channel) + &quot; -&gt; &quot; + FloatToString$(.Return, 1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='comment' title='' comment='Try and catch motor driver too hot eventuallity' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='MotorRunning' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Channel = 0' swap='0' >
											<flowline >
												<command class_type='decision' title='Greater than 25% usage' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='VDC1 &gt; 750' swap='0' >
													<flowline >
														<command class_type='decision' title='Voltage less than 0.5V' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return &lt; 0.5' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='TempError = 1' />
																</command>
															</flowline>
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='TempError = 0' />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Channel = 1' swap='0' >
											<flowline >
												<command class_type='decision' title='Greater than 25% usage' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='VDC2 &gt; 750' swap='0' >
													<flowline >
														<command class_type='decision' title='Voltage less than 0.5V' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return &lt; 0.5' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='TempError = 1' />
																</command>
															</flowline>
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='TempError = 0' />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetControlFeedback' description='' statediag='0' >
						<return name='Return' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='BitData' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 54' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,5)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Convert Long Bits to Byte Bits' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.BitData = RxData[4]' />
									<exp exp='.BitData = .BitData &lt;&lt; 8' />
									<exp exp='.BitData = .BitData | RxData[3]' />
									<exp exp='.BitData = .BitData &lt;&lt; 8' />
									<exp exp='.BitData = .BitData | RxData[2]' />
									<exp exp='.BitData = .BitData &lt;&lt; 8' />
									<exp exp='.BitData = .BitData | RxData[1]' />
								</command>
								<command class_type='sim' title='Convert Float to Long Bits' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Calculations.StorageULongToFloat' >
									<return exp='.Return' />
									<argument exp='.BitData' />
								</command>
								<command class_type='calculation' title='Calculation' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = .BitData' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetControlFeedback -&gt; &quot; + FloatToString$ (.Return,2) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0.0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetControlKD' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Value' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='BitData' type='s32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteData' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
							<array size='4' />
						</local>
						<command class_type='sim' title='Convert Float to Long Bits' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Calculations.FloatToStorageULong' >
							<return exp='.BitData' />
							<argument exp='.Value' />
						</command>
						<command class_type='calculation' title='Convert Long Bits to Byte Bits' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.ByteData[0] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[1] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[2] = .BitData' />
							<exp exp='.BitData = .BitData &gt;&gt; 8' />
							<exp exp='.ByteData[3] = .BitData' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 53' />
							<exp exp='TxData[2] = .ByteData[0]' />
							<exp exp='TxData[3] = .ByteData[1]' />
							<exp exp='TxData[4] = .ByteData[2]' />
							<exp exp='TxData[5] = .ByteData[3]' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetControlTD -&gt; &quot; + FloatToString$ (.Value,1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Property' description='Sent when a property has been changed by the User' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Console Active?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
							<flowline >
								<command class_type='decision' title='If Console has previously been switched off' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='OldConsole = 0' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.AddText' >
											<return exp='ConsoleHandle' />
											<argument exp='&quot;Elec Machine&quot;' />
											<argument exp='0' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='OldConsole = 1' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Flag that Handle needs to be re-created if console re-enabled' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='OldConsole = 0' />
								</command>
								<command class_type='calculation' title='Remove Console Tab' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='ConsoleHandle = 0' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode = 0' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_3&quot;' />
									<argument exp='1' />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_4&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='AutoDetect' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
											<argument exp='scada_uart1' />
											<argument exp='&quot;RefreshPorts&quot;' />
											<argument exp='0' />
										</command>
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
											<argument exp='scada_uart1' />
											<argument exp='&quot;com_port&quot;' />
											<argument exp='0' />
										</command>
									</flowline>
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
											<argument exp='scada_uart1' />
											<argument exp='&quot;RefreshPorts&quot;' />
											<argument exp='1' />
										</command>
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
											<argument exp='scada_uart1' />
											<argument exp='&quot;com_port&quot;' />
											<argument exp='1' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode = 1' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_3&quot;' />
									<argument exp='0' />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;property_4&quot;' />
									<argument exp='1' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetCapacitorBank' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Cap' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 10' />
							<exp exp='TxData[2] = .Cap' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetCapBank -&gt; &quot; + ToString$(.Cap) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetCommsOK' description='Checks if comms are ok and stable' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsErrorMsg = 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetLogStartAngle' description='Collects the U Phase angle at the start of logging. 
Used to calculate and re-create the 3Phase voltage data.' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 16' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetLogStartAngle -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetVoltage' description='Sets the DC Voltage from 0 to 24V' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Voltage' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<param name='Index' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Volt' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Voltage &gt;= 0.0) &amp;&amp; (.Voltage &lt;= 100.0)' swap='0' >
							<flowline >
								<command class_type='calculation' title='3000 / 100 = 30.0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Voltage = .Voltage * 30.0' />
									<exp exp='.Volt = .Voltage' />
								</command>
								<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TxData[0] = 0' />
									<exp exp='TxData[1] = 2' />
									<exp exp='TxData[2] = .Volt' />
									<exp exp='TxData[3] = .Volt &gt;&gt; 8' />
									<exp exp='TxData[4] = .Index' />
								</command>
								<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (5,1)' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;SetVoltage &quot; + ToString$(.Index + 1) + &quot; -&gt; &quot; + ToString$(.Volt) + &quot;\n&quot;' />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Index = 0' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='VDC1 = .Volt' />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Index = 1' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='VDC2 = .Volt' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Get3PhaseMode' description='Checks to see if the brushless mode is enabled' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 15' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;Get3PhaseMode -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetAbsPosition' description='Reads the absolute position of the encoder' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TempUlong' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 21' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,5)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1] | (RxData[2] &lt;&lt; 8) | (RxData[3] &lt;&lt; 16) | (RxData[4] &lt;&lt; 24)' />
								</command>
								<command class_type='calculation' title='Calculation' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = (FLOAT .TempUlong / 10.0)' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetAbsPosition -&gt; &quot; + string .Return + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetFan' description='|Sets the speed of the FAN from 0 (MIN)  to 3000 (MAX)' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Speed' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 8' />
							<exp exp='TxData[2] = .Speed' />
							<exp exp='TxData[3] = .Speed &gt;&gt; 8' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (4,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetFanSpeed -&gt; &quot; + ToString$(.Speed) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetMotorDirection' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='MotorDirection' type='b1' description='0=FW, 1=BW' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 30' />
							<exp exp='TxData[2] = .MotorDirection' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetMotorDirection -&gt; &quot; + ToString$ (.MotorDirection) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetMotorDirection' description='Reads the motor direction' statediag='0' >
						<return name='Return' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 28' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
									<flowline >
										<command class_type='call' title='Right Direction - Load Cell' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='DIRECTION_LED' macro='TurnOn' />
									</flowline>
									<flowline >
										<command class_type='call' title='Wrong Direction - Scales' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='DIRECTION_LED' macro='TurnOff' />
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetMotorDirection -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Communications' description='' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='TxCount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='RxCount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ActualRxCount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteCount' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Vin' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RetVal' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Retry' type='u8' description='' isconst='0' isHidden='0' isinit='1' usrinit='20' setinit='20' />
						<command class_type='label' title='Declare Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='A' />
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.TxCount' swap='0' >
							<flowline >
								<command class_type='decision' title='Legacy or new comms mode' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsVer || CommsMode' swap='0' >
									<flowline >
										<command class_type='calculation' title='Replace component byte with command initialiser' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='TxData[0] = &apos;:&apos;' />
										</command>
										<command class_type='calculation' title='Append command end to end of packet' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='TxData[.TxCount] = &apos;;&apos;' />
											<exp exp='TxData[.TxCount + 1] = &apos;\n&apos;' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
											<flowline >
												<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketOpen' >
													<return exp='.RetVal' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retval' swap='0' >
													<flowline >
														<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Connect' >
															<return exp='.RetVal' />
															<argument exp='BoxIP' />
															<argument exp='BoxPort' />
														</command>
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retval' swap='0' >
															<flowline >
																<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Send' >
																	<argument exp='TxData' />
																	<argument exp='.TxCount + 2' />
																</command>
															</flowline>
															<flowline >
																<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
																<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
																	<flowline >
																		<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
																			<argument exp='ConsoleHandle' />
																			<argument exp='&quot;Comms Error Connect\n&quot;' />
																		</command>
																	</flowline>
																	<flowline />
																</command>
																<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
																	<flowline >
																		<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																			<exp exp='.Retry = .Retry - 1' />
																		</command>
																		<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
																		<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
																	</flowline>
																	<flowline />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline >
														<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
															<flowline >
																<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
																	<argument exp='ConsoleHandle' />
																	<argument exp='&quot;Comms Error Socket Not Open\n&quot;' />
																</command>
															</flowline>
															<flowline />
														</command>
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Retry = .Retry - 1' />
																</command>
																<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
																<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
															</flowline>
															<flowline />
														</command>
													</flowline>
												</command>
											</flowline>
											<flowline >
												<command class_type='call' title='Send Via USB' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='SendByteArray' >
													<argument exp='TxData' />
													<argument exp='.TxCount + 2' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='SendByteArray' >
											<argument exp='TxData' />
											<argument exp='.TxCount' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.RxCount' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='ReceiveByteArray' >
									<return exp='.ActualRxCount' />
									<argument exp='RxData' />
									<argument exp='.RxCount' />
									<argument exp='UART_TOUT' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.ByteCount = 0' />
									<exp exp='.ActualRxCount = 0' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
									<flowline >
										<command class_type='call' title='TCP Receive' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='Receive' >
											<return exp='.ActualRxCount' />
											<argument exp='RxData' />
											<argument exp='.RxCount' />
											<argument exp='TCP_TIMEOUT' />
										</command>
										<command class_type='call' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='NetworkComms1' macro='SocketClose' />
										<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
									</flowline>
									<flowline >
										<command class_type='loop' title='Loop' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' type='0' exp='.ByteCount &lt; .RxCount' >
											<flowline >
												<command class_type='decision' title='GetAPI command?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='TxData[1] = 0' swap='0' >
													<flowline >
														<command class_type='call' title='Shorter timeout as this may fail first time on new API boxes' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='Receive' >
															<return exp='.Vin' />
															<argument exp='UART_API_TOUT' />
														</command>
													</flowline>
													<flowline >
														<command class_type='sim' title='Call Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='scada_uart1' macro='Receive' >
															<return exp='.Vin' />
															<argument exp='UART_TOUT' />
														</command>
													</flowline>
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Vin &gt; 255' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.ByteCount = .RxCount' />
														</command>
													</flowline>
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='RxData[.ActualRxCount] = .Vin' />
															<exp exp='.ActualRxCount = .ActualRxCount + 1' />
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.ByteCount = .ByteCount + 1' />
														</command>
													</flowline>
												</command>
											</flowline>
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.ActualRxCount = .RxCount' swap='0' >
									<flowline >
										<command class_type='decision' title='Check reply matches up with command code' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='RxData[0] = TxData[1]' swap='0' >
											<flowline >
												<command class_type='comment' title='' comment='RX OK' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Return = 1' />
												</command>
											</flowline>
											<flowline >
												<command class_type='comment' title='' comment='RX CMD Code Incorrect!' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
													<flowline >
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
															<argument exp='ConsoleHandle' />
															<argument exp='&quot;Communication Error - Expected: &quot; + STRING TxData[1] + &quot; / Received: &quot; + STRING RxData[0]' />
														</command>
													</flowline>
													<flowline />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Retry = .Retry - 1' />
																</command>
																<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsErrorMsg = 0' swap='0' >
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Stopping = 0' swap='0' >
															<flowline >
																<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UI.SimpleMsgBox' >
																	<argument exp='&quot;Communication Error\r\nExpected: &quot; + STRING TxData[1] + &quot;\r\nReceived: &quot; + STRING RxData[0]' />
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='CommsErrorMsg = 1' />
																</command>
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
													<exp exp='.Return = 0' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline >
										<command class_type='decision' title='Get API command - Check comms version v1 or v2' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.ActualRxCount = 0) &amp;&amp; (CommsVer = 0) &amp;&amp; (TxData[1] = 0)' swap='0' >
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
																	<exp exp='.Retry = .Retry - 1' />
																</command>
																<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
																<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
															</flowline>
															<flowline />
														</command>
													</flowline>
													<flowline >
														<command class_type='comment' title='' comment='Start using legacy comms mode
If no reply then try again in the new command mode' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
														<command class_type='calculation' title='Change to new style mode' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='CommsVer = 1' />
														</command>
														<command class_type='goto' title='Retry command' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
													</flowline>
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='comment' title='' comment='RX Byte Count Incorrect!' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;Comms Error Rx Data\n&quot;' />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsMode' swap='0' >
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Retry' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='.Retry = .Retry - 1' />
														</command>
														<command class_type='delay' title='Delay' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='10' type='1' />
														<command class_type='goto' title='Goto Connection Point' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' labelid='0' labelname='' />
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='CommsErrorMsg = 0' swap='0' >
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Stopping = 0' swap='0' >
													<flowline >
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UI.SimpleMsgBox' >
															<argument exp='&quot;Comms Error CMD &quot; + string TxData[1] + &quot; RX Count &quot; + ToString$(.ActualRxCount) + &quot; / &quot; + ToString$(.RxCount)' />
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='CommsErrorMsg = 1' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = 0' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 1' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='COMMS_LED' macro='TurnOn' />
							</flowline>
							<flowline >
								<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='COMMS_LED' macro='TurnOff' />
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='StopOnError' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;Comms Error CMD &quot; + string TxData[1] + &quot; RX Count &quot; + ToString$(.ActualRxCount) + &quot; / &quot; + ToString$(.RxCount)' />
										</command>
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.StopSim' />
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetThreePhaseDriveMode' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Mode' type='b1' description='0=Simple, 1=Accurate' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 12' />
							<exp exp='TxData[2] = .Mode' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Mode' swap='0' >
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;SetThreePhaseGenMode -&gt; Accurate\n&quot;' />
												</command>
											</flowline>
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
													<argument exp='ConsoleHandle' />
													<argument exp='&quot;SetThreePhaseGenMode -&gt; Simple\n&quot;' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetCurrent' description='Reads the current of a single channel' statediag='0' >
						<return name='Return' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<param name='Channel' type='u8' description='Range: 0-6 - 0=DC1, 1=DC2, 2=U, 3=V, 4=W, 5=Dyno, 6=I, 7=TotalDriver' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='TempSint' type='s16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 23' />
							<exp exp='TxData[2] = .Channel' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,3)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.TempSint = RxData[1] | (RxData[2] &lt;&lt; 8)' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = FLOAT .TempSint / 100.0' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetCurrent Channel: &quot; + ToString$(.Channel) + &quot; -&gt; &quot; + FloatToString$(.Return, 1) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetFrequency' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Frequency' type='u16' description='Frequency of sine wave in Hz' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 3' />
							<exp exp='TxData[2] = .Frequency' />
							<exp exp='TxData[3] = .Frequency &gt;&gt; 8' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (4,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetFrequency -&gt; &quot; + ToString$(.Frequency) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetDynoLoad' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Load' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' />
						<local name='R' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='.R = FLOAT .Load * 2.55' />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 11' />
							<exp exp='TxData[2] = .R' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetResBank -&gt; &quot; + ToString$(.R) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetErrorStatus' description='Gets the current error status.
Error status will automatically resolve itself once the causing condition has been removed.
0 = No Error
1 = Error - likely over current or brownout' statediag='0' >
						<return name='Return' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 24' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,2)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Get Rx Data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = RxData[1]' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
									<flowline >
										<command class_type='call' title='1 = Error' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='ERROR_LED' macro='TurnOn' />
										<command class_type='decision' title='Only generate error messages once per error' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='BoxErrorMsg = 0' swap='0' >
											<flowline >
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return = 1' swap='0' >
													<flowline >
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UI.SimpleMsgBox' >
															<argument exp='&quot;Overcurrent Error - Outputs disabled&quot;' />
														</command>
														<command class_type='calculation' title='Reset Dialogue' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='BoxErrorMsg = 1' />
														</command>
													</flowline>
													<flowline />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return = 2' swap='0' >
													<flowline >
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UI.SimpleMsgBox' >
															<argument exp='&quot;RPM Too High - Outputs disabled&quot;' />
														</command>
														<command class_type='calculation' title='Reset Dialogue' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='BoxErrorMsg = 1' />
														</command>
													</flowline>
													<flowline />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='StopOnError' swap='0' >
													<flowline >
														<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.StopSim' />
														<command class_type='calculation' title='Reset Dialogue' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
															<exp exp='BoxErrorMsg = 0' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline >
										<command class_type='call' title='0 = No Error' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='ERROR_LED' macro='TurnOff' />
										<command class_type='calculation' title='Reset Dialogue' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='BoxErrorMsg = 0' />
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetErrorStatus -&gt; &quot; + ToString$(.Return) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='TempError' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ErrCounter &lt; 10' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='ErrCounter = ErrCounter + 1' />
										</command>
									</flowline>
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='UI.SimpleMsgBox' >
											<argument exp='&quot;Motor Driver Thermal Shutdown - Outputs disabled&quot;' />
										</command>
										<command class_type='calculation' title='Reset Dialogue' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='BoxErrorMsg = 1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='StopOnError' swap='0' >
											<flowline >
												<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.StopSim' />
											</flowline>
											<flowline />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='ErrCounter = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetControlOutputs' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Data' type='f32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0.0' setinit='' >
							<array size='4' />
						</param>
						<local name='BitData' type='s32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 55' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,17)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Convert incoming bytes to float' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TypeConversions1 :: SetByte (0,RxData[1])' />
									<exp exp='TypeConversions1 :: SetByte (1,RxData[2])' />
									<exp exp='TypeConversions1 :: SetByte (2,RxData[3])' />
									<exp exp='TypeConversions1 :: SetByte (3,RxData[4])' />
									<exp exp='.Data[0] = TypeConversions1 :: GetFloat ()' />
								</command>
								<command class_type='calculation' title='Convert incoming bytes to float' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TypeConversions1 :: SetByte (0,RxData[5])' />
									<exp exp='TypeConversions1 :: SetByte (1,RxData[6])' />
									<exp exp='TypeConversions1 :: SetByte (2,RxData[7])' />
									<exp exp='TypeConversions1 :: SetByte (3,RxData[8])' />
									<exp exp='.Data[1] = TypeConversions1 :: GetFloat ()' />
								</command>
								<command class_type='calculation' title='Convert incoming bytes to float' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TypeConversions1 :: SetByte (0,RxData[9])' />
									<exp exp='TypeConversions1 :: SetByte (1,RxData[10])' />
									<exp exp='TypeConversions1 :: SetByte (2,RxData[11])' />
									<exp exp='TypeConversions1 :: SetByte (3,RxData[12])' />
									<exp exp='.Data[2] = TypeConversions1 :: GetFloat ()' />
								</command>
								<command class_type='calculation' title='Convert incoming bytes to float' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='TypeConversions1 :: SetByte (0,RxData[13])' />
									<exp exp='TypeConversions1 :: SetByte (1,RxData[14])' />
									<exp exp='TypeConversions1 :: SetByte (2,RxData[15])' />
									<exp exp='TypeConversions1 :: SetByte (3,RxData[16])' />
									<exp exp='.Data[3] = TypeConversions1 :: GetFloat ()' />
								</command>
								<command class_type='calculation' title='Calculation' disable='1' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='.Return = .BitData' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;GetControlOutputs -&gt; &quot; + FloatToString$ (.Data[0],1) + &quot;, &quot; + FloatToString$ (.Data[1],1) + &quot;, &quot; + FloatToString$ (.Data[2],1) + &quot;, &quot; + FloatToString$ (.Data[3],1) + &quot;, &quot; + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetActive' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Active' type='b1' description='0=Off, 1=On' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 4' />
							<exp exp='TxData[2] = .Active' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
									<exp exp='MotorRunning = .Active' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Active' swap='0' >
									<flowline >
										<command class_type='call' title='Motor Running' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='RUN_LED' macro='TurnOn' />
									</flowline>
									<flowline >
										<command class_type='call' title='Motor Stopped' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='RUN_LED' macro='TurnOff' />
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetActive -&gt; &quot; + ToString$(.Active) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Start' description='Broadcast to all components that simulation is starting' statediag='0' >
						<return name='Return' type='u32' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='RetVal' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Comms errors allowed' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='Stopping = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TempError = 0' />
						</command>
						<command class_type='calculation' title='Reset the error message flag - produce error messages again' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='CommsErrorMsg = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='RxData[0] = 0' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetDriveMode' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='Mode' type='u8' description='0=PWM, 1=On/Off/Float' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 7' />
							<exp exp='TxData[2] = .Mode' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (3,1)' swap='0' >
							<flowline >
								<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
									<argument exp='ConsoleHandle' />
									<argument exp='&quot;SetDriveMode -&gt; &quot; + ToString$ (.Mode) + &quot;\n&quot;' />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetTCPProps' description='Sets the TCP IP address and Port' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<param name='IP0' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP1' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP2' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='IP3' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='Port' type='u16' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 80' />
							<exp exp='TxData[2] = .IP0' />
							<exp exp='TxData[3] = .IP1' />
							<exp exp='TxData[4] = .IP2' />
							<exp exp='TxData[5] = .IP3' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (6,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetIPAddress -&gt; &quot; + ToString$(.IP0) + &quot;.&quot; + ToString$(.IP1) + &quot;.&quot; + ToString$(.IP2) + &quot;.&quot; + ToString$(.IP3) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 81' />
							<exp exp='TxData[2] = .Port' />
							<exp exp='TxData[3] = .Port &gt;&gt; 8' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (4,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetTCPPort -&gt; &quot; + ToString$(.Port) + &quot;\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Main' description='' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Ev_Initialise' />
						<command class_type='call' title='User Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Initialise' >
							<argument exp='0' />
						</command>
						<command class_type='call' title='User Macro' disable='1' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetAPIVersion' />
					</flowline>
				</macro>
				<macro >
					<flowline name='SetAbsPosition' description='Resets the absolute motor position to 0' statediag='0' >
						<return name='Return' type='v0' description='' isconst='0' isHidden='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Setup TX data' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
							<exp exp='TxData[0] = 0' />
							<exp exp='TxData[1] = 29' />
						</command>
						<command class_type='decision' title='Send and receive data' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='Communications (2,1)' swap='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='ConsoleData' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Console.WriteText' >
											<argument exp='ConsoleHandle' />
											<argument exp='&quot;SetAbsPosition\n&quot;' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Initialise' description='Returns 1 if the connection is ok and communications have been established' statediag='0' >
						<return name='Return' type='b1' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<param name='MotorType' type='u8' description='0=DC, 1=1Phase, 2=3Phase, 3=AngleControl' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<local name='Version' type='u8' description='' isconst='0' isHidden='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='APP_LED' macro='TurnOn' />
						<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='StartupComms' >
							<return exp='.Return' />
						</command>
						<command class_type='decision' title='Port found and opened?' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetAPIVersion' >
									<return exp='.Version' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='(.Version &gt; 0) &amp;&amp; (.Version &lt; 255)' swap='0' >
									<flowline >
										<command class_type='calculation' title='Comms OK' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = 1' />
										</command>
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
											<argument exp='this' />
											<argument exp='&quot;APIVersion&quot;' />
											<argument exp='STRING .Version' />
										</command>
										<command class_type='call' title='Component Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' component='COMMS_LED' macro='TurnOn' />
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetSafetySwitch' />
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='GetErrorStatus' />
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='ZeroLoadCell' />
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetActive' >
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetCapacitorBank' >
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetDynoLoad' >
											<argument exp='0' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='SetMotorType' >
											<argument exp='.MotorType' />
										</command>
									</flowline>
									<flowline >
										<command class_type='comment' title='' comment='Double check we get a sensible value for the API version' textarea='12,0,12,0' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' />
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='Component.Property.SetValue' >
											<argument exp='this' />
											<argument exp='&quot;APIVersion&quot;' />
											<argument exp='&quot;Timeout&quot;' />
										</command>
										<command class_type='calculation' title='Comms Fail' cmdcolor='4206456' cmdcolor_sec='10785756' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' >
											<exp exp='.Return = 0' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='.Return' swap='0' >
							<flowline />
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='4767473' cmdcolor_sec='11337727' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' exp='StopOnError' swap='0' >
									<flowline >
										<command class_type='sim' title='Simulation' cmdcolor='4487093' cmdcolor_sec='11066367' cmdcolor_txt='16777215' cmdgradient='4' cmdopacity='0.64' macro='System.StopSim' />
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
			</macros>
			<component class_type='ref' guid='a7c1210d-3637-4a18-a6b3-9414ee73b179' vmin='1' vmaj='2' codename='scada_uart1' panelId='0' x='12.0691' y='-9.2' z='1' xsz='0.01' ysz='0.01' zsz='0.01' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='UseUART' data='1' />
					<value target='ConsoleData' data='1' />
					<value target='ConsoleColumns' data='64' />
					<value target='COMPort1::AutoClose' data='1' />
					<value target='DataSource' data='001' />
					<value target='com_port' data='23' />
					<value target='RefreshPorts' data='0' />
					<value target='baud' data='115200' />
					<value target='Injector' data='' />
					<value target='InjectorHandle' data='0' />
					<value target='InjectorChannel' data='0' />
					<value target='APIUseDDR' data='0' />
					<value target='APIDDRPin' data='0' />
					<value target='APIUseFC' data='' />
					<value target='APICTSPin' data='0' />
					<value target='APIRTSPin' data='' />
					<value target='APIDDRRXState' data='000' />
					<value target='BitDelay' data='0' />
					<value target='ParentName' data='ElectricalMachines' />
					<value target='CompName' data='' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='6508c7be-063a-4f9f-bae5-4a41cf977a86' vmin='0' vmaj='1' codename='TypeConversions1' panelId='0' x='11.6722' y='-43.3452' z='2' xsz='0.01' ysz='0.01' zsz='0.01' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='GenCode' data='1' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='ref' guid='91049bf5-2436-42dc-947a-c30c86463d98' vmin='5' vmaj='1' codename='NetworkComms1' panelId='0' x='261.569' y='-161.7' z='0' xsz='0.0125215' ysz='0.0149709' zsz='0.01' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='0' scadavisible='1' interactive='0' solid='0' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values >
					<value target='Component' data='' />
					<value target='LibraryComponent1::OutputIcon::LinkTo' data='0' />
					<value target='TCPIP_Channel' data='000' />
					<value target='RemapIndex' data='0' />
					<value target='Status' data='Simulation Only' />
					<value target='Sim' data='0' />
					<value target='SimControl' data='000' />
					<value target='NetworkInterface' data='004' />
					<value target='IPAddress' data='0.0.0.0' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
			<component class_type='group' codename='group7' panelId='0' x='66' y='-106.6' z='3' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
				<resources />
				<properties />
				<values />
				<events />
				<apis />
				<variables />
				<macros />
				<component class_type='group' codename='group1' panelId='0' x='0' y='86.1' z='-2.25' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
					<resources />
					<properties />
					<values />
					<events />
					<apis />
					<variables />
					<macros />
					<component class_type='ref' guid='44f82374-a417-40d5-bd42-23a177a390d2' vmin='0' vmaj='1' codename='APP_LED' panelId='0' x='0' y='-4.38849' z='-1' xsz='104.167' ysz='26.2365' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
						<resources />
						<properties />
						<values >
							<value target='Pin' data='$PORTC.0' />
							<value target='Polarity' data='001' />
							<value target='ComponentLabel' data='001' />
							<value target='GdiText2::sText' data='' />
							<value target='ComponentLabelPosition' data='000' />
							<value target='ComponentLabelXPostion' data='0' />
							<value target='ComponentLabelYPostion' data='0.833333' />
							<value target='LabelColour' data='-1' />
							<value target='ShowConnectionLabel' data='1' />
							<value target='ShowPinValue' data='0' />
							<value target='PinLabelPosition' data='000' />
							<value target='PinLabelXPostion' data='0' />
							<value target='PinLabelYPostion' data='-1.041667' />
							<value target='AppDevDetected' data='1' />
							<value target='Shape' data='001' />
							<value target='Colour' data='005' />
							<value target='Style' data='000' />
							<value target='AutoOffColour' data='0' />
							<value target='OnColour' data='2408448' />
							<value target='OffColour' data='13056' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
					<component class_type='GdiText' codename='TextApp' panelId='0' x='0' y='-2.12149' z='0.999999' xsz='31.875' ysz='10' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='8' comp2dType='46' >
						<resources />
						<properties />
						<values >
							<value target='sText' data='Applications' />
							<value target='bWordWrap' data='0' />
							<value target='nHorizontalAlignment' data='2' />
							<value target='nVerticalAlignment' data='2' />
							<value target='nAngle' data='0' />
							<value target='fntFamily' data='Calibri' />
							<value target='bFixedScale' data='0' />
							<value target='dScale' data='0.9' />
							<value target='bScaleWidth' data='0' />
							<value target='iFontSize' data='12' />
							<value target='bBold' data='0' />
							<value target='bItalic' data='0' />
							<value target='bUnderline' data='0' />
							<value target='bStrikethrough' data='0' />
							<value target='colTextColour' data='16777215' />
							<value target='colTextGradient' data='9868950' />
							<value target='nGradient' data='0' />
							<value target='nTextOpacity' data='1.0' />
							<value target='colBackgroundColour' data='-1' />
							<value target='colBackgroundGradient' data='-1' />
							<value target='nBackgroundGradient' data='0' />
							<value target='nBackgroundOpacity' data='1.0' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
				</component>
				<component class_type='group' codename='group6' panelId='0' x='0' y='51.66' z='2.75' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
					<resources />
					<properties />
					<values />
					<events />
					<apis />
					<variables />
					<macros />
					<component class_type='ref' guid='44f82374-a417-40d5-bd42-23a177a390d2' vmin='0' vmaj='1' codename='COMMS_LED' panelId='0' x='0' y='-4.38849' z='-0.500001' xsz='104.167' ysz='26.2365' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
						<resources />
						<properties />
						<values >
							<value target='Pin' data='$PORTC.0' />
							<value target='Polarity' data='001' />
							<value target='ComponentLabel' data='001' />
							<value target='GdiText2::sText' data='' />
							<value target='ComponentLabelPosition' data='000' />
							<value target='ComponentLabelXPostion' data='0' />
							<value target='ComponentLabelYPostion' data='0.833333' />
							<value target='LabelColour' data='-1' />
							<value target='ShowConnectionLabel' data='1' />
							<value target='ShowPinValue' data='0' />
							<value target='PinLabelPosition' data='000' />
							<value target='PinLabelXPostion' data='0' />
							<value target='PinLabelYPostion' data='-1.041667' />
							<value target='AppDevDetected' data='1' />
							<value target='Shape' data='001' />
							<value target='Colour' data='005' />
							<value target='Style' data='000' />
							<value target='AutoOffColour' data='0' />
							<value target='OnColour' data='2408448' />
							<value target='OffColour' data='13056' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
					<component class_type='GdiText' codename='TextComms' panelId='0' x='0' y='-2.12149' z='0.499999' xsz='31.875' ysz='10' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='8' comp2dType='46' >
						<resources />
						<properties />
						<values >
							<value target='sText' data='Comms' />
							<value target='bWordWrap' data='0' />
							<value target='nHorizontalAlignment' data='2' />
							<value target='nVerticalAlignment' data='2' />
							<value target='nAngle' data='0' />
							<value target='fntFamily' data='Calibri' />
							<value target='bFixedScale' data='0' />
							<value target='dScale' data='1' />
							<value target='bScaleWidth' data='0' />
							<value target='iFontSize' data='12' />
							<value target='bBold' data='0' />
							<value target='bItalic' data='0' />
							<value target='bUnderline' data='0' />
							<value target='bStrikethrough' data='0' />
							<value target='colTextColour' data='16777215' />
							<value target='colTextGradient' data='9868950' />
							<value target='nGradient' data='0' />
							<value target='nTextOpacity' data='1.0' />
							<value target='colBackgroundColour' data='-1' />
							<value target='colBackgroundGradient' data='-1' />
							<value target='nBackgroundGradient' data='0' />
							<value target='nBackgroundOpacity' data='1.0' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
				</component>
				<component class_type='group' codename='group3' panelId='0' x='0' y='17.22' z='-0.25' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
					<resources />
					<properties />
					<values />
					<events />
					<apis />
					<variables />
					<macros />
					<component class_type='ref' guid='44f82374-a417-40d5-bd42-23a177a390d2' vmin='0' vmaj='1' codename='ERROR_LED' panelId='0' x='0' y='-4.38849' z='-1' xsz='104.167' ysz='26.2365' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
						<resources />
						<properties />
						<values >
							<value target='Pin' data='$PORTC.0' />
							<value target='Polarity' data='001' />
							<value target='ComponentLabel' data='001' />
							<value target='GdiText2::sText' data='' />
							<value target='ComponentLabelPosition' data='000' />
							<value target='ComponentLabelXPostion' data='0' />
							<value target='ComponentLabelYPostion' data='0.833333' />
							<value target='LabelColour' data='-1' />
							<value target='ShowConnectionLabel' data='1' />
							<value target='ShowPinValue' data='0' />
							<value target='PinLabelPosition' data='000' />
							<value target='PinLabelXPostion' data='0' />
							<value target='PinLabelYPostion' data='-1.041667' />
							<value target='AppDevDetected' data='1' />
							<value target='Shape' data='001' />
							<value target='Colour' data='005' />
							<value target='Style' data='000' />
							<value target='AutoOffColour' data='0' />
							<value target='OnColour' data='2408448' />
							<value target='OffColour' data='13056' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
					<component class_type='GdiText' codename='TextError' panelId='0' x='0' y='-2.12149' z='0.999999' xsz='31.875' ysz='10' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='8' comp2dType='46' >
						<resources />
						<properties />
						<values >
							<value target='sText' data='Error' />
							<value target='bWordWrap' data='0' />
							<value target='nHorizontalAlignment' data='2' />
							<value target='nVerticalAlignment' data='2' />
							<value target='nAngle' data='0' />
							<value target='fntFamily' data='Calibri' />
							<value target='bFixedScale' data='0' />
							<value target='dScale' data='0.9' />
							<value target='bScaleWidth' data='0' />
							<value target='iFontSize' data='12' />
							<value target='bBold' data='0' />
							<value target='bItalic' data='0' />
							<value target='bUnderline' data='0' />
							<value target='bStrikethrough' data='0' />
							<value target='colTextColour' data='16777215' />
							<value target='colTextGradient' data='9868950' />
							<value target='nGradient' data='0' />
							<value target='nTextOpacity' data='1.0' />
							<value target='colBackgroundColour' data='-1' />
							<value target='colBackgroundGradient' data='-1' />
							<value target='nBackgroundGradient' data='0' />
							<value target='nBackgroundOpacity' data='1.0' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
				</component>
				<component class_type='group' codename='group2' panelId='0' x='0' y='-17.22' z='-1.25' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
					<resources />
					<properties />
					<values />
					<events />
					<apis />
					<variables />
					<macros />
					<component class_type='ref' guid='44f82374-a417-40d5-bd42-23a177a390d2' vmin='0' vmaj='1' codename='MOTOR_IN_LED' panelId='0' x='0' y='-4.38849' z='-1.5' xsz='104.167' ysz='26.2365' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
						<resources />
						<properties />
						<values >
							<value target='Pin' data='$PORTC.0' />
							<value target='Polarity' data='001' />
							<value target='ComponentLabel' data='001' />
							<value target='GdiText2::sText' data='' />
							<value target='ComponentLabelPosition' data='000' />
							<value target='ComponentLabelXPostion' data='0' />
							<value target='ComponentLabelYPostion' data='0.833333' />
							<value target='LabelColour' data='-1' />
							<value target='ShowConnectionLabel' data='1' />
							<value target='ShowPinValue' data='0' />
							<value target='PinLabelPosition' data='000' />
							<value target='PinLabelXPostion' data='0' />
							<value target='PinLabelYPostion' data='-1.041667' />
							<value target='AppDevDetected' data='1' />
							<value target='Shape' data='001' />
							<value target='Colour' data='005' />
							<value target='Style' data='000' />
							<value target='AutoOffColour' data='0' />
							<value target='OnColour' data='2408448' />
							<value target='OffColour' data='13056' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
					<component class_type='GdiText' codename='TextMotIn' panelId='0' x='0' y='-2.12149' z='1.5' xsz='31.875' ysz='10' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='8' comp2dType='46' >
						<resources />
						<properties />
						<values >
							<value target='sText' data='Motor In' />
							<value target='bWordWrap' data='0' />
							<value target='nHorizontalAlignment' data='2' />
							<value target='nVerticalAlignment' data='2' />
							<value target='nAngle' data='0' />
							<value target='fntFamily' data='Calibri' />
							<value target='bFixedScale' data='0' />
							<value target='dScale' data='1' />
							<value target='bScaleWidth' data='0' />
							<value target='iFontSize' data='12' />
							<value target='bBold' data='0' />
							<value target='bItalic' data='0' />
							<value target='bUnderline' data='0' />
							<value target='bStrikethrough' data='0' />
							<value target='colTextColour' data='16777215' />
							<value target='colTextGradient' data='9868950' />
							<value target='nGradient' data='0' />
							<value target='nTextOpacity' data='1.0' />
							<value target='colBackgroundColour' data='-1' />
							<value target='colBackgroundGradient' data='-1' />
							<value target='nBackgroundGradient' data='0' />
							<value target='nBackgroundOpacity' data='1.0' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
				</component>
				<component class_type='group' codename='group5' panelId='0' x='0' y='-51.66' z='1.75' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
					<resources />
					<properties />
					<values />
					<events />
					<apis />
					<variables />
					<macros />
					<component class_type='ref' guid='44f82374-a417-40d5-bd42-23a177a390d2' vmin='0' vmaj='1' codename='DIRECTION_LED' panelId='0' x='0' y='-4.38849' z='-1.5' xsz='104.167' ysz='26.2365' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
						<resources />
						<properties />
						<values >
							<value target='Pin' data='$PORTC.0' />
							<value target='Polarity' data='001' />
							<value target='ComponentLabel' data='001' />
							<value target='GdiText2::sText' data='' />
							<value target='ComponentLabelPosition' data='000' />
							<value target='ComponentLabelXPostion' data='0' />
							<value target='ComponentLabelYPostion' data='0.833333' />
							<value target='LabelColour' data='-1' />
							<value target='ShowConnectionLabel' data='1' />
							<value target='ShowPinValue' data='0' />
							<value target='PinLabelPosition' data='000' />
							<value target='PinLabelXPostion' data='0' />
							<value target='PinLabelYPostion' data='-1.041667' />
							<value target='AppDevDetected' data='1' />
							<value target='Shape' data='001' />
							<value target='Colour' data='005' />
							<value target='Style' data='000' />
							<value target='AutoOffColour' data='0' />
							<value target='OnColour' data='2408448' />
							<value target='OffColour' data='13056' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
					<component class_type='GdiText' codename='TextDir' panelId='0' x='0' y='-2.12149' z='1.5' xsz='31.875' ysz='10' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='8' comp2dType='46' >
						<resources />
						<properties />
						<values >
							<value target='sText' data='Direction' />
							<value target='bWordWrap' data='0' />
							<value target='nHorizontalAlignment' data='2' />
							<value target='nVerticalAlignment' data='2' />
							<value target='nAngle' data='0' />
							<value target='fntFamily' data='Calibri' />
							<value target='bFixedScale' data='0' />
							<value target='dScale' data='0.9' />
							<value target='bScaleWidth' data='0' />
							<value target='iFontSize' data='12' />
							<value target='bBold' data='0' />
							<value target='bItalic' data='0' />
							<value target='bUnderline' data='0' />
							<value target='bStrikethrough' data='0' />
							<value target='colTextColour' data='16777215' />
							<value target='colTextGradient' data='9868950' />
							<value target='nGradient' data='0' />
							<value target='nTextOpacity' data='1.0' />
							<value target='colBackgroundColour' data='-1' />
							<value target='colBackgroundGradient' data='-1' />
							<value target='nBackgroundGradient' data='0' />
							<value target='nBackgroundOpacity' data='1.0' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
				</component>
				<component class_type='group' codename='group4' panelId='0' x='0' y='-86.1' z='0.75' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
					<resources />
					<properties />
					<values />
					<events />
					<apis />
					<variables />
					<macros />
					<component class_type='ref' guid='44f82374-a417-40d5-bd42-23a177a390d2' vmin='0' vmaj='1' codename='RUN_LED' panelId='0' x='0' y='-4.38849' z='-1' xsz='104.167' ysz='26.2365' zsz='25' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='0' comp2dType='0' >
						<resources />
						<properties />
						<values >
							<value target='Pin' data='$PORTC.0' />
							<value target='Polarity' data='001' />
							<value target='ComponentLabel' data='001' />
							<value target='GdiText2::sText' data='' />
							<value target='ComponentLabelPosition' data='000' />
							<value target='ComponentLabelXPostion' data='0' />
							<value target='ComponentLabelYPostion' data='0.833333' />
							<value target='LabelColour' data='-1' />
							<value target='ShowConnectionLabel' data='1' />
							<value target='ShowPinValue' data='0' />
							<value target='PinLabelPosition' data='000' />
							<value target='PinLabelXPostion' data='0' />
							<value target='PinLabelYPostion' data='-1.041667' />
							<value target='AppDevDetected' data='1' />
							<value target='Shape' data='001' />
							<value target='Colour' data='005' />
							<value target='Style' data='000' />
							<value target='AutoOffColour' data='0' />
							<value target='OnColour' data='2408448' />
							<value target='OffColour' data='13056' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
					<component class_type='GdiText' codename='TextRun' panelId='0' x='0' y='-2.12149' z='0.999999' xsz='31.875' ysz='10' zsz='0' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' scadavisible='1' interactive='1' solid='1' layer='2' poslock='8' comp2dType='46' >
						<resources />
						<properties />
						<values >
							<value target='sText' data='Run' />
							<value target='bWordWrap' data='0' />
							<value target='nHorizontalAlignment' data='2' />
							<value target='nVerticalAlignment' data='2' />
							<value target='nAngle' data='0' />
							<value target='fntFamily' data='Calibri' />
							<value target='bFixedScale' data='0' />
							<value target='dScale' data='1' />
							<value target='bScaleWidth' data='0' />
							<value target='iFontSize' data='12' />
							<value target='bBold' data='0' />
							<value target='bItalic' data='0' />
							<value target='bUnderline' data='0' />
							<value target='bStrikethrough' data='0' />
							<value target='colTextColour' data='16777215' />
							<value target='colTextGradient' data='9868950' />
							<value target='nGradient' data='0' />
							<value target='nTextOpacity' data='1.0' />
							<value target='colBackgroundColour' data='-1' />
							<value target='colBackgroundGradient' data='-1' />
							<value target='nBackgroundGradient' data='0' />
							<value target='nBackgroundOpacity' data='1.0' />
						</values>
						<events />
						<apis />
						<variables />
						<macros />
					</component>
				</component>
			</component>
		</component>
	</components>
	<scadaresourcelookup />
	<keymap />
	<panel2d shadows='0' lighting='2' brightness='0' >
		<background rgb='8882055' img='' style='0' />
		<camera xe='-13.4802' ye='-11.2468' ze='134.773' xt='-13.4802' yt='-11.2468' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<viewport dx='642' dy='419' zoom='576.39' fix_topleft='0' />
		<page x='1000' y='1000' show='0' rgb='0' />
		<winpos ID='7005' RectRecentFloat='22,774,672,1224' RectRecentDocked='0,0,439,419' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel2d>
	<panel3d shadows='0' lighting='0' brightness='-51' perspective='1' >
		<background rgb='32768' img='' style='0' />
		<table rgb='7360576' img='' style='0' size='0' />
		<camera xe='-214.73' ye='528.738' ze='299.006' xt='-214.73' yt='528.738' zt='0.0236303' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey0 xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey1 xe='-3.67394e-14' ye='0' ze='-300' xt='0' yt='0' zt='0' xquat='0' yquat='1' zquat='0' wquat='6.12323e-17' />
		<camerakey2 xe='0' ye='-300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.707107' yquat='0' zquat='0' wquat='0.707107' />
		<camerakey3 xe='-3.67394e-14' ye='300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-4.32978e-17' yquat='0.707107' zquat='0.707107' wquat='4.32978e-17' />
		<camerakey4 xe='-300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='0.5' zquat='0.5' wquat='0.5' />
		<camerakey5 xe='300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='-0.5' zquat='-0.5' wquat='0.5' />
		<camerakey6 xe='-173.205' ye='-173.205' ze='173.205' xt='0' yt='0' zt='0' xquat='-0.424708' yquat='0.17592' zquat='0.339851' wquat='0.820473' />
		<winpos ID='7004' RectRecentFloat='1185,151,1752,873' RectRecentDocked='0,0,439,593' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='0' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='0' />
	</panel3d>
	<panels2d count='1' >
		<panel2d_0 id='0' name='NewPanel' >
			<winpos ID='1171' RectRecentFloat='1025,158,1198,473' RectRecentDocked='735,141,1174,734' RecentFrameAlignment='16384' RecentRowIndex='0' IsFloating='1' MRUWidth='32767' PinState='0' IsMaximized='0' IsVisible='1' />
			<background fill='72057594035033043' showgrid='0' gridstyle='0' gridsize='5' gridbrush='71776119075691740' snaptogrid='0' />
		</panel2d_0>
	</panels2d>
	<layout >
		<view type='0' name='GetErrorStatus' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Main' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Communications' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetWeight' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetVoltage' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetRPM' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetCurrent' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetSafetySwitch' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Start' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetTCPProps' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetFrequency' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Property' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetControlFeedback' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetControlMaxDrivePercentage' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetControlKP' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetControlSetpoint' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetControlKI' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetControlKD' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetLoadCellCalibration' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetThreePhaseDriveMode' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetDynoLoad' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetDriveMode' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetAbsPosition' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetAbsPosition' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetCapacitorBank' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetFan' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ZeroLoadCell' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetActive' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetCommsOK' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetVoltage' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Get3PhaseMode' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetLogStartAngle' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetMotorType' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetMotorDirection' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetMotorDirection' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetControlOutputs' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='StartupComms' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetDataArray' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetAPIVersion' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Stop' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetLogDataReady' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetLogData' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAAaQMAAEwCAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
	</layout>
</document>
</root>
