<root>
<document schema='101' license='1,Dev User,HJVC24' title='' description='' target='PIC.16F.16F877A' >
	<config data='!0,3f72%0,2%2,0%3,0%6,1%7,0%9,3%b,1%8,1%d,1' clkspd='19660800' simspd='1' usewdt='0' constif='0' />
	<plugins >
		<dll_dbg_icd enabled='0' >
			<data name='debug' value='1' />
			<data name='userpins' value='0' />
			<data name='speed' value='0' />
			<data name='usev9' value='0' />
			<data name='breaks' value='8' />
			<data name='stacks' value='8' />
			<data name='clkport' value='1' />
			<data name='clkbit' value='6' />
			<data name='dataport' value='1' />
			<data name='databit' value='7' />
			<data name='ghostype' value='0' />
			<data name='monitor' value='1' />
			<data name='ictloop' value='0' />
			<data name='ictrate' value='20000' />
			<data name='ictmask' value='0' />
			<data name='anlpres' value='19' />
			<data name='digmask1' value='-1' />
			<data name='digmask2' value='-1' />
		</dll_dbg_icd>
		<dll_models enabled='1' />
		<dll_upgrader enabled='1' />
		<dll_webhelp enabled='1' />
	</plugins>
	<supplement use='1' head='unsigned char FCV_SREG_TEMP;' body='' />
	<debug />
	<ghost >
		<FK2 >
			<data name='FK2D0' port='4294967295' pin='4294967295' />
			<data name='FK2D1' port='4294967295' pin='4294967295' />
			<data name='FK2D2' port='4294967295' pin='4294967295' />
			<data name='FK2D3' port='4294967295' pin='4294967295' />
			<data name='FK2D4' port='4294967295' pin='4294967295' />
			<data name='FK2D5' port='4294967295' pin='4294967295' />
			<data name='FK2D6' port='4294967295' pin='4294967295' />
			<data name='FK2D7' port='4294967295' pin='4294967295' />
			<data name='FK2D8' port='4294967295' pin='4294967295' />
			<data name='FK2D9' port='4294967295' pin='4294967295' />
			<data name='FK2D10' port='4294967295' pin='4294967295' />
			<data name='FK2D11' port='4294967295' pin='4294967295' />
			<data name='FK2D12' port='4294967295' pin='4294967295' />
			<data name='FK2D13' port='4294967295' pin='4294967295' />
			<data name='FK2D14' port='4294967295' pin='4294967295' />
			<data name='FK2D15' port='4294967295' pin='4294967295' />
			<data name='FK2A0' port='4294967295' pin='4294967295' />
			<data name='FK2A1' port='4294967295' pin='4294967295' />
			<data name='FK2A2' port='4294967295' pin='4294967295' />
			<data name='FK2A3' port='4294967295' pin='4294967295' />
			<data name='FK2A4' port='4294967295' pin='4294967295' />
			<data name='FK2A5' port='4294967295' pin='4294967295' />
		</FK2>
		<ICD >
			<data name='AnalogPrescaleValue' value='19' />
			<data name='DigitalSampleRate' value='100000' />
			<data name='BreakpointCount' value='8' />
			<data name='CallStackDepthCount' value='8' />
			<data name='ClockPort' value='1' />
			<data name='ClockPin' value='6' />
			<data name='DataPort' value='1' />
			<data name='DataPin' value='7' />
			<data name='UseDefaultPins' value='1' />
			<data name='WrapEnabled' value='1' />
			<data name='CommsDelayOverridden' value='0' />
			<data name='CommsDelay' value='9' />
			<data name='CalculatedCommsDelay' value='9' />
		</ICD>
		<pins >
			<digital A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
			<analog A='0' B='0' C='0' D='0' E='0' F='0' G='0' H='0' I='0' J='0' K='0' L='0' M='0' N='0' O='0' P='0' Q='0' R='0' S='0' T='0' U='0' V='0' W='0' X='0' Y='0' Z='0' />
		</pins>
	</ghost>
	<components >
		<settings autoimg='0' center='1' unitscale='0' fixedscale='0' fixedx='1' fixedy='1' fixedz='1' headcode='1' />
		<definition guid='0991a27e-9d6c-4f20-a9cc-b814aa973e60' vstate='40' vmin='2' vmaj='1' srcleaf='LinMaster.fcfx' visiblename='LIN Master' description='Low level routines for controlling a LIN master (1.3 &amp; 2.0) interface.' category='Comms' catenable='1' author='Matrix Ltd' manuname='' manucode='' sysinfo='17830891' keywords='' dynamic='1' iconpath='..\icons\components\LINmaster.png' />
		<component class_type='root' codename='LinMaster' x='0' y='0' z='0' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' interactive='1' solid='1' layer='0' poslock='0' >
			<resources >
				<file name='LINmaster.png' source='..\icons\Large Comms Icons\LINmaster.png' />
			</resources>
			<properties >
				<property name='Baud Rate' target='BAUD_LIST' typeid='16' hidden='0' locked='0' info='LIN bus data rate in bits per second' filter='0002400
0019600
00219200
003CUSTOM' />
				<property name='Label' target='label' typeid='10' hidden='0' locked='0' info='Label shown on the comms flasher component.' />
				<property name='BitTime' target='pBitTime' typeid='21' hidden='1' locked='0' info='' />
				<property name='Bit13Time' target='pBit13Time' typeid='21' hidden='1' locked='0' info='' />
				<property name='BitHalfTime' target='pBitHalfTime' typeid='21' hidden='1' locked='0' info='' />
				<property name='Custom Baud' target='BAUD' typeid='14' hidden='1' locked='0' info='Custom baud rate used to allow entry of any data rate' />
				<property name='Connections' folder='property_1' hidden='0' >
					<property name='TX' target='TX' typeid='5' hidden='0' locked='0' info='LIN Transmit Pin' />
					<property name='RX' target='RX' typeid='5' hidden='0' locked='0' info='LIN Receive Pin
' />
					<property name='CS' target='CS' typeid='5' hidden='0' locked='0' info='LIN bus chip select pin' />
					<property name='WAKE' target='WAKE' typeid='5' hidden='0' locked='0' info='LIN bus Wake up pin
' />
				</property>
			</properties>
			<values >
				<value target='BAUD_LIST' data='002' />
				<value target='label' data='LIN Master' />
				<value target='pBitTime' data='52' />
				<value target='pBit13Time' data='676' />
				<value target='pBitHalfTime' data='26' />
				<value target='BAUD' data='19200' />
				<value target='TX' data='$PORTB.0' />
				<value target='RX' data='$PORTB.1' />
				<value target='CS' data='$PORTB.2' />
				<value target='WAKE' data='$PORTB.3' />
			</values>
			<events >
				<event class='Components' event='Property' target='Ev_Property' />
				<event class='Components' event='Initialise' target='Ev_Initialise' />
			</events>
			<apis >
				<api name='PowerDown' alt='PowerDown' type='1' proto='1' />
				<api name='GetState' alt='GetState' type='1' proto='1' />
				<api name='debug' alt='debug' type='1' proto='1' />
				<api name='ReadDataCount' alt='ReadDataCount' type='1' proto='1' />
				<api name='SendMessage' alt='SendMessage' type='1' proto='1' />
				<api name='ReadData' alt='ReadData' type='1' proto='1' />
				<api name='SetData' alt='SetData' type='1' proto='1' />
				<api name='SendMessageWithData' alt='SendMessageWithData' type='1' proto='1' />
				<api name='WakeUp' alt='WakeUp' type='1' proto='1' />
				<api name='Initialise' alt='Initialise' type='1' proto='1' />
			</apis>
			<variables >
				<variable public='0' >
					<def class_type='variable' name='STATE_TIMEOUT' type='s16' description='' isconst='1' isinit='1' usrinit='3' setinit='3' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RX_DATA' type='u8' description='' isconst='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='8' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_BITERROR' type='s16' description='' isconst='1' isinit='1' usrinit='11' setinit='11' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_OERR' type='s16' description='' isconst='1' isinit='1' usrinit='5' setinit='5' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='false' type='b1' description='' isconst='1' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_BADCOUNT' type='s16' description='' isconst='1' isinit='1' usrinit='12' setinit='12' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_NULL' type='s16' description='' isconst='1' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_FAULT' type='s16' description='' isconst='1' isinit='1' usrinit='10' setinit='10' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_POWERDOWN' type='s16' description='' isconst='1' isinit='1' usrinit='9' setinit='9' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TX_DATA' type='u8' description='' isconst='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='8' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='sDebug' type='T8' description='' isconst='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='20' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='TIMEOUT_VAL' type='s16' description='' isconst='1' isinit='1' usrinit='20' setinit='20' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_READY' type='s16' description='' isconst='1' isinit='1' usrinit='7' setinit='7' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RXFIDDLE' type='s16' description='' isconst='1' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='debug' type='u8' description='' isconst='0' isinit='0' usrinit='&quot;&quot;' setinit='' >
						<array size='2' />
					</def>
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_RX' type='s16' description='' isconst='1' isinit='1' usrinit='2' setinit='2' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='MODE_PAUSE' type='s16' description='' isconst='1' isinit='1' usrinit='100' setinit='100' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_OPERATION' type='s16' description='' isconst='1' isinit='1' usrinit='8' setinit='8' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='LIN_STATE' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_FERR' type='s16' description='' isconst='1' isinit='1' usrinit='4' setinit='4' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='sreg_temp' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RX_COUNT' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_TX' type='s16' description='' isconst='1' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='STATE_BADCRC' type='s16' description='' isconst='1' isinit='1' usrinit='6' setinit='6' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='LastIDByte' type='u8' description='' isconst='0' isinit='1' usrinit='0' setinit='0' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='true' type='b1' description='' isconst='1' isinit='1' usrinit='1' setinit='1' />
				</variable>
				<variable public='0' >
					<def class_type='variable' name='RX_BYTE' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
				</variable>
			</variables>
			<macros >
				<macro >
					<flowline name='SIM_UpdateBaud' description='' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='BAUD_LIST &lt; 3' swap='0' >
							<flowline >
								<command class_type='sim' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;BAUD&quot;' />
									<argument exp='false' />
								</command>
								<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='3568629' cmdcolor_sec='3568629' exp='BAUD_LIST' >
									<case >
										<flowline >
											<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='1' />
											<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='0' />
											<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='1' />
											<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='0' />
											<command class_type='sim' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
												<argument exp='this' />
												<argument exp='&quot;BAUD&quot;' />
												<argument exp='&quot;2400&quot;' />
											</command>
										</flowline>
									</case>
									<case exp='1' >
										<flowline >
											<command class_type='sim' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
												<argument exp='this' />
												<argument exp='&quot;BAUD&quot;' />
												<argument exp='&quot;9600&quot;' />
											</command>
										</flowline>
									</case>
									<case exp='2' >
										<flowline >
											<command class_type='sim' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
												<argument exp='this' />
												<argument exp='&quot;BAUD&quot;' />
												<argument exp='&quot;19200&quot;' />
											</command>
										</flowline>
									</case>
								</command>
							</flowline>
							<flowline >
								<command class_type='sim' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetVisible' >
									<argument exp='this' />
									<argument exp='&quot;BAUD&quot;' />
									<argument exp='true' />
								</command>
							</flowline>
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SIM_BaudCalc' />
					</flowline>
				</macro>
				<macro >
					<flowline name='PowerDown' description='Power Down the device' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='CS = 0' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='MODE_PAUSE' type='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='LIN_STATE = STATE_POWERDOWN' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Initialise' description='Initialisation routine for the component once the component is linked to its parent' >
						<return name='Return' type='u32' description='Non-zero to prevent initialisation' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='name' type='T8' description='' isconst='0' isinit='1' usrinit='&quot;&quot;' setinit='&quot;&quot;' >
							<array size='20' />
						</local>
						<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SIM_UpdateBaud' />
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='File.AbsPath' >
							<return exp='.name' />
							<argument exp='&quot;this:LINmaster.png&quot;' />
							<argument exp='this' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
							<argument exp='dash_IO_flasher' />
							<argument exp='&quot;icon_image&quot;' />
							<argument exp='.name' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SIM_BaudCalc' description='' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<local name='TempInt' type='u16' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.TempInt = 1000000 / BAUD' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
							<argument exp='this' />
							<argument exp='&quot;pBitTime&quot;' />
							<argument exp='.TempInt' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.TempInt = pBitTime / 2' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
							<argument exp='this' />
							<argument exp='&quot;pBitHalfTime&quot;' />
							<argument exp='.TempInt' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.TempInt = pBitTime * 13' />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.SetValue' >
							<argument exp='this' />
							<argument exp='&quot;pBit13Time&quot;' />
							<argument exp='.TempInt' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SendByte' description='Sends the byte value and returns the state' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='ByteVal' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='FullSizeStopBit' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='Idx' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='ExitLoop' type='b1' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='DataBit' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Return = STATE_NULL' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Idx = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.ExitLoop = false' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='TX = 0' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitTime' type='0' />
						<command class_type='comment' title='' comment='Shift bits out' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
						<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='.ExitLoop = false' start='0' >
							<flowline >
								<command class_type='comment' title='' comment='Write bit' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.DataBit = .ByteVal &amp; 0x01' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='TX = .DataBit' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitHalfTime' type='0' />
								<command class_type='comment' title='' comment='Verify bit' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='RX = .DataBit' swap='0' >
									<flowline >
										<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitHalfTime' type='0' />
										<command class_type='comment' title='' comment='Update loop variables' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
										<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Idx = 7' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.ExitLoop = true' />
												</command>
											</flowline>
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.ByteVal = .ByteVal &gt;&gt; 1' />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.Idx = .Idx + 1' />
												</command>
											</flowline>
										</command>
									</flowline>
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.Return = STATE_BITERROR' />
										</command>
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.ExitLoop = true' />
										</command>
									</flowline>
								</command>
							</flowline>
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='TX = 1' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_NULL' swap='0' >
							<flowline >
								<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitHalfTime' type='0' />
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.FullSizeStopBit' swap='0' >
									<flowline >
										<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitHalfTime' type='0' />
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='GetState' description='Returns the current state' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Return = LIN_STATE' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Ev_Property' description='Sent when a property has been changed by the User' >
						<return name='Return' type='u32' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='call' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SIM_UpdateBaud' />
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Component.Property.CopyValue' >
							<argument exp='this' />
							<argument exp='dash_IO_flasher' />
							<argument exp='&quot;label&quot;' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='debug' description='' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='idx' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Return = debug[.idx]' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadByte' description='Reads data and returns the state' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='TimeOut' type='s16' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='TestLoop' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Return = STATE_NULL' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='RX_BYTE = 0' />
						</command>
						<command class_type='comment' title='' comment='Wait for start bit (RX = 0)' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.TimeOut = TIMEOUT_VAL' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='.TimeOut' start='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.TestLoop = 0' />
								</command>
								<command class_type='comment' title='' comment='Fast sample loop' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
								<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='.TestLoop' start='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.TestLoop = .TestLoop + 1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='RX = 0' swap='0' >
											<flowline >
												<command class_type='comment' title='' comment='Start bit detected
Exit inner and outer loops' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.TestLoop = 0' />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.TimeOut = 0' />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.Return = STATE_RX' />
												</command>
											</flowline>
											<flowline >
												<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='1' type='0' />
											</flowline>
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.TimeOut' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.TimeOut = .TimeOut - 1' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
						</command>
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_RX' swap='0' >
							<flowline >
								<command class_type='comment' title='' comment='Delay to first data sample point.
(Start bit + 1/2 Data bit)' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
								<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitTime' type='0' />
								<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitHalfTime' type='0' />
								<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='2' exp='8' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='RX_BYTE = RX_BYTE &gt;&gt; 1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='RX' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='RX_BYTE = RX_BYTE | 0x80' />
												</command>
											</flowline>
											<flowline />
										</command>
										<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitTime' type='0' />
									</flowline>
								</command>
								<command class_type='comment' title='' comment='Confirm Stop bit
(RX should be high)' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
								<command class_type='decision' title='Decision' disable='1' cmdcolor='3568629' cmdcolor_sec='3568629' exp='RX' swap='0' >
									<flowline />
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.Return = STATE_FERR' />
										</command>
									</flowline>
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SendHeader' description='' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Address' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='SendingMore' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='p0' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='p1' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='IdentField' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='BitMask' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.p0 = 0' />
							<exp exp='.p1 = 0' />
						</command>
						<command class_type='comment' title='' comment='Generate P0 and P1 parity bits' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.BitMask = 1' />
						</command>
						<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='.BitMask &lt; 0x40' start='0' >
							<flowline >
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Address &amp; .BitMask' swap='0' >
									<flowline >
										<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.BitMask' >
											<case >
												<flowline >
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='1' />
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='0' />
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='1' />
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='0' />
												</flowline>
											</case>
											<case exp='0x01' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 0' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 1' />
													</command>
												</flowline>
											</case>
											<case exp='0x02' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 1' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 1' />
														<exp exp='.p1 = .p1 XOR 1' />
													</command>
												</flowline>
											</case>
											<case exp='0x04' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 2' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 1' />
													</command>
												</flowline>
											</case>
											<case exp='0x08' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 3' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p1 = .p1 XOR 1' />
													</command>
												</flowline>
											</case>
											<case exp='0x10' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 4' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 1' />
														<exp exp='.p1 = .p1 XOR 1' />
													</command>
												</flowline>
											</case>
											<case exp='0x20' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 5' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p1 = .p1 XOR 1' />
													</command>
												</flowline>
											</case>
										</command>
									</flowline>
									<flowline >
										<command class_type='switch' title='Switch' textarea='36,25,36,25' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.BitMask' >
											<case >
												<flowline >
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='1' />
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='0' />
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='1' />
													<command class_type='block' title='' hide='1' cmdcolor='1975743' cmdcolor_sec='1975743' start='0' />
												</flowline>
											</case>
											<case exp='0x01' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 0' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 0' />
														<exp exp='' />
													</command>
												</flowline>
											</case>
											<case exp='0x02' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 1' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 0' />
														<exp exp='.p1 = .p1 XOR 0' />
													</command>
												</flowline>
											</case>
											<case exp='0x04' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 2' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 0' />
													</command>
												</flowline>
											</case>
											<case exp='0x08' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 3' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p1 = .p1 XOR 0' />
													</command>
												</flowline>
											</case>
											<case exp='0x10' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 4' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p0 = .p0 XOR 0' />
														<exp exp='.p1 = .p1 XOR 0' />
													</command>
												</flowline>
											</case>
											<case exp='0x20' >
												<flowline >
													<command class_type='comment' title='' comment='Bit 5' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
													<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
														<exp exp='.p1 = .p1 XOR 0' />
													</command>
												</flowline>
											</case>
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.BitMask = .BitMask &lt;&lt; 1' />
								</command>
							</flowline>
						</command>
						<command class_type='comment' title='' comment='Mask the address and add parity bits' textarea='12,0,12,0' cmdcolor='1975743' cmdcolor_sec='1975743' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.IdentField = .Address &amp; 0x3f' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.p0 &amp; 0x01' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.IdentField = .IdentField | 0x40' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.p1 &amp; 0x01' swap='0' >
							<flowline />
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.IdentField = .IdentField | 0x80' />
								</command>
							</flowline>
						</command>
						<command class_type='native' title='C Code' ccode='#ifdef MX_CAL_AVR
  FCV_SREG_TEMP = SREG;  //Store I flag
  cli();				 //Disable all interrupts
#endif' cmdcolor='3389439' cmdcolor_sec='3389439' language='C' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='TX = 0' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBit13Time' type='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='TX = 1' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitTime' type='0' />
						<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SendByte' >
							<return exp='.Return' />
							<argument exp='0x55' />
							<argument exp='1' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_NULL' swap='0' >
							<flowline >
								<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SendByte' >
									<return exp='.Return' />
									<argument exp='.IdentField' />
									<argument exp='.SendingMore' />
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='LastIDByte = .IdentField' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_NULL' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.Return = LIN_STATE' />
										</command>
									</flowline>
									<flowline />
								</command>
							</flowline>
							<flowline />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SendMessage' description='Sends message with specified identifier and awaits a reply from a slave.
Returns 0 to indicate a successful transaction.
Returns 3 to indicate a timeout.
Returns 6 to indicate a bad CRC.' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Identifier' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='ResponseCount' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='ChecksumType' type='u8' description='0=Classic, 1=Enhanced' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='Checksum' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='Timeout' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='idx' type='u8' description='' isconst='0' isinit='1' usrinit='0' setinit='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Checksum = 0' />
							<exp exp='RX_COUNT = 0' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Timeout = TIMEOUT_VAL' />
						</command>
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='LIN_STATE = STATE_TX' />
						</command>
						<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SendHeader' >
							<return exp='.Return' />
							<argument exp='.Identifier' />
							<argument exp='0' />
						</command>
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.ChecksumType &gt; 0' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.Checksum = LastIDByte' />
								</command>
							</flowline>
							<flowline />
						</command>
						<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' component='dash_IO_flasher' macro='FlashTx' />
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = LIN_STATE' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='LIN_STATE = STATE_RX' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='LIN_STATE = STATE_RX' >
									<flowline >
										<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='ReadByte' >
											<return exp='.Return' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_RX' swap='0' >
											<flowline >
												<command class_type='calculation' title='Rearm Timeout' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.Timeout = TIMEOUT_VAL' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='LIN_STATE = STATE_RX' swap='0' >
													<flowline >
														<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='RX_COUNT &lt; .ResponseCount' swap='0' >
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='RX_DATA[RX_COUNT] = RX_BYTE' />
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='.Checksum = .Checksum + RX_BYTE' />
																</command>
																<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Checksum &lt; RX_BYTE' swap='0' >
																	<flowline >
																		<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																			<exp exp='.Checksum = .Checksum + 1' />
																		</command>
																	</flowline>
																	<flowline />
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='RX_COUNT = RX_COUNT + 1' />
																</command>
															</flowline>
															<flowline >
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='RX_BYTE = ~RX_BYTE' />
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='debug[0] = .Checksum' />
																	<exp exp='debug[1] = RX_BYTE' />
																</command>
																<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Checksum = RX_BYTE' swap='0' >
																	<flowline >
																		<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																			<exp exp='LIN_STATE = STATE_NULL' />
																		</command>
																	</flowline>
																	<flowline >
																		<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																			<exp exp='LIN_STATE = STATE_BADCRC' />
																		</command>
																	</flowline>
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='.Return = LIN_STATE' />
																</command>
																<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
																	<exp exp='LIN_STATE = STATE_OPERATION' />
																</command>
															</flowline>
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.Timeout = .Timeout - 1' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Timeout' swap='0' >
													<flowline />
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
															<exp exp='.Return = STATE_TIMEOUT' />
														</command>
														<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
															<exp exp='LIN_STATE = STATE_OPERATION' />
														</command>
													</flowline>
												</command>
											</flowline>
										</command>
									</flowline>
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' component='dash_IO_flasher' macro='FlashRx' />
							</flowline>
							<flowline />
						</command>
						<command class_type='native' title='C Code' ccode='#ifdef MX_CAL_AVR
  if (FCV_SREG_TEMP &amp; (1 &lt;&lt; SREG_I)) sei();			//Restore all interrupts
#endif
' cmdcolor='3389439' cmdcolor_sec='3389439' language='C' />
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadDataCount' description='Returns the data count size' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.Return = RX_COUNT' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SetData' description='Sets the data bytes to be sent' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<param name='Data1' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data2' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data3' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data4' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data5' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data6' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data7' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Data8' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='TX_DATA[0] = .Data1' />
							<exp exp='TX_DATA[1] = .Data2' />
							<exp exp='TX_DATA[2] = .Data3' />
							<exp exp='TX_DATA[3] = .Data4' />
							<exp exp='TX_DATA[4] = .Data5' />
							<exp exp='TX_DATA[5] = .Data6' />
							<exp exp='TX_DATA[6] = .Data7' />
							<exp exp='TX_DATA[7] = .Data8' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='ReadData' description='Returns a data byte indexed by Idx' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Idx' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Idx &lt; RX_COUNT' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.Return = RX_DATA[.Idx]' />
								</command>
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.Return = 0' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='SendMessageWithData' description='Sends a message with data of length DataCount. See SetData' >
						<return name='Return' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Identifier' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='DataCount' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<param name='Checksum' type='u8' description='0=Classic, 1=Enhanced' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='CsumCac' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='Idx' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<local name='ByteVal' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='(.DataCount &gt;= 1) &amp;&amp; (.DataCount &lt;= 8)' swap='0' >
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='LIN_STATE = STATE_TX' />
								</command>
								<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SendHeader' >
									<return exp='.Return' />
									<argument exp='.Identifier' />
									<argument exp='1' />
								</command>
								<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='pBitHalfTime' type='0' />
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.CsumCac = 0' />
								</command>
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='(.Identifier &gt; 59) || (.Checksum = 0)' swap='0' >
									<flowline />
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.CsumCac = LastIDByte' />
										</command>
									</flowline>
								</command>
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.Idx = 0' />
								</command>
								<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='.Idx &lt; .DataCount' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.ByteVal = TX_DATA[.Idx]' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SendByte' >
											<return exp='.Return' />
											<argument exp='.ByteVal' />
											<argument exp='1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_NULL' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.Idx = .Idx + 1' />
												</command>
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.CsumCac = .CsumCac + .ByteVal' />
												</command>
												<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.CsumCac &lt; .ByteVal' swap='0' >
													<flowline >
														<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
															<exp exp='.CsumCac = .CsumCac + 1' />
														</command>
													</flowline>
													<flowline />
												</command>
											</flowline>
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='.Idx = .DataCount' />
												</command>
											</flowline>
										</command>
									</flowline>
								</command>
								<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_NULL' swap='0' >
									<flowline >
										<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
											<exp exp='.CsumCac = ~ (.CsumCac)' />
										</command>
										<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='SendByte' >
											<return exp='.Return' />
											<argument exp='.CsumCac' />
											<argument exp='1' />
										</command>
										<command class_type='decision' title='Decision' cmdcolor='3568629' cmdcolor_sec='3568629' exp='.Return = STATE_NULL' swap='0' >
											<flowline >
												<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
													<exp exp='LIN_STATE = STATE_OPERATION' />
												</command>
											</flowline>
											<flowline />
										</command>
									</flowline>
									<flowline />
								</command>
								<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' component='dash_IO_flasher' macro='FlashTx' />
								<command class_type='native' title='C Code' ccode='#ifdef MX_CAL_AVR
  if (FCV_SREG_TEMP &amp; (1 &lt;&lt; SREG_I)) sei();			//Restore all interrupts
#endif
' cmdcolor='3389439' cmdcolor_sec='3389439' language='C' />
							</flowline>
							<flowline >
								<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
									<exp exp='.Return = STATE_BADCOUNT' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Main' description='' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<command class_type='call' title='Call Macro' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Ev_Initialise' />
						<command class_type='call' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Initialise' />
						<command class_type='loop' title='Loop' cmdcolor='3568629' cmdcolor_sec='3568629' type='0' exp='1' >
							<flowline >
								<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='1' type='2' />
								<command class_type='sim' title='Simulation' cmdcolor='1975743' cmdcolor_sec='1975743' macro='Debug.PrintLn' >
									<argument exp='STRING pBitTime' />
								</command>
							</flowline>
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='WakeUp' description='Wake Up the device' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='CS = 1' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='MODE_PAUSE' type='0' />
						<command class_type='calculation' title='Calculation' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='LIN_STATE = STATE_OPERATION' />
						</command>
					</flowline>
				</macro>
				<macro >
					<flowline name='Initialise' description='Initialise the component' >
						<return name='Return' type='v0' description='' isconst='0' isinit='0' usrinit='' setinit='' />
						<local name='dummy' type='u8' description='' isconst='0' isinit='0' usrinit='0' setinit='' />
						<command class_type='calculation' title='TX output = 1' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='TX = 1' />
						</command>
						<command class_type='calculation' title='RX as input' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='.dummy = RX' />
						</command>
						<command class_type='calculation' title='CS output = 0' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='CS = 0' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='1' type='1' />
						<command class_type='calculation' title='CS output = 1' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='CS = 1' />
						</command>
						<command class_type='calculation' title='Wake output = 0' cmdcolor='7895044' cmdcolor_sec='7895044' >
							<exp exp='WAKE = 0' />
						</command>
						<command class_type='delay' title='Delay' cmdcolor='7895044' cmdcolor_sec='7895044' exp='100' type='0' />
					</flowline>
				</macro>
			</macros>
			<component class_type='ref' guid='175423b4-b359-4aa7-9bc4-1867301742af' vmin='1' vmaj='1' codename='dash_IO_flasher' x='0' y='0' z='16.505' xsz='1' ysz='1' zsz='1' xang='0' yang='0' zang='0' xquat='0' yquat='0' zquat='0' wquat='1' visible='1' interactive='1' solid='1' layer='0' poslock='0' >
				<resources />
				<properties />
				<values >
					<value target='label' data='LIN Master' />
					<value target='icon_image' data='@000001f9:LINmaster.png' />
					<value target='flash_time' data='250' />
					<value target='Tx_on_color' data='65280' />
					<value target='Tx_off_color' data='13056' />
					<value target='Rx_on_color' data='255' />
					<value target='Rx_off_color' data='50' />
				</values>
				<events />
				<apis />
				<variables />
				<macros />
			</component>
		</component>
	</components>
	<keymap />
	<panel2d shadows='0' lighting='0' brightness='0' perspective='0' >
		<background rgb='9737364' img='' style='0' />
		<camera xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
	</panel2d>
	<panel3d shadows='0' lighting='2' brightness='0' perspective='0' >
		<background rgb='8409120' img='' style='0' />
		<table rgb='7360576' img='' style='0' size='25' />
		<camera xe='0' ye='0' ze='71.7329' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey0 xe='0' ye='0' ze='300' xt='0' yt='0' zt='0' xquat='0' yquat='0' zquat='0' wquat='1' />
		<camerakey1 xe='-3.67394e-14' ye='0' ze='-300' xt='0' yt='0' zt='0' xquat='0' yquat='1' zquat='0' wquat='6.12323e-17' />
		<camerakey2 xe='0' ye='-300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.707107' yquat='0' zquat='0' wquat='0.707107' />
		<camerakey3 xe='-3.67394e-14' ye='300' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-4.32978e-17' yquat='0.707107' zquat='0.707107' wquat='4.32978e-17' />
		<camerakey4 xe='-300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='0.5' zquat='0.5' wquat='0.5' />
		<camerakey5 xe='300' ye='-6.66134e-14' ze='6.66134e-14' xt='0' yt='0' zt='0' xquat='-0.5' yquat='-0.5' zquat='-0.5' wquat='0.5' />
		<camerakey6 xe='-173.205' ye='-173.205' ze='173.205' xt='0' yt='0' zt='0' xquat='-0.424708' yquat='0.17592' zquat='0.339851' wquat='0.820473' />
	</panel3d>
	<layout >
		<view type='0' name='SendMessage' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='676' scrolly='945' flags='0' />
		<view type='0' name='debug' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SendMessageWithData' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='1323' flags='0' />
		<view type='0' name='SendHeader' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='1493' flags='0' />
		<view type='0' name='SendByte' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ReadByte' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Main' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ReadDataCount' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='ReadData' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='WakeUp' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SetData' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SIM_BaudCalc' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='PowerDown' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='GetState' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Initialise' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='SIM_UpdateBaud' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
		<view type='0' name='Ev_Property' mode='0' placement='LAAAAAAAAAABAAAA---------------------wUAAAAYAAAATQUAAH4DAAA' zoom='75' scrollx='0' scrolly='0' flags='0' />
	</layout>
</document>
</root>
