<!-- CRC: 64F301B2D3D2FA130323F115F9295B0329E6FD4BF48DA7CFF6764899D3338C6FDA6183FD7E79AA9B6577EF8789F001E8E441021FDBFC16B5AAD2846EA6E883CBE03F672FC344567ED8DA408700E5719BE5291BBDC019EE4AC5BF1443D4F29059C584141681A532EA0A718AFED5C5AC430C307CF18AF19E4C81E05870F80274EC67F1AC984C25BC40BD7A893763A5E0BAAED0795FA96E131DA7638D5A2D1A926CEC4492B606F8A309086944AE325796A65FD6E68F0051B3DA82F7C6557735C4979F56A5FE058745CA76D3E34736BD7539F516F4BDFF4A1CBE -->
<!-- REVISION: 14.0 -->
<!-- GUID: B112FF61-E66E-47E7-87B0-447CC318947B -->
<!-- DATE: 05\11\2024 -->
<!-- DIR: FCD\SCADA\WEBEXP.fcdx -->

<root>
<!-- Version Information;
13, , 20-06-24, ST, Fixed ceil, round and floor functions;
-->
  <build>
    <generator file="reformer_html.xml" />
  </build>
<device name='WEBEXP' product='SCADA' family='SCADA' bits='8' proglang='WEB'>
    <clock max_speed='100000000' master_divider='1' default='100000000' />
    <memory >
        <flash bytes='999999' />
        <ram bytes='99999' />
    </memory>
    <configuration />
    <pins sides='0' smd='0' >
    </pins>
    <interrupts />
</device>
<inline >
  <defines code='' />
  <directives code='<!-- WEBEXP: add any includes, etc, at the start of the file here-->
      <script>
    function sin(a)                 { return Math.sin(a); }
    function cos(a)                 { return Math.cos(a); }
    function tan(a)                 { return Math.tan(a); }
    function asin(a)                { return Math.asin(a); }
    function acos(a)                { return Math.acos(a); }
    function atan(a)                { return Math.atan(a); }
    function atan2(y,x)             { return Math.atan2(y,x); }
    function sinh(a)                { return Math.sinh(a); }
    function cosh(a)                { return Math.cosh(a); }
    function tanh(a)                { return Math.tanh(a); }
    function asinh(a)               { return Math.asinh(a); }
    function acosh(a)               { return Math.acosh(a); }
    function atanh(a)               { return Math.atanh(a); }
    function fact(a)                { TODO; }
    function log(a)                 { return Math.log(a); }
    function log10(a)               { return Math.log10(a); }
    function float32_sqrt(a)        { return Math.sqrt(a); }  //same as float32_sqrt
    function sqrt(a)                { return Math.sqrt(a); }
    function cbrt(a)                { return Math.cbrt(a); }
    function exp(a)                 { return Math.exp(a); }
    function flt_rem(a)             { TODO; }
    function fmod(a)                { TODO; }  //same as flt_rem
    function fabs(a)                { return Math.abs(a); }
    function rand(a)                { return Math.round(65535 * Math.random(a)); }
    function random(a)              { return Math.round(65535 * Math.random(a)); }  //same as rand
    function fround(a)              { return Math.round(a); }
    function pow(x,y)               { return Math.pow(x,y); }
    function flt_ceil(a)            { return Math.ceil(a); }
    function flt_floor(a)           { return Math.floor(a); }
    function flt_round(a)           { return Math.round(a); }
    function flt_add(a,b)           { return (a+b); }
    function flt_sub(a,b)           { return (a-b); }
    function flt_mul(a,b)           { return (a*b); }
    function flt_div(a,b)           { return (a/b); }
    function flt_le(a,b)            { return (a <= b); }
    function flt_lt(a,b)            { return (a < b); }
    function flt_eq(a,b)            { return (a == b); }
    function flt_ge(a,b)            { return (a >= b); }
    function flt_gt(a,b)            { return (a > b); }
    function flt_toi(a)             { return Math.round(a); }
    function flt_fromi(a)           { return (a); }
    function FCI_ARRAYDIMS(a)       { return (a); }
    function FCI_ARRAYSIZE(a)       { return (a); }

    function FCI_GETCHAR(a,b)       { return a.charCodeAt(b); }
    function FCI_GETLENGTH(a)       { return a.length; }
    function FCI_GETUTF8LEN(a)      { return a.length; }
    function FCI_LEFTSTRING(a,b)    { return a.slice(0,b); }
    function FCI_RIGHTSTRING(a,b)   { return a.slice(0-b); }
    function FCI_MIDSTRING(a,b,c)   { return a.slice(b,b+c); }
    function FCI_TOUPPER(a)         { return a.toUpperCase(); }
    function FCI_TOLOWER(a)         { return a.toLowerCase(); }
    
    function FCI_STRING_TO_INT(a)   { return parseInt(a); }
    function FCI_STRING_TO_FLOAT(a) { return parseFloat(a); }
    function FCI_TOSTRING(a)        { return a.toString(10); }
    function FCI_FLOAT2STR(a)       { return a.toString(); }
    function FCI_FLOAT2STR(a,b)     { return a.toFixed(b).toString(); }
    function FCI_NUMBER_TO_HEX(a)   { return "0x" + a.toString(16); }
    
    function FCI_COMPARE(a,b,c)
    {
      if (c)
      {
        if (a.toUpperCase() == b.toUpperCase())
          return 0;
        else
          if (a.toUpperCase() > b.toUpperCase())
            return 1;
          else
            return -1;
      } else {
        if (a == b)
          return 0;
        else
          if (a > b)
            return 1;
          else
            return -1;
      }
    }

    function FCI_CONTAINS(a,b,c)    { return a.indexOf(b,c); }
    function FCI_SPLITSTRING(a,b,c) { const SSarray = a.split(b); return SSarray[c]; }
    
    function FCI_EXPLODETOINTARRAY(a,b,c)        { return a.split(b).map(Number); }
    function FCI_EXPLODETOFLOATARRAY(a,b,c)      { return a.split(b).map(Number); }
    function FCI_IMPLODEFROMINTARRAY(a,b,c)    	 { let sRetval = ""; for (i=0;i<c;i++) {sRetval = sRetval + a[i].toString(10); if(i<(c - 1)) {sRetval = sRetval + b;} } return sRetval; }
    function FCI_IMPLODEFROMFLOATARRAY(a,b,c,d)  { let sRetval = ""; for (i=0;i<c;i++) {sRetval = sRetval + a[i].toPrecision(d).toString(); if(i<(c - 1)) {sRetval = sRetval + b;} } return sRetval; }
    function FCI_INTTOFORMATTEDSTRING(a,b,c)     { TODO ; }
    function FCI_FLOATTOFORMATTEDSTRING(a,b,c)   { TODO ; }
    function FCI_INSERTSTRING(a,b,c)             { return a.slice(0,c)+b+a.slice(c); }
    function FCI_REMOVEFROMSTRING(a,b,c)         { return a.slice(0,b)+a.slice(b+c); }
    function FCI_SEARCHANDREPLACE(a,b,c)         { return a.replace(b,c); }
   
    
    function resolveAfterMs(val)          { return new Promise((resolve) => { setTimeout(() => { resolve("milli"); }, val); }); }
    async function FCI_DELAYBYTE_US(a)    { await resolveAfterMs(a/1000); }
    async function FCI_DELAYBYTE_MS(a)    { await resolveAfterMs(a); }
    async function FCI_DELAYBYTE_S(a)     { await resolveAfterMs(1000*a); }
    async function FCI_DELAYINT_US(a)     { await resolveAfterMs(a/1000); }
    async function FCI_DELAYINT_MS(a)     { await resolveAfterMs(a); }
    async function FCI_DELAYINT_S(a)      { await resolveAfterMs(1000*a); }

    const MxDelayedObjects = [ ];

   </script>
   ' />
  <main >
    <start code='\n<!-- WEBEXP: customise the <main> function here-->\n<script>\nasync function MyMainFunction()\n{\n' />
    <end code='}\n</script>\n\n' />
    <init code='\t//WEBEXP: init code within <main> can be customised here.\n' />
  </main>
  <interrupt >
    <enable code='' />
    <start code='\n<!-- WEBEXP: put any code at the bottom of the file here-->\n<script>\n  function StartupCheck(obj)\n  {\n    let i = MxDelayedObjects.indexOf(obj);\n    MxDelayedObjects.splice(i,1);\n    if (MxDelayedObjects.length == 0)\n    {\n      MyMainFunction();\n    }\n  }\n\n  //Check delay-start objects and start immediately if there are none\n  if (MxDelayedObjects.length == 0)\n  {\n    MyMainFunction();\n  }\n</script>\n\n' />
    <end code='' />
    <init code='' />
  </interrupt>
  <config >
    <start code='' />
    <body code='' /> 
  </config>
</inline>
</root>
