REM CRC: EA277D0C7EF9B4E537B79187D0BE7A25FA6080B4B01BE48BAF713429E4B690411241251B4A05C2B5828F4452C9F7348705C640EF477B79E0C7881D2E5EEC9BD69A0D46BD3B6AACB92DE4D84759EBB5079CA9DA2D2BBCDAE2A4D1C56CD1580BF5A24465F11D9C3B2DBA3F4E37F13004EE3637760F1F0B7DA0CC623CD30E3C7D6BAB4C3FE6151D92B8EC0ADD55E96639DAC02472BDE3806EF43AE3A028BD32A5DAE68BB191DA97CB6883A66D3C41849952BB2DD264AF32733E2C3050DA273BE4EE1FA30153290F2FAFBD2259D77AD477809E9C4D76400384BA5D2E1919BC6D834D57C406BC4A49D3F1
REM REVISION: 1.0
REM GUID: EA0828B2-5C70-41A5-8C54-F359DD5CC88B
REM DATE: 08\08\2022
REM DIR: FCD\AVR\batchfiles\avra.bat
@REM params = &quot;$(compileravr)&quot; $(chip:l) $(outdir)$(target).elf $(outdir)$(target).c $(outdir)$(target).lst		
@SET MX_COMPILER=%~1
@SET MX_CHIP=%2
@SET MX_ELF=%3
@SET MX_SOURCE=%4
@SET MX_LIST=%5

"%MX_COMPILER%bin\avr-gcc.exe" -mmcu=%MX_CHIP% -Os -ffunction-sections -fdata-sections -funsigned-char -o %MX_ELF% %MX_SOURCE% -lm -Wl,-gc-sections

@IF %ERRORLEVEL% NEQ 0 GOTO Error1

"%MX_COMPILER%bin\avr-objdump.exe" -S %MX_ELF% > %MX_LIST%
@IF %ERRORLEVEL% NEQ 0 GOTO Error2

"%MX_COMPILER%bin\avr-size.exe" -B -d %MX_ELF%

@ECHO.
@ECHO Compilation successful!
@GOTO End

:Error1
@ECHO.
@ECHO Error returned from [avr-gcc.exe]
@EXIT %ERRORLEVEL%

:Error2
@ECHO.
@ECHO Error returned from [avr-objdump.exe]
@EXIT %ERRORLEVEL%

:End
@EXIT 0
